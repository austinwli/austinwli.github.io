import{S as Xt,i as Yt,s as Jt,R as Ht,y as Ut,z as jt,A as Wt,T as Ae,U as ze,g as St,d as Tt,B as Mt,V as oe,K as Te,L as Be,M as Pe,N as Oe,k as M,a as it,q as ct,l as Z,m as H,c as st,r as ft,h as j,n as P,H as Nt,b as kt,C as E,Y as _t,a2 as Sr,Z as Qt,a3 as br,w as ke,e as le,v as De,f as Re,a4 as Ir,u as Zt,D as Ar,$ as zr,a5 as Tr,J as $e,F as Kt,a6 as Ft,O as Ce,a7 as Gt,a8 as Ee,a9 as yr,_ as Br,aa as Se,I as Pr,ab as Ie,p as tr}from"../chunks/index.0b91e82b.js";import{I as xe}from"../chunks/Icon.73e9a82a.js";import{S as Or}from"../chunks/Seo.55483378.js";import{c as Vt,g as Dr}from"../chunks/_commonjsHelpers.725317a4.js";function Rr(_){let l;const e=_[2].default,o=Te(e,_,_[3],null);return{c(){o&&o.c()},l(r){o&&o.l(r)},m(r,t){o&&o.m(r,t),l=!0},p(r,t){o&&o.p&&(!l||t&8)&&Be(o,e,r,r[3],l?Oe(e,r[3],t,null):Pe(r[3]),null)},i(r){l||(St(o,r),l=!0)},o(r){Tt(o,r),l=!1},d(r){o&&o.d(r)}}}function xr(_){let l,e;const o=[{name:"loader-2"},_[1],{iconNode:_[0]}];let r={$$slots:{default:[Rr]},$$scope:{ctx:_}};for(let t=0;t<o.length;t+=1)r=Ht(r,o[t]);return l=new xe({props:r}),{c(){Ut(l.$$.fragment)},l(t){jt(l.$$.fragment,t)},m(t,s){Wt(l,t,s),e=!0},p(t,[s]){const n=s&3?Ae(o,[o[0],s&2&&ze(t[1]),s&1&&{iconNode:t[0]}]):{};s&8&&(n.$$scope={dirty:s,ctx:t}),l.$set(n)},i(t){e||(St(l.$$.fragment,t),e=!0)},o(t){Tt(l.$$.fragment,t),e=!1},d(t){Mt(l,t)}}}function Fr(_,l,e){let{$$slots:o={},$$scope:r}=l;const t=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];return _.$$set=s=>{e(1,l=Ht(Ht({},l),oe(s))),"$$scope"in s&&e(3,r=s.$$scope)},l=oe(l),[t,l,o,r]}class Lr extends Xt{constructor(l){super(),Yt(this,l,Fr,xr,Jt,{})}}const Nr=Lr;function Ur(_){let l;const e=_[2].default,o=Te(e,_,_[3],null);return{c(){o&&o.c()},l(r){o&&o.l(r)},m(r,t){o&&o.m(r,t),l=!0},p(r,t){o&&o.p&&(!l||t&8)&&Be(o,e,r,r[3],l?Oe(e,r[3],t,null):Pe(r[3]),null)},i(r){l||(St(o,r),l=!0)},o(r){Tt(o,r),l=!1},d(r){o&&o.d(r)}}}function jr(_){let l,e;const o=[{name:"upload"},_[1],{iconNode:_[0]}];let r={$$slots:{default:[Ur]},$$scope:{ctx:_}};for(let t=0;t<o.length;t+=1)r=Ht(r,o[t]);return l=new xe({props:r}),{c(){Ut(l.$$.fragment)},l(t){jt(l.$$.fragment,t)},m(t,s){Wt(l,t,s),e=!0},p(t,[s]){const n=s&3?Ae(o,[o[0],s&2&&ze(t[1]),s&1&&{iconNode:t[0]}]):{};s&8&&(n.$$scope={dirty:s,ctx:t}),l.$set(n)},i(t){e||(St(l.$$.fragment,t),e=!0)},o(t){Tt(l.$$.fragment,t),e=!1},d(t){Mt(l,t)}}}function Wr(_,l,e){let{$$slots:o={},$$scope:r}=l;const t=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",y1:"3",x2:"12",y2:"15"}]];return _.$$set=s=>{e(1,l=Ht(Ht({},l),oe(s))),"$$scope"in s&&e(3,r=s.$$scope)},l=oe(l),[t,l,o,r]}class Mr extends Xt{constructor(l){super(),Yt(this,l,Wr,jr,Jt,{})}}const Zr=Mr;function qr(_){let l;const e=_[2].default,o=Te(e,_,_[3],null);return{c(){o&&o.c()},l(r){o&&o.l(r)},m(r,t){o&&o.m(r,t),l=!0},p(r,t){o&&o.p&&(!l||t&8)&&Be(o,e,r,r[3],l?Oe(e,r[3],t,null):Pe(r[3]),null)},i(r){l||(St(o,r),l=!0)},o(r){Tt(o,r),l=!1},d(r){o&&o.d(r)}}}function Vr(_){let l,e;const o=[{name:"x"},_[1],{iconNode:_[0]}];let r={$$slots:{default:[qr]},$$scope:{ctx:_}};for(let t=0;t<o.length;t+=1)r=Ht(r,o[t]);return l=new xe({props:r}),{c(){Ut(l.$$.fragment)},l(t){jt(l.$$.fragment,t)},m(t,s){Wt(l,t,s),e=!0},p(t,[s]){const n=s&3?Ae(o,[o[0],s&2&&ze(t[1]),s&1&&{iconNode:t[0]}]):{};s&8&&(n.$$scope={dirty:s,ctx:t}),l.$set(n)},i(t){e||(St(l.$$.fragment,t),e=!0)},o(t){Tt(l.$$.fragment,t),e=!1},d(t){Mt(l,t)}}}function Hr(_,l,e){let{$$slots:o={},$$scope:r}=l;const t=[["line",{x1:"18",y1:"6",x2:"6",y2:"18"}],["line",{x1:"6",y1:"6",x2:"18",y2:"18"}]];return _.$$set=s=>{e(1,l=Ht(Ht({},l),oe(s))),"$$scope"in s&&e(3,r=s.$$scope)},l=oe(l),[t,l,o,r]}class Gr extends Xt{constructor(l){super(),Yt(this,l,Hr,Vr,Jt,{})}}const Kr=Gr;function Xr(_){let l,e,o,r,t,s,n,f,h,y,b,g,u,v,a,p;return t=new Zr({props:{size:32,class:"mx-auto text-neutral-400"}}),{c(){l=M("div"),e=M("input"),o=it(),r=M("div"),Ut(t.$$.fragment),s=it(),n=M("p"),f=ct(`Drag & drop images here, or
      `),h=M("button"),y=ct("browse"),b=it(),g=M("p"),u=ct("Supports JPG, PNG, WebP"),this.h()},l(d){l=Z(d,"DIV",{class:!0,role:!0,tabindex:!0});var w=H(l);e=Z(w,"INPUT",{type:!0,accept:!0,class:!0}),o=st(w),r=Z(w,"DIV",{class:!0});var C=H(r);jt(t.$$.fragment,C),s=st(C),n=Z(C,"P",{class:!0});var I=H(n);f=ft(I,`Drag & drop images here, or
      `),h=Z(I,"BUTTON",{type:!0,class:!0});var T=H(h);y=ft(T,"browse"),T.forEach(j),I.forEach(j),b=st(C),g=Z(C,"P",{class:!0});var z=H(g);u=ft(z,"Supports JPG, PNG, WebP"),z.forEach(j),C.forEach(j),w.forEach(j),this.h()},h(){P(e,"type","file"),P(e,"accept","image/*"),e.multiple=!0,P(e,"class","hidden svelte-1uzv72t"),e.disabled=_[0],P(h,"type","button"),P(h,"class","link svelte-1uzv72t"),h.disabled=_[0],P(n,"class","text-neutral-700 text-sm sm:text-base svelte-1uzv72t"),P(g,"class","text-xs sm:text-sm text-neutral-500 svelte-1uzv72t"),P(r,"class","content svelte-1uzv72t"),P(l,"class","upload-zone svelte-1uzv72t"),P(l,"role","button"),P(l,"tabindex","0"),Nt(l,"drag-over",_[1]),Nt(l,"disabled",_[0])},m(d,w){kt(d,l,w),E(l,e),_[8](e),E(l,o),E(l,r),Wt(t,r,null),E(r,s),E(r,n),E(n,f),E(n,h),E(h,y),E(r,b),E(r,g),E(g,u),v=!0,a||(p=[_t(e,"change",_[4]),_t(h,"click",Sr(_[5])),_t(l,"drop",_[3]),_t(l,"dragover",Yr),_t(l,"dragenter",_[6]),_t(l,"dragleave",_[7]),_t(l,"click",_[5]),_t(l,"keypress",_[9])],a=!0)},p(d,[w]){(!v||w&1)&&(e.disabled=d[0]),(!v||w&1)&&(h.disabled=d[0]),(!v||w&2)&&Nt(l,"drag-over",d[1]),(!v||w&1)&&Nt(l,"disabled",d[0])},i(d){v||(St(t.$$.fragment,d),v=!0)},o(d){Tt(t.$$.fragment,d),v=!1},d(d){d&&j(l),_[8](null),Mt(t),a=!1,Qt(p)}}}function Yr(_){_.preventDefault()}function Jr(_,l,e){let{disabled:o=!1}=l;const r=br();let t=!1,s;function n(v){var d;v.preventDefault(),e(1,t=!1);const p=Array.from(((d=v.dataTransfer)==null?void 0:d.files)||[]).filter(w=>w.type.startsWith("image/"));p.length>0&&r("filesSelected",p)}function f(v){const a=v.target,p=Array.from(a.files||[]);p.length>0&&r("filesSelected",p),a.value=""}function h(){o||s.click()}function y(){o||e(1,t=!0)}function b(v){const a=v.currentTarget.getBoundingClientRect();(v.clientX<a.left||v.clientX>=a.right||v.clientY<a.top||v.clientY>=a.bottom)&&e(1,t=!1)}function g(v){ke[v?"unshift":"push"](()=>{s=v,e(2,s)})}const u=v=>v.key==="Enter"&&h();return _.$$set=v=>{"disabled"in v&&e(0,o=v.disabled)},[o,t,s,n,f,h,y,b,g,u]}class Qr extends Xt{constructor(l){super(),Yt(this,l,Jr,Xr,Jt,{disabled:0})}}const wr=[[2,1,1,2,0,1,0,1,0,10,4,4,1,5,16,17,3],[2,1,1,1,0,1,0,1,0,1,0,1,0,1,0,10,5,4,1,1,1,4,16,16,3,{relativeTo:22,add:2},16,17,2],[2,1,1,1,0,0,1,0,0,2,0,1,0,1,0,1,0,2,0,1,0,10,5,5,1,1,1,1,1,4,16,16,3,{relativeTo:30,add:3},18,16,2,{relativeTo:30,add:2},17,16,3],[2,1,1,1,0,0,0,1,0,0,1,0,0,2,0,1,0,1,0,2,0,1,0,1,0,1,0,2,0,1,0,1,0,12,8,4,1,1,1,2,1,1,1,2,1,4,16,16,3,{relativeTo:46,add:3},18,16,2,{relativeTo:50,add:2},17,16,3,{relativeTo:54,add:40},16,17,2,{relativeTo:58,add:3},17,17,2]],er=[18,30,42,66];function $r(_){const l=er.indexOf(_);if(l===-1)throw new Error(`Invalid photo count: ${_}. Must be one of: ${er.join(", ")}`);return wr[l]}function kr(_,l){let e=0;for(const o of _.timeRanges){const r=e+o.photoCount;if(l<r){const t=l-e;return tn(o.startTime,o.incrementPattern,t)}e=r}return null}function tn(_,l,e){const[o,r]=_.split(":").map(Number),s=[o*60+r];for(let f=0;f<e&&f<l.length;f++){const h=l[f];let y;if(typeof h=="number")y=s[s.length-1]+h;else{if(h.relativeTo<0||h.relativeTo>=s.length)throw new Error(`Invalid relative reference: index ${h.relativeTo} is out of bounds`);y=s[h.relativeTo]+h.add}s.push(y)}const n=s[s.length-1];return en(n)}function en(_){const l=Math.floor(_/60)%24,e=_%60,o=l>=12?"PM":"AM";return`${l%12||12}:${String(e).padStart(2,"0")}${o}`}function rr(_,l,e){const o=_.slice();o[19]=l[e],o[22]=e;const r=kr(o[3],o[22]);return o[20]=r,o}function nr(_){let l,e,o,r=_[0].length+"",t,s,n=_[0].length===1?"image":"images",f,h,y,b,g,u,v,a,p,d=[],w=new Map,C,I,T,z=_[1]&&ir(_),O=_[0];const R=A=>A[22];for(let A=0;A<O.length;A+=1){let N=rr(_,O,A),J=R(N);w.set(J,d[A]=sr(J,N))}return{c(){l=M("div"),e=M("div"),o=M("div"),t=ct(r),s=it(),f=ct(n),h=ct(" uploaded"),y=it(),b=M("div"),g=M("button"),u=ct("Clear all"),v=it(),z&&z.c(),a=it(),p=M("div");for(let A=0;A<d.length;A+=1)d[A].c();this.h()},l(A){l=Z(A,"DIV",{class:!0});var N=H(l);e=Z(N,"DIV",{class:!0});var J=H(e);o=Z(J,"DIV",{class:!0});var S=H(o);t=ft(S,r),s=st(S),f=ft(S,n),h=ft(S," uploaded"),S.forEach(j),y=st(J),b=Z(J,"DIV",{class:!0});var U=H(b);g=Z(U,"BUTTON",{type:!0,class:!0});var c=H(g);u=ft(c,"Clear all"),c.forEach(j),v=st(U),z&&z.l(U),U.forEach(j),J.forEach(j),a=st(N),p=Z(N,"DIV",{class:!0});var V=H(p);for(let nt=0;nt<d.length;nt+=1)d[nt].l(V);V.forEach(j),N.forEach(j),this.h()},h(){P(o,"class","text-sm text-neutral-600"),P(g,"type","button"),P(g,"class","text-sm text-neutral-500 hover:text-red-600 transition-colors"),P(b,"class","button-group svelte-yuzdwi"),P(e,"class","header-actions svelte-yuzdwi"),P(p,"class","image-grid-responsive svelte-yuzdwi"),P(l,"class","space-y-4")},m(A,N){kt(A,l,N),E(l,e),E(e,o),E(o,t),E(o,s),E(o,f),E(o,h),E(e,y),E(e,b),E(b,g),E(g,u),E(b,v),z&&z.m(b,null),E(l,a),E(l,p);for(let J=0;J<d.length;J+=1)d[J]&&d[J].m(p,null);C=!0,I||(T=_t(g,"click",_[8]),I=!0)},p(A,N){(!C||N&1)&&r!==(r=A[0].length+"")&&Zt(t,r),(!C||N&1)&&n!==(n=A[0].length===1?"image":"images")&&Zt(f,n),A[1]?z?z.p(A,N):(z=ir(A),z.c(),z.m(b,null)):z&&(z.d(1),z=null),N&16121&&(O=A[0],De(),d=Ar(d,N,R,1,A,O,w,p,zr,sr,null,rr),Re())},i(A){if(!C){for(let N=0;N<O.length;N+=1)St(d[N]);C=!0}},o(A){for(let N=0;N<d.length;N+=1)Tt(d[N]);C=!1},d(A){A&&j(l),z&&z.d();for(let N=0;N<d.length;N+=1)d[N].d();I=!1,T()}}}function ir(_){let l,e,o,r,t;return{c(){l=M("button"),e=ct("Download images"),this.h()},l(s){l=Z(s,"BUTTON",{type:!0,class:!0});var n=H(l);e=ft(n,"Download images"),n.forEach(j),this.h()},h(){P(l,"type","button"),P(l,"class","text-sm bg-blue-500 hover:bg-blue-600 text-white transition-colors disabled:bg-neutral-300 disabled:cursor-not-allowed px-3 py-1.5 rounded"),l.disabled=o=!_[2]},m(s,n){kt(s,l,n),E(l,e),r||(t=_t(l,"click",function(){Tr(_[1])&&_[1].apply(this,arguments)}),r=!0)},p(s,n){_=s,n&4&&o!==(o=!_[2])&&(l.disabled=o)},d(s){s&&j(l),r=!1,t()}}}function rn(_){let l,e;return{c(){l=M("p"),e=ct("Not assigned"),this.h()},l(o){l=Z(o,"P",{class:!0});var r=H(l);e=ft(r,"Not assigned"),r.forEach(j),this.h()},h(){P(l,"class","text-sm text-neutral-400 italic")},m(o,r){kt(o,l,r),E(l,e)},p:Kt,d(o){o&&j(l)}}}function nn(_){let l,e=_[20]+"",o;return{c(){l=M("p"),o=ct(e),this.h()},l(r){l=Z(r,"P",{class:!0});var t=H(l);o=ft(t,e),t.forEach(j),this.h()},h(){P(l,"class","text-sm text-neutral-600 truncate")},m(r,t){kt(r,l,t),E(l,o)},p(r,t){t&9&&e!==(e=r[20]+"")&&Zt(o,e)},d(r){r&&j(l)}}}function sr(_,l){let e,o,r,t,s,n,f,h,y,b,g,u,v,a,p;f=new Kr({props:{size:16}});function d(){return l[14](l[22])}function w(R,A){return R[20]?nn:rn}let C=w(l),I=C(l);function T(...R){return l[15](l[22],...R)}function z(...R){return l[16](l[22],...R)}function O(...R){return l[17](l[22],...R)}return{key:_,first:null,c(){e=M("div"),o=M("img"),s=it(),n=M("button"),Ut(f.$$.fragment),y=it(),b=M("div"),I.c(),g=it(),this.h()},l(R){e=Z(R,"DIV",{class:!0,draggable:!0,role:!0,tabindex:!0,"aria-label":!0});var A=H(e);o=Z(A,"IMG",{src:!0,alt:!0,class:!0,draggable:!0}),s=st(A),n=Z(A,"BUTTON",{type:!0,class:!0,"aria-label":!0});var N=H(n);jt(f.$$.fragment,N),N.forEach(j),y=st(A),b=Z(A,"DIV",{class:!0});var J=H(b);I.l(J),J.forEach(j),g=st(A),A.forEach(j),this.h()},h(){$e(o.src,r=l[4][l[22]])||P(o,"src",r),P(o,"alt",t=l[19].name),P(o,"class","w-full h-48 sm:h-56 md:h-64 object-cover rounded"),P(o,"draggable","false"),P(n,"type","button"),P(n,"class","remove-btn-mobile svelte-yuzdwi"),P(n,"aria-label",h="Remove "+l[19].name),P(b,"class","assignment-info-mobile svelte-yuzdwi"),P(e,"class","image-card-mobile group svelte-yuzdwi"),P(e,"draggable","true"),P(e,"role","button"),P(e,"tabindex","0"),P(e,"aria-label",u="Drag to reorder image "+(l[22]+1)),Nt(e,"drag-over",l[6]===l[22]),Nt(e,"is-dragging",l[5]===l[22]),this.first=e},m(R,A){kt(R,e,A),E(e,o),E(e,s),E(e,n),Wt(f,n,null),E(e,y),E(e,b),I.m(b,null),E(e,g),v=!0,a||(p=[_t(n,"click",d),_t(e,"dragstart",T),_t(e,"dragend",l[10]),_t(e,"dragover",z),_t(e,"dragleave",l[12]),_t(e,"drop",O)],a=!0)},p(R,A){l=R,(!v||A&17&&!$e(o.src,r=l[4][l[22]]))&&P(o,"src",r),(!v||A&1&&t!==(t=l[19].name))&&P(o,"alt",t),(!v||A&1&&h!==(h="Remove "+l[19].name))&&P(n,"aria-label",h),C===(C=w(l))&&I?I.p(l,A):(I.d(1),I=C(l),I&&(I.c(),I.m(b,null))),(!v||A&1&&u!==(u="Drag to reorder image "+(l[22]+1)))&&P(e,"aria-label",u),(!v||A&65)&&Nt(e,"drag-over",l[6]===l[22]),(!v||A&33)&&Nt(e,"is-dragging",l[5]===l[22])},i(R){v||(St(f.$$.fragment,R),v=!0)},o(R){Tt(f.$$.fragment,R),v=!1},d(R){R&&j(e),Mt(f),I.d(),a=!1,Qt(p)}}}function sn(_){let l,e,o=_[0].length>0&&nr(_);return{c(){o&&o.c(),l=le()},l(r){o&&o.l(r),l=le()},m(r,t){o&&o.m(r,t),kt(r,l,t),e=!0},p(r,[t]){r[0].length>0?o?(o.p(r,t),t&1&&St(o,1)):(o=nr(r),o.c(),St(o,1),o.m(l.parentNode,l)):o&&(De(),Tt(o,1,1,()=>{o=null}),Re())},i(r){e||(St(o),e=!0)},o(r){Tt(o),e=!1},d(r){o&&o.d(r),r&&j(l)}}}function an(_,l,e){let{files:o=[]}=l,{onProcess:r=null}=l,{canProcess:t=!1}=l,{config:s}=l;const n=br();let f=null,h=null,y=[];Ir(()=>{y.forEach(z=>URL.revokeObjectURL(z))});function b(z){n("remove",z)}function g(){n("clearAll")}function u(z,O){e(5,f=O),z.dataTransfer.effectAllowed="move",z.dataTransfer.setData("text/plain",O.toString()),z.dataTransfer&&(z.dataTransfer.dropEffect="move")}function v(){e(5,f=null),e(6,h=null)}function a(z,O){z.preventDefault(),z.dataTransfer.dropEffect="move",f!==null&&f!==O&&e(6,h=O)}function p(){e(6,h=null)}function d(z,O){if(z.preventDefault(),f===null||f===O){e(6,h=null);return}n("reorder",{from:f,to:O}),e(5,f=null),e(6,h=null)}const w=z=>b(z),C=(z,O)=>u(O,z),I=(z,O)=>a(O,z),T=(z,O)=>d(O,z);return _.$$set=z=>{"files"in z&&e(0,o=z.files),"onProcess"in z&&e(1,r=z.onProcess),"canProcess"in z&&e(2,t=z.canProcess),"config"in z&&e(3,s=z.config)},_.$$.update=()=>{_.$$.dirty&17&&(y.forEach(z=>URL.revokeObjectURL(z)),e(4,y=o.map(z=>URL.createObjectURL(z))))},[o,r,t,s,y,f,h,b,g,u,v,a,p,d,w,C,I,T]}class on extends Xt{constructor(l){super(),Yt(this,l,an,sn,Jt,{files:0,onProcess:1,canProcess:2,config:3})}}function ln(_){const l=_.slice(),e=l[0].timeRanges[0];l[12]=e;const o=pn(l[0],l[12]);return l[13]=o,l}function ar(_){let l,e,o,r,t,s,n,f,h,y,b,g,u,v,a,p,d,w,C,I,T,z,O,R,A;return{c(){l=M("div"),e=M("div"),o=M("div"),r=M("label"),t=ct("Start Time"),n=it(),f=M("input"),y=it(),b=M("div"),g=M("label"),u=ct("Number of Photos"),v=it(),a=M("select"),p=M("option"),d=ct("18"),w=M("option"),C=ct("30"),I=M("option"),T=ct("42"),z=M("option"),O=ct("66"),this.h()},l(N){l=Z(N,"DIV",{class:!0});var J=H(l);e=Z(J,"DIV",{class:!0});var S=H(e);o=Z(S,"DIV",{class:!0});var U=H(o);r=Z(U,"LABEL",{for:!0,class:!0});var c=H(r);t=ft(c,"Start Time"),c.forEach(j),n=st(U),f=Z(U,"INPUT",{id:!0,type:!0,class:!0}),U.forEach(j),y=st(S),b=Z(S,"DIV",{class:!0});var V=H(b);g=Z(V,"LABEL",{for:!0,class:!0});var nt=H(g);u=ft(nt,"Number of Photos"),nt.forEach(j),v=st(V),a=Z(V,"SELECT",{id:!0,class:!0});var q=H(a);p=Z(q,"OPTION",{});var et=H(p);d=ft(et,"18"),et.forEach(j),w=Z(q,"OPTION",{});var D=H(w);C=ft(D,"30"),D.forEach(j),I=Z(q,"OPTION",{});var $=H(I);T=ft($,"42"),$.forEach(j),z=Z(q,"OPTION",{});var x=H(z);O=ft(x,"66"),x.forEach(j),q.forEach(j),V.forEach(j),S.forEach(j),J.forEach(j),this.h()},h(){P(r,"for",s="startTime-"+_[0].timeRanges[0].id),P(r,"class","svelte-2nvjso"),P(f,"id",h="startTime-"+_[0].timeRanges[0].id),P(f,"type","time"),f.required=!0,P(f,"class","svelte-2nvjso"),P(o,"class","form-field svelte-2nvjso"),P(g,"for","photoCount"),P(g,"class","svelte-2nvjso"),p.__value=18,p.value=p.__value,w.__value=30,w.value=w.__value,I.__value=42,I.value=I.__value,z.__value=66,z.value=z.__value,P(a,"id","photoCount"),P(a,"class","svelte-2nvjso"),_[1]===void 0&&Ce(()=>_[11].call(a)),P(b,"class","form-field svelte-2nvjso"),P(e,"class","space-y-3"),P(l,"class","time-range-card svelte-2nvjso")},m(N,J){kt(N,l,J),E(l,e),E(e,o),E(o,r),E(r,t),E(o,n),E(o,f),Ft(f,_[0].timeRanges[0].startTime),E(e,y),E(e,b),E(b,g),E(g,u),E(b,v),E(b,a),E(a,p),E(p,d),E(a,w),E(w,C),E(a,I),E(I,T),E(a,z),E(z,O),Gt(a,_[1],!0),R||(A=[_t(f,"input",_[10]),_t(a,"change",_[11])],R=!0)},p(N,J){J&1&&s!==(s="startTime-"+N[0].timeRanges[0].id)&&P(r,"for",s),J&1&&h!==(h="startTime-"+N[0].timeRanges[0].id)&&P(f,"id",h),J&1&&Ft(f,N[0].timeRanges[0].startTime),J&2&&Gt(a,N[1])},d(N){N&&j(l),R=!1,Qt(A)}}}function or(_){let l,e,o,r,t,s;return{c(){l=M("div"),e=ct("Total photos assigned: "),o=M("span"),r=ct(_[3]),t=ct(`
        / `),s=ct(_[2]),this.h()},l(n){l=Z(n,"DIV",{class:!0});var f=H(l);e=ft(f,"Total photos assigned: "),o=Z(f,"SPAN",{});var h=H(o);r=ft(h,_[3]),h.forEach(j),t=ft(f,`
        / `),s=ft(f,_[2]),f.forEach(j),this.h()},h(){Nt(o,"text-red-600",_[4]),Nt(o,"font-medium",_[4]),P(l,"class","text-sm text-neutral-600")},m(n,f){kt(n,l,f),E(l,e),E(l,o),E(o,r),E(l,t),E(l,s)},p(n,f){f&8&&Zt(r,n[3]),f&16&&Nt(o,"text-red-600",n[4]),f&16&&Nt(o,"font-medium",n[4]),f&4&&Zt(s,n[2])},d(n){n&&j(l)}}}function lr(_){let l,e;return{c(){l=M("p"),e=ct("Total photos in ranges must equal uploaded images"),this.h()},l(o){l=Z(o,"P",{class:!0});var r=H(l);e=ft(r,"Total photos in ranges must equal uploaded images"),r.forEach(j),this.h()},h(){P(l,"class","text-sm text-red-600")},m(o,r){kt(o,l,r),E(l,e)},d(o){o&&j(l)}}}function ur(_){let l;function e(t,s){return t[13]?fn:cn}let o=e(_),r=o(_);return{c(){r.c(),l=le()},l(t){r.l(t),l=le()},m(t,s){r.m(t,s),kt(t,l,s)},p(t,s){o===(o=e(t))&&r?r.p(t,s):(r.d(1),r=o(t),r&&(r.c(),r.m(l.parentNode,l)))},d(t){r.d(t),t&&j(l)}}}function un(_){let l,e;return{c(){l=M("p"),e=ct("Fill in all fields to see preview..."),this.h()},l(o){l=Z(o,"P",{class:!0});var r=H(l);e=ft(r,"Fill in all fields to see preview..."),r.forEach(j),this.h()},h(){P(l,"class","text-sm text-neutral-400 italic")},m(o,r){kt(o,l,r),E(l,e)},p:Kt,d(o){o&&j(l)}}}function cn(_){let l,e;return{c(){l=M("p"),e=ct("Invalid configuration"),this.h()},l(o){l=Z(o,"P",{class:!0});var r=H(l);e=ft(r,"Invalid configuration"),r.forEach(j),this.h()},h(){P(l,"class","text-sm text-neutral-400 italic")},m(o,r){kt(o,l,r),E(l,e)},p:Kt,d(o){o&&j(l)}}}function fn(_){let l,e=_[13]+"",o;return{c(){l=M("pre"),o=ct(e),this.h()},l(r){l=Z(r,"PRE",{class:!0});var t=H(l);o=ft(t,e),t.forEach(j),this.h()},h(){P(l,"class","preview-text svelte-2nvjso")},m(r,t){kt(r,l,t),E(l,o)},p(r,t){t&1&&e!==(e=r[13]+"")&&Zt(o,e)},d(r){r&&j(l)}}}function dn(_){let l,e,o,r,t,s,n,f,h,y,b,g,u,v,a,p,d,w,C,I,T,z,O,R,A,N,J,S,U,c,V,nt,q,et,D,$,x,L,ot,rt,X,gt,pt,at,dt,ht,mt=_[0].timeRanges.length>0&&ar(_),bt=_[2]>0&&or(_),yt=_[4]&&_[2]>0&&lr();function i(m,B){if(!m[0].date||!m[0].street||!m[0].city||!m[0].state||!m[0].zip)return un;if(m[0].timeRanges.length>0)return ur}function G(m,B){return B===ur?ln(m):m}let W=i(_),k=W&&W(G(_,W));return{c(){l=M("div"),e=M("div"),o=M("label"),r=ct("Date"),t=it(),s=M("input"),n=it(),f=M("div"),h=M("div"),y=M("label"),b=ct("Street Address"),g=it(),u=M("input"),v=it(),a=M("div"),p=M("div"),d=M("label"),w=ct("City"),C=it(),I=M("input"),T=it(),z=M("div"),O=M("label"),R=ct("State"),A=it(),N=M("input"),J=it(),S=M("div"),U=M("label"),c=ct("ZIP Code"),V=it(),nt=M("input"),q=it(),et=M("div"),D=M("span"),$=ct("Time Range"),x=it(),mt&&mt.c(),L=it(),bt&&bt.c(),ot=it(),yt&&yt.c(),rt=it(),X=M("div"),gt=M("p"),pt=ct("Preview"),at=it(),k&&k.c(),this.h()},l(m){l=Z(m,"DIV",{class:!0});var B=H(l);e=Z(B,"DIV",{class:!0});var K=H(e);o=Z(K,"LABEL",{for:!0,class:!0});var Y=H(o);r=ft(Y,"Date"),Y.forEach(j),t=st(K),s=Z(K,"INPUT",{id:!0,type:!0,class:!0}),K.forEach(j),n=st(B),f=Z(B,"DIV",{class:!0});var F=H(f);h=Z(F,"DIV",{class:!0});var tt=H(h);y=Z(tt,"LABEL",{for:!0,class:!0});var lt=H(y);b=ft(lt,"Street Address"),lt.forEach(j),g=st(tt),u=Z(tt,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),tt.forEach(j),v=st(F),a=Z(F,"DIV",{class:!0});var Q=H(a);p=Z(Q,"DIV",{class:!0});var ut=H(p);d=Z(ut,"LABEL",{for:!0,class:!0});var wt=H(d);w=ft(wt,"City"),wt.forEach(j),C=st(ut),I=Z(ut,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),ut.forEach(j),T=st(Q),z=Z(Q,"DIV",{class:!0});var vt=H(z);O=Z(vt,"LABEL",{for:!0,class:!0});var It=H(O);R=ft(It,"State"),It.forEach(j),A=st(vt),N=Z(vt,"INPUT",{id:!0,type:!0,placeholder:!0,maxlength:!0,class:!0}),vt.forEach(j),J=st(Q),S=Z(Q,"DIV",{class:!0});var Dt=H(S);U=Z(Dt,"LABEL",{for:!0,class:!0});var Ot=H(U);c=ft(Ot,"ZIP Code"),Ot.forEach(j),V=st(Dt),nt=Z(Dt,"INPUT",{id:!0,type:!0,placeholder:!0,maxlength:!0,class:!0}),Dt.forEach(j),Q.forEach(j),F.forEach(j),q=st(B),et=Z(B,"DIV",{class:!0});var Bt=H(et);D=Z(Bt,"SPAN",{class:!0});var Et=H(D);$=ft(Et,"Time Range"),Et.forEach(j),x=st(Bt),mt&&mt.l(Bt),L=st(Bt),bt&&bt.l(Bt),ot=st(Bt),yt&&yt.l(Bt),Bt.forEach(j),rt=st(B),X=Z(B,"DIV",{class:!0});var At=H(X);gt=Z(At,"P",{class:!0});var Lt=H(gt);pt=ft(Lt,"Preview"),Lt.forEach(j),at=st(At),k&&k.l(At),At.forEach(j),B.forEach(j),this.h()},h(){P(o,"for","date"),P(o,"class","svelte-2nvjso"),P(s,"id","date"),P(s,"type","date"),s.required=!0,P(s,"class","svelte-2nvjso"),P(e,"class","form-field svelte-2nvjso"),P(y,"for","street"),P(y,"class","svelte-2nvjso"),P(u,"id","street"),P(u,"type","text"),P(u,"placeholder","101 Dunster St"),u.required=!0,P(u,"class","svelte-2nvjso"),P(h,"class","form-field full-width svelte-2nvjso"),P(d,"for","city"),P(d,"class","svelte-2nvjso"),P(I,"id","city"),P(I,"type","text"),P(I,"placeholder","Cambridge"),I.required=!0,P(I,"class","svelte-2nvjso"),P(p,"class","form-field svelte-2nvjso"),P(O,"for","state"),P(O,"class","svelte-2nvjso"),P(N,"id","state"),P(N,"type","text"),P(N,"placeholder","MA"),P(N,"maxlength","2"),N.required=!0,P(N,"class","svelte-2nvjso"),P(z,"class","form-field svelte-2nvjso"),P(U,"for","zip"),P(U,"class","svelte-2nvjso"),P(nt,"id","zip"),P(nt,"type","text"),P(nt,"placeholder","02138"),P(nt,"maxlength","10"),nt.required=!0,P(nt,"class","svelte-2nvjso"),P(S,"class","form-field svelte-2nvjso"),P(a,"class","address-row svelte-2nvjso"),P(f,"class","form-grid-responsive svelte-2nvjso"),P(D,"class","text-sm text-neutral-500 font-medium"),P(et,"class","space-y-3"),P(gt,"class","text-sm text-neutral-500 mb-3"),P(X,"class","preview-section svelte-2nvjso"),P(l,"class","space-y-4")},m(m,B){kt(m,l,B),E(l,e),E(e,o),E(o,r),E(e,t),E(e,s),Ft(s,_[0].date),E(l,n),E(l,f),E(f,h),E(h,y),E(y,b),E(h,g),E(h,u),Ft(u,_[0].street),E(f,v),E(f,a),E(a,p),E(p,d),E(d,w),E(p,C),E(p,I),Ft(I,_[0].city),E(a,T),E(a,z),E(z,O),E(O,R),E(z,A),E(z,N),Ft(N,_[0].state),E(a,J),E(a,S),E(S,U),E(U,c),E(S,V),E(S,nt),Ft(nt,_[0].zip),E(l,q),E(l,et),E(et,D),E(D,$),E(et,x),mt&&mt.m(et,null),E(et,L),bt&&bt.m(et,null),E(et,ot),yt&&yt.m(et,null),E(l,rt),E(l,X),E(X,gt),E(gt,pt),E(X,at),k&&k.m(X,null),dt||(ht=[_t(s,"input",_[5]),_t(u,"input",_[6]),_t(I,"input",_[7]),_t(N,"input",_[8]),_t(nt,"input",_[9])],dt=!0)},p(m,[B]){B&1&&Ft(s,m[0].date),B&1&&u.value!==m[0].street&&Ft(u,m[0].street),B&1&&I.value!==m[0].city&&Ft(I,m[0].city),B&1&&N.value!==m[0].state&&Ft(N,m[0].state),B&1&&nt.value!==m[0].zip&&Ft(nt,m[0].zip),m[0].timeRanges.length>0?mt?mt.p(m,B):(mt=ar(m),mt.c(),mt.m(et,L)):mt&&(mt.d(1),mt=null),m[2]>0?bt?bt.p(m,B):(bt=or(m),bt.c(),bt.m(et,ot)):bt&&(bt.d(1),bt=null),m[4]&&m[2]>0?yt||(yt=lr(),yt.c(),yt.m(et,null)):yt&&(yt.d(1),yt=null),W===(W=i(m))&&k?k.p(G(m,W),B):(k&&k.d(1),k=W&&W(G(m,W)),k&&(k.c(),k.m(X,null)))},i:Kt,o:Kt,d(m){m&&j(l),mt&&mt.d(),bt&&bt.d(),yt&&yt.d(),k&&k.d(),dt=!1,Qt(ht)}}}function hn(_){const[l,e]=_.split(":").map(Number),o=l>=12?"PM":"AM";return`${l%12||12}:${String(e).padStart(2,"0")}${o}`}function pn(_,l){if(!_.date||!_.street||!_.city||!_.state||!_.zip)return null;const[e,o,r]=_.date.split("-"),t=`${o}/${r}/${e}`,s=hn(l.startTime);return`${t} ${s}
${_.street.toUpperCase()}
${_.city.toUpperCase()}, ${_.state.toUpperCase()} ${_.zip}`}function mn(_,l,e){let o,r,{config:t}=l,{selectedPhotoCount:s}=l,{totalImages:n=0}=l;function f(){t.date=this.value,e(0,t)}function h(){t.street=this.value,e(0,t)}function y(){t.city=this.value,e(0,t)}function b(){t.state=this.value,e(0,t)}function g(){t.zip=this.value,e(0,t)}function u(){t.timeRanges[0].startTime=this.value,e(0,t)}function v(){s=Ee(this),e(1,s)}return _.$$set=a=>{"config"in a&&e(0,t=a.config),"selectedPhotoCount"in a&&e(1,s=a.selectedPhotoCount),"totalImages"in a&&e(2,n=a.totalImages)},_.$$.update=()=>{_.$$.dirty&1&&e(3,o=t.timeRanges.reduce((a,p)=>a+p.photoCount,0)),_.$$.dirty&12&&e(4,r=n>0&&o!==n)},[t,s,n,o,r,f,h,y,b,g,u,v]}class _n extends Xt{constructor(l){super(),Yt(this,l,mn,dn,Jt,{config:0,selectedPhotoCount:1,totalImages:2})}}function cr(_,l,e){const o=_.slice();return o[32]=l[e],o}function fr(_){let l,e,o,r,t,s,n,f,h,y,b;return{c(){l=M("div"),e=M("label"),o=ct("Choose Color"),r=it(),t=M("div"),s=M("input"),f=it(),h=M("input"),this.h()},l(g){l=Z(g,"DIV",{class:!0});var u=H(l);e=Z(u,"LABEL",{for:!0,class:!0});var v=H(e);o=ft(v,"Choose Color"),v.forEach(j),r=st(u),t=Z(u,"DIV",{class:!0});var a=H(t);s=Z(a,"INPUT",{id:!0,type:!0,class:!0}),f=st(a),h=Z(a,"INPUT",{type:!0,placeholder:!0,class:!0,pattern:!0}),a.forEach(j),u.forEach(j),this.h()},h(){P(e,"for","textColorPicker"),P(e,"class","color-picker-label svelte-1q0s692"),P(s,"id","textColorPicker"),P(s,"type","color"),s.value=n=_[0].textColor,P(s,"class","color-picker svelte-1q0s692"),P(h,"type","text"),P(h,"placeholder","#FFFFFF"),P(h,"class","color-hex-input svelte-1q0s692"),P(h,"pattern","#[0-9A-Fa-f]6"),P(t,"class","color-picker-container svelte-1q0s692"),P(l,"class","color-picker-wrapper svelte-1q0s692")},m(g,u){kt(g,l,u),E(l,e),E(e,o),E(l,r),E(l,t),E(t,s),E(t,f),E(t,h),Ft(h,_[0].textColor),y||(b=[_t(s,"change",_[8]),_t(h,"input",_[22]),_t(h,"input",_[10])],y=!0)},p(g,u){u[0]&1&&n!==(n=g[0].textColor)&&(s.value=n),u[0]&1&&h.value!==g[0].textColor&&Ft(h,g[0].textColor)},d(g){g&&j(l),y=!1,Qt(b)}}}function dr(_){let l,e,o,r,t,s,n,f,h,y,b,g,u,v,a,p,d,w,C,I,T,z,O,R,A,N,J,S,U,c,V,nt,q,et,D,$,x,L,ot,rt,X=_[3]&&hr(_),gt=_[5],pt=[];for(let at=0;at<gt.length;at+=1)pt[at]=pr(cr(_,gt,at));return L=yr(_[16][0]),{c(){l=M("div"),e=M("div"),o=M("label"),r=ct("Border Color"),t=it(),s=M("div"),n=M("div"),f=M("label"),h=M("input"),y=it(),b=M("div"),g=it(),u=M("span"),v=ct("White"),a=it(),p=M("label"),d=M("input"),w=it(),C=M("div"),I=it(),T=M("span"),z=ct("Black"),O=it(),R=M("label"),A=M("input"),N=it(),J=M("div"),S=it(),U=M("span"),c=ct("Custom"),V=it(),X&&X.c(),nt=it(),q=M("div"),et=M("label"),D=ct("Border Width"),$=it(),x=M("select");for(let at=0;at<pt.length;at+=1)pt[at].c();this.h()},l(at){l=Z(at,"DIV",{class:!0});var dt=H(l);e=Z(dt,"DIV",{class:!0});var ht=H(e);o=Z(ht,"LABEL",{for:!0,class:!0});var mt=H(o);r=ft(mt,"Border Color"),mt.forEach(j),t=st(ht),s=Z(ht,"DIV",{class:!0});var bt=H(s);n=Z(bt,"DIV",{class:!0});var yt=H(n);f=Z(yt,"LABEL",{class:!0});var i=H(f);h=Z(i,"INPUT",{type:!0,class:!0}),y=st(i),b=Z(i,"DIV",{class:!0}),H(b).forEach(j),g=st(i),u=Z(i,"SPAN",{});var G=H(u);v=ft(G,"White"),G.forEach(j),i.forEach(j),a=st(yt),p=Z(yt,"LABEL",{class:!0});var W=H(p);d=Z(W,"INPUT",{type:!0,class:!0}),w=st(W),C=Z(W,"DIV",{class:!0}),H(C).forEach(j),I=st(W),T=Z(W,"SPAN",{});var k=H(T);z=ft(k,"Black"),k.forEach(j),W.forEach(j),O=st(yt),R=Z(yt,"LABEL",{class:!0});var m=H(R);A=Z(m,"INPUT",{type:!0,class:!0}),N=st(m),J=Z(m,"DIV",{class:!0}),H(J).forEach(j),S=st(m),U=Z(m,"SPAN",{});var B=H(U);c=ft(B,"Custom"),B.forEach(j),m.forEach(j),yt.forEach(j),V=st(bt),X&&X.l(bt),bt.forEach(j),ht.forEach(j),nt=st(dt),q=Z(dt,"DIV",{});var K=H(q);et=Z(K,"LABEL",{for:!0,class:!0});var Y=H(et);D=ft(Y,"Border Width"),Y.forEach(j),$=st(K),x=Z(K,"SELECT",{id:!0,class:!0});var F=H(x);for(let tt=0;tt<pt.length;tt+=1)pt[tt].l(F);F.forEach(j),K.forEach(j),dt.forEach(j),this.h()},h(){P(o,"for","borderColor"),P(o,"class","text-sm text-neutral-500 svelte-1q0s692"),P(h,"type","radio"),h.__value="white",h.value=h.__value,P(h,"class","svelte-1q0s692"),P(b,"class","color-preview white svelte-1q0s692"),P(f,"class","color-option svelte-1q0s692"),P(d,"type","radio"),d.__value="black",d.value=d.__value,P(d,"class","svelte-1q0s692"),P(C,"class","color-preview black svelte-1q0s692"),P(p,"class","color-option svelte-1q0s692"),P(A,"type","radio"),A.__value="custom",A.value=A.__value,P(A,"class","svelte-1q0s692"),P(J,"class","color-preview custom svelte-1q0s692"),P(R,"class","color-option svelte-1q0s692"),P(n,"class","color-options svelte-1q0s692"),P(s,"class","color-selector svelte-1q0s692"),P(e,"class","mt-2"),P(et,"for","borderWidth"),P(et,"class","svelte-1q0s692"),P(x,"id","borderWidth"),P(x,"class","svelte-1q0s692"),_[0].borderWidth===void 0&&Ce(()=>_[31].call(x)),P(l,"class","mt-3 space-y-3 svelte-1q0s692"),L.p(h,d,A)},m(at,dt){kt(at,l,dt),E(l,e),E(e,o),E(o,r),E(e,t),E(e,s),E(s,n),E(n,f),E(f,h),h.checked=h.__value===_[2],E(f,y),E(f,b),E(f,g),E(f,u),E(u,v),E(n,a),E(n,p),E(p,d),d.checked=d.__value===_[2],E(p,w),E(p,C),E(p,I),E(p,T),E(T,z),E(n,O),E(n,R),E(R,A),A.checked=A.__value===_[2],E(R,N),E(R,J),E(R,S),E(R,U),E(U,c),E(s,V),X&&X.m(s,null),E(l,nt),E(l,q),E(q,et),E(et,D),E(q,$),E(q,x);for(let ht=0;ht<pt.length;ht+=1)pt[ht]&&pt[ht].m(x,null);Gt(x,_[0].borderWidth,!0),ot||(rt=[_t(h,"change",_[24]),_t(h,"change",_[25]),_t(d,"change",_[26]),_t(d,"change",_[27]),_t(A,"change",_[28]),_t(A,"change",_[29]),_t(x,"change",_[31])],ot=!0)},p(at,dt){if(dt[0]&4&&(h.checked=h.__value===at[2]),dt[0]&4&&(d.checked=d.__value===at[2]),dt[0]&4&&(A.checked=A.__value===at[2]),at[3]?X?X.p(at,dt):(X=hr(at),X.c(),X.m(s,null)):X&&(X.d(1),X=null),dt[0]&32){gt=at[5];let ht;for(ht=0;ht<gt.length;ht+=1){const mt=cr(at,gt,ht);pt[ht]?pt[ht].p(mt,dt):(pt[ht]=pr(mt),pt[ht].c(),pt[ht].m(x,null))}for(;ht<pt.length;ht+=1)pt[ht].d(1);pt.length=gt.length}dt[0]&1&&Gt(x,at[0].borderWidth)},d(at){at&&j(l),X&&X.d(),Br(pt,at),L.r(),ot=!1,Qt(rt)}}}function hr(_){let l,e,o,r,t,s,n,f,h,y,b;return{c(){l=M("div"),e=M("label"),o=ct("Choose Color"),r=it(),t=M("div"),s=M("input"),f=it(),h=M("input"),this.h()},l(g){l=Z(g,"DIV",{class:!0});var u=H(l);e=Z(u,"LABEL",{for:!0,class:!0});var v=H(e);o=ft(v,"Choose Color"),v.forEach(j),r=st(u),t=Z(u,"DIV",{class:!0});var a=H(t);s=Z(a,"INPUT",{id:!0,type:!0,class:!0}),f=st(a),h=Z(a,"INPUT",{type:!0,placeholder:!0,class:!0,pattern:!0}),a.forEach(j),u.forEach(j),this.h()},h(){P(e,"for","borderColorPicker"),P(e,"class","color-picker-label svelte-1q0s692"),P(s,"id","borderColorPicker"),P(s,"type","color"),s.value=n=_[0].borderColor,P(s,"class","color-picker svelte-1q0s692"),P(h,"type","text"),P(h,"placeholder","#000000"),P(h,"class","color-hex-input svelte-1q0s692"),P(h,"pattern","#[0-9A-Fa-f]6"),P(t,"class","color-picker-container svelte-1q0s692"),P(l,"class","color-picker-wrapper mt-2 svelte-1q0s692")},m(g,u){kt(g,l,u),E(l,e),E(e,o),E(l,r),E(l,t),E(t,s),E(t,f),E(t,h),Ft(h,_[0].borderColor),y||(b=[_t(s,"change",_[9]),_t(h,"input",_[30]),_t(h,"input",_[11])],y=!0)},p(g,u){u[0]&1&&n!==(n=g[0].borderColor)&&(s.value=n),u[0]&1&&h.value!==g[0].borderColor&&Ft(h,g[0].borderColor)},d(g){g&&j(l),y=!1,Qt(b)}}}function pr(_){let l,e=_[32].name+"",o;return{c(){l=M("option"),o=ct(e),this.h()},l(r){l=Z(r,"OPTION",{});var t=H(l);o=ft(t,e),t.forEach(j),this.h()},h(){l.__value=_[32].value,l.value=l.__value},m(r,t){kt(r,l,t),E(l,o)},p:Kt,d(r){r&&j(l)}}}function vn(_){let l,e,o,r,t,s,n,f,h,y,b,g,u,v,a,p,d,w,C,I,T,z,O,R,A,N,J,S,U,c,V,nt,q,et,D,$,x,L,ot,rt,X,gt,pt,at,dt,ht,mt,bt,yt,i,G,W,k,m,B,K,Y,F,tt,lt,Q,ut,wt,vt,It,Dt,Ot,Bt,Et,At,Lt,Pt,ee,$t,ue,ce,re,qt,te,Rt=_[4]&&fr(_),xt=_[0].hasBorder&&dr(_);return re=yr(_[16][1]),{c(){l=M("div"),e=M("p"),o=ct("Advanced options (optional)"),r=it(),t=M("div"),s=M("div"),n=M("label"),f=ct("Position"),h=it(),y=M("select"),b=M("option"),g=ct("Top Left"),u=M("option"),v=ct("Top Right"),a=M("option"),p=ct("Bottom Left"),d=M("option"),w=ct("Bottom Right"),C=it(),I=M("div"),T=M("label"),z=ct("Text Size"),O=it(),R=M("select"),A=M("option"),N=ct("Small"),J=M("option"),S=ct("Medium"),U=M("option"),c=ct("Large"),V=it(),nt=M("div"),q=M("label"),et=M("input"),D=it(),$=M("span"),x=ct("Bold text"),L=it(),ot=M("div"),rt=M("label"),X=ct("Text Color"),gt=it(),pt=M("div"),at=M("div"),dt=M("label"),ht=M("input"),mt=it(),bt=M("div"),yt=it(),i=M("span"),G=ct("White"),W=it(),k=M("label"),m=M("input"),B=it(),K=M("div"),Y=it(),F=M("span"),tt=ct("Black"),lt=it(),Q=M("label"),ut=M("input"),wt=it(),vt=M("div"),It=it(),Dt=M("span"),Ot=ct("Custom"),Bt=it(),Rt&&Rt.c(),Et=it(),At=M("div"),Lt=M("label"),Pt=M("input"),ee=it(),$t=M("span"),ue=ct("Add text border/outline"),ce=it(),xt&&xt.c(),this.h()},l(zt){l=Z(zt,"DIV",{class:!0});var Ct=H(l);e=Z(Ct,"P",{class:!0});var Fe=H(e);o=ft(Fe,"Advanced options (optional)"),Fe.forEach(j),r=st(Ct),t=Z(Ct,"DIV",{class:!0});var de=H(t);s=Z(de,"DIV",{class:!0});var he=H(s);n=Z(he,"LABEL",{for:!0,class:!0});var Le=H(n);f=ft(Le,"Position"),Le.forEach(j),h=st(he),y=Z(he,"SELECT",{id:!0,class:!0});var fe=H(y);b=Z(fe,"OPTION",{});var Ne=H(b);g=ft(Ne,"Top Left"),Ne.forEach(j),u=Z(fe,"OPTION",{});var Ue=H(u);v=ft(Ue,"Top Right"),Ue.forEach(j),a=Z(fe,"OPTION",{});var je=H(a);p=ft(je,"Bottom Left"),je.forEach(j),d=Z(fe,"OPTION",{});var We=H(d);w=ft(We,"Bottom Right"),We.forEach(j),fe.forEach(j),he.forEach(j),C=st(de),I=Z(de,"DIV",{class:!0});var pe=H(I);T=Z(pe,"LABEL",{for:!0,class:!0});var Me=H(T);z=ft(Me,"Text Size"),Me.forEach(j),O=st(pe),R=Z(pe,"SELECT",{id:!0,class:!0});var me=H(R);A=Z(me,"OPTION",{});var Ze=H(A);N=ft(Ze,"Small"),Ze.forEach(j),J=Z(me,"OPTION",{});var qe=H(J);S=ft(qe,"Medium"),qe.forEach(j),U=Z(me,"OPTION",{});var Ve=H(U);c=ft(Ve,"Large"),Ve.forEach(j),me.forEach(j),pe.forEach(j),de.forEach(j),V=st(Ct),nt=Z(Ct,"DIV",{class:!0});var He=H(nt);q=Z(He,"LABEL",{class:!0});var _e=H(q);et=Z(_e,"INPUT",{type:!0,class:!0}),D=st(_e),$=Z(_e,"SPAN",{});var Ge=H($);x=ft(Ge,"Bold text"),Ge.forEach(j),_e.forEach(j),He.forEach(j),L=st(Ct),ot=Z(Ct,"DIV",{class:!0});var ve=H(ot);rt=Z(ve,"LABEL",{for:!0,class:!0});var Ke=H(rt);X=ft(Ke,"Text Color"),Ke.forEach(j),gt=st(ve),pt=Z(ve,"DIV",{class:!0});var ge=H(pt);at=Z(ge,"DIV",{class:!0});var ne=H(at);dt=Z(ne,"LABEL",{class:!0});var ie=H(dt);ht=Z(ie,"INPUT",{type:!0,class:!0}),mt=st(ie),bt=Z(ie,"DIV",{class:!0}),H(bt).forEach(j),yt=st(ie),i=Z(ie,"SPAN",{});var Xe=H(i);G=ft(Xe,"White"),Xe.forEach(j),ie.forEach(j),W=st(ne),k=Z(ne,"LABEL",{class:!0});var se=H(k);m=Z(se,"INPUT",{type:!0,class:!0}),B=st(se),K=Z(se,"DIV",{class:!0}),H(K).forEach(j),Y=st(se),F=Z(se,"SPAN",{});var Ye=H(F);tt=ft(Ye,"Black"),Ye.forEach(j),se.forEach(j),lt=st(ne),Q=Z(ne,"LABEL",{class:!0});var ae=H(Q);ut=Z(ae,"INPUT",{type:!0,class:!0}),wt=st(ae),vt=Z(ae,"DIV",{class:!0}),H(vt).forEach(j),It=st(ae),Dt=Z(ae,"SPAN",{});var Je=H(Dt);Ot=ft(Je,"Custom"),Je.forEach(j),ae.forEach(j),ne.forEach(j),Bt=st(ge),Rt&&Rt.l(ge),ge.forEach(j),ve.forEach(j),Et=st(Ct),At=Z(Ct,"DIV",{class:!0});var be=H(At);Lt=Z(be,"LABEL",{class:!0});var ye=H(Lt);Pt=Z(ye,"INPUT",{type:!0,class:!0}),ee=st(ye),$t=Z(ye,"SPAN",{});var Qe=H($t);ue=ft(Qe,"Add text border/outline"),Qe.forEach(j),ye.forEach(j),ce=st(be),xt&&xt.l(be),be.forEach(j),Ct.forEach(j),this.h()},h(){P(e,"class","text-sm text-neutral-500"),P(n,"for","position"),P(n,"class","svelte-1q0s692"),b.__value="top-left",b.value=b.__value,u.__value="top-right",u.value=u.__value,a.__value="bottom-left",a.value=a.__value,d.__value="bottom-right",d.value=d.__value,P(y,"id","position"),P(y,"class","svelte-1q0s692"),_[0].position===void 0&&Ce(()=>_[12].call(y)),P(s,"class","form-field svelte-1q0s692"),P(T,"for","fontSize"),P(T,"class","svelte-1q0s692"),A.__value="small",A.value=A.__value,J.__value="medium",J.value=J.__value,U.__value="large",U.value=U.__value,P(R,"id","fontSize"),P(R,"class","svelte-1q0s692"),_[0].fontSize===void 0&&Ce(()=>_[13].call(R)),P(I,"class","form-field svelte-1q0s692"),P(t,"class","options-grid svelte-1q0s692"),P(et,"type","checkbox"),P(et,"class","svelte-1q0s692"),P(q,"class","flex items-center space-x-2 cursor-pointer svelte-1q0s692"),P(nt,"class","form-field"),P(rt,"for","textColor"),P(rt,"class","svelte-1q0s692"),P(ht,"type","radio"),ht.__value="white",ht.value=ht.__value,P(ht,"class","svelte-1q0s692"),P(bt,"class","color-preview white svelte-1q0s692"),P(dt,"class","color-option svelte-1q0s692"),P(m,"type","radio"),m.__value="black",m.value=m.__value,P(m,"class","svelte-1q0s692"),P(K,"class","color-preview black svelte-1q0s692"),P(k,"class","color-option svelte-1q0s692"),P(ut,"type","radio"),ut.__value="custom",ut.value=ut.__value,P(ut,"class","svelte-1q0s692"),P(vt,"class","color-preview custom svelte-1q0s692"),P(Q,"class","color-option svelte-1q0s692"),P(at,"class","color-options svelte-1q0s692"),P(pt,"class","color-selector svelte-1q0s692"),P(ot,"class","form-field svelte-1q0s692"),P(Pt,"type","checkbox"),P(Pt,"class","svelte-1q0s692"),P(Lt,"class","checkbox-label svelte-1q0s692"),P(At,"class","form-field svelte-1q0s692"),P(l,"class","space-y-4"),re.p(ht,m,ut)},m(zt,Ct){kt(zt,l,Ct),E(l,e),E(e,o),E(l,r),E(l,t),E(t,s),E(s,n),E(n,f),E(s,h),E(s,y),E(y,b),E(b,g),E(y,u),E(u,v),E(y,a),E(a,p),E(y,d),E(d,w),Gt(y,_[0].position,!0),E(t,C),E(t,I),E(I,T),E(T,z),E(I,O),E(I,R),E(R,A),E(A,N),E(R,J),E(J,S),E(R,U),E(U,c),Gt(R,_[0].fontSize,!0),E(l,V),E(l,nt),E(nt,q),E(q,et),et.checked=_[0].bold,E(q,D),E(q,$),E($,x),E(l,L),E(l,ot),E(ot,rt),E(rt,X),E(ot,gt),E(ot,pt),E(pt,at),E(at,dt),E(dt,ht),ht.checked=ht.__value===_[1],E(dt,mt),E(dt,bt),E(dt,yt),E(dt,i),E(i,G),E(at,W),E(at,k),E(k,m),m.checked=m.__value===_[1],E(k,B),E(k,K),E(k,Y),E(k,F),E(F,tt),E(at,lt),E(at,Q),E(Q,ut),ut.checked=ut.__value===_[1],E(Q,wt),E(Q,vt),E(Q,It),E(Q,Dt),E(Dt,Ot),E(pt,Bt),Rt&&Rt.m(pt,null),E(l,Et),E(l,At),E(At,Lt),E(Lt,Pt),Pt.checked=_[0].hasBorder,E(Lt,ee),E(Lt,$t),E($t,ue),E(At,ce),xt&&xt.m(At,null),qt||(te=[_t(y,"change",_[12]),_t(R,"change",_[13]),_t(et,"change",_[14]),_t(ht,"change",_[15]),_t(ht,"change",_[17]),_t(m,"change",_[18]),_t(m,"change",_[19]),_t(ut,"change",_[20]),_t(ut,"change",_[21]),_t(Pt,"change",_[23])],qt=!0)},p(zt,Ct){Ct[0]&1&&Gt(y,zt[0].position),Ct[0]&1&&Gt(R,zt[0].fontSize),Ct[0]&1&&(et.checked=zt[0].bold),Ct[0]&2&&(ht.checked=ht.__value===zt[1]),Ct[0]&2&&(m.checked=m.__value===zt[1]),Ct[0]&2&&(ut.checked=ut.__value===zt[1]),zt[4]?Rt?Rt.p(zt,Ct):(Rt=fr(zt),Rt.c(),Rt.m(pt,null)):Rt&&(Rt.d(1),Rt=null),Ct[0]&1&&(Pt.checked=zt[0].hasBorder),zt[0].hasBorder?xt?xt.p(zt,Ct):(xt=dr(zt),xt.c(),xt.m(At,null)):xt&&(xt.d(1),xt=null)},i:Kt,o:Kt,d(zt){zt&&j(l),Rt&&Rt.d(),xt&&xt.d(),re.r(),qt=!1,Qt(te)}}}function gn(_,l,e){let o,r,{options:t}=l;const s=[{name:"Thin",value:"thin"},{name:"Medium",value:"medium"},{name:"Thick",value:"thick"}];let n=t.textColor==="white"||t.textColor==="black"?t.textColor:"custom",f=t.borderColor==="white"||t.borderColor==="black"?t.borderColor:"custom";function h(D){e(1,n=D),D==="custom"?e(0,t.textColor="#FFFFFF",t):e(0,t.textColor=D,t)}function y(D){e(2,f=D),D==="custom"?e(0,t.borderColor="#000000",t):e(0,t.borderColor=D,t)}function b(D){const $=D.target;$&&(e(0,t.textColor=$.value.toUpperCase(),t),e(1,n="custom"))}function g(D){const $=D.target;$&&(e(0,t.borderColor=$.value.toUpperCase(),t),e(2,f="custom"))}function u(D){const $=D.target;if($){const x=$.value.trim();x.match(/^#[0-9A-Fa-f]{6}$/)&&(e(0,t.textColor=x.toUpperCase(),t),e(1,n="custom"))}}function v(D){const $=D.target;if($){const x=$.value.trim();x.match(/^#[0-9A-Fa-f]{6}$/)&&(e(0,t.borderColor=x.toUpperCase(),t),e(2,f="custom"))}}const a=[[],[]];function p(){t.position=Ee(this),e(0,t)}function d(){t.fontSize=Ee(this),e(0,t)}function w(){t.bold=this.checked,e(0,t)}function C(){n=this.__value,e(1,n),e(0,t)}const I=()=>h("white");function T(){n=this.__value,e(1,n),e(0,t)}const z=()=>h("black");function O(){n=this.__value,e(1,n),e(0,t)}const R=()=>h("custom");function A(){t.textColor=this.value,e(0,t)}function N(){t.hasBorder=this.checked,e(0,t)}function J(){f=this.__value,e(2,f),e(0,t)}const S=()=>y("white");function U(){f=this.__value,e(2,f),e(0,t)}const c=()=>y("black");function V(){f=this.__value,e(2,f),e(0,t)}const nt=()=>y("custom");function q(){t.borderColor=this.value,e(0,t)}function et(){t.borderWidth=Ee(this),e(0,t)}return _.$$set=D=>{"options"in D&&e(0,t=D.options)},_.$$.update=()=>{_.$$.dirty[0]&1&&(t.textColor==="white"||t.textColor==="black"?e(1,n=t.textColor):typeof t.textColor=="string"&&t.textColor.startsWith("#")&&e(1,n="custom")),_.$$.dirty[0]&1&&t.hasBorder&&(t.borderColor==="white"||t.borderColor==="black"?e(2,f=t.borderColor):typeof t.borderColor=="string"&&t.borderColor.startsWith("#")&&e(2,f="custom")),_.$$.dirty[0]&2&&e(4,o=n==="custom"),_.$$.dirty[0]&5&&e(3,r=t.hasBorder&&f==="custom")},[t,n,f,r,o,s,h,y,b,g,u,v,p,d,w,C,a,I,T,z,O,R,A,N,J,S,U,c,V,nt,q,et]}class bn extends Xt{constructor(l){super(),Yt(this,l,gn,vn,Jt,{options:0},null,[-1,-1])}}async function yn(){const _="Alibaba Sans Medium";if(!document.fonts||!document.fonts.check){await new Promise(l=>setTimeout(l,1e3));return}try{if(document.fonts.check(`12px "${_}"`))return;const e=5e3,o=Date.now();return new Promise((r,t)=>{const s=()=>{const n=Date.now()-o;if(document.fonts.check(`12px "${_}"`)){r();return}if(n>e){console.warn(`Font "${_}" did not load within ${e}ms, proceeding anyway`),r();return}requestAnimationFrame(s)};document.fonts.ready.then(()=>{document.fonts.check(`12px "${_}"`)?r():s()}).catch(()=>{s()}),s()})}catch(l){console.warn(`Error checking font "${_}":`,l),await new Promise(e=>setTimeout(e,1e3))}}async function wn(_,l,e,o){await yn();const r=[];for(let t=0;t<_.length;t++){o==null||o({current:t+1,total:_.length,currentFile:_[t].name});const s=await kn(_[t],l,e,t);r.push(s)}return r}async function kn(_,l,e,o){const r=await Cn(_),t=document.createElement("canvas"),s=t.getContext("2d");if(!s)throw new Error("Could not get canvas context");t.width=r.width,t.height=r.height,s.drawImage(r,0,0);const n=kr(l,o)||"12:00PM",[f,h,y]=l.date.split("-"),g=[`${`${h}/${y}/${f}`} ${n}`,l.street.toUpperCase(),`${l.city.toUpperCase()}, ${l.state.toUpperCase()} ${l.zip}`];return En(s,g,t.width,t.height,e),new Promise((u,v)=>{t.toBlob(a=>{a?u(a):v(new Error("Failed to convert canvas to blob"))},"image/jpeg",.92)})}function En(_,l,e,o,r){const s={small:Math.floor(o*.025),medium:Math.floor(o*.035),large:Math.floor(o*.045)}[r.fontSize],n=s*1.2,f=Math.max(n-10,s*.8),h=r.bold?'"Alibaba Sans Bold", "Alibaba Sans Medium", "Alibaba Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif':'"Alibaba Sans Medium", "Alibaba Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';_.font=`${s}px ${h}`,_.textBaseline="top";const y=l.map(d=>_.measureText(d).width),b=Math.max(...y),g=f*l.length,u=s*.8;let v,a;r.position.includes("right")?v=e-b-u:v=u,r.position.includes("bottom")?a=o-g-u:a=u;const p={thin:1,medium:2,thick:3};l.forEach((d,w)=>{const C=a+w*f;if(r.hasBorder){const I=p[r.borderWidth];_.strokeStyle=r.borderColor==="white"?"rgba(255,255,255,0.95)":r.borderColor==="black"?"rgba(0,0,0,0.9)":r.borderColor,_.lineWidth=I*2,_.lineJoin="round",_.miterLimit=2,_.strokeText(d,v,C)}_.fillStyle=r.textColor==="white"?"rgba(255,255,255,0.95)":r.textColor==="black"?"rgba(0,0,0,0.9)":r.textColor,_.fillText(d,v,C)})}function Cn(_){return new Promise((l,e)=>{const o=new Image;o.onload=()=>{URL.revokeObjectURL(o.src),l(o)},o.onerror=()=>{URL.revokeObjectURL(o.src),e(new Error(`Failed to load image: ${_.name}`))},o.src=URL.createObjectURL(_)})}function mr(_){if(_.length===0)return"Please select at least one image";if(_.length>100)return"Maximum 100 images allowed";const o=_.find(t=>t.size>20971520);if(o)return`File "${o.name}" is too large (max 20MB)`;const r=_.find(t=>!t.type.startsWith("image/"));return r?`File "${r.name}" is not an image`:null}function _r(_,l=0){if(!_.date)return"Date is required";if(!_.street.trim())return"Street address is required";if(!_.city.trim())return"City is required";if(!_.state.trim())return"State is required";if(!_.zip.trim())return"ZIP code is required";if(_.timeRanges.length===0)return"At least one time range is required";for(let e=0;e<_.timeRanges.length;e++){const o=_.timeRanges[e];if(!o.startTime)return`Range ${e+1}: Start time is required`;if(!o.incrementPattern||!Array.isArray(o.incrementPattern))return`Range ${e+1}: Increment pattern is required`;if(o.photoCount<0)return`Range ${e+1}: Photo count cannot be negative`;if(o.photoCount>0&&o.incrementPattern.length!==o.photoCount-1)return`Range ${e+1}: Pattern length (${o.incrementPattern.length}) must be ${o.photoCount-1} for ${o.photoCount} photos`;for(let r=0;r<o.incrementPattern.length;r++){const t=o.incrementPattern[r];if(typeof t=="number"){if(t<0)return`Range ${e+1}: Pattern entry ${r+1} cannot be negative`}else if(typeof t=="object"&&t!==null){if(typeof t.relativeTo!="number"||typeof t.add!="number")return`Range ${e+1}: Pattern entry ${r+1} has invalid relative reference format`;if(t.relativeTo<0||t.relativeTo>r)return`Range ${e+1}: Pattern entry ${r+1} references invalid index (must reference an already-computed entry)`;if(t.add<0)return`Range ${e+1}: Pattern entry ${r+1} has negative add value`}else return`Range ${e+1}: Pattern entry ${r+1} has invalid format`}}if(l>0){const e=_.timeRanges.reduce((o,r)=>o+r.photoCount,0);if(e!==l)return`Total photos in ranges (${e}) must equal uploaded images (${l})`}return null}function we(_){throw new Error('Could not dynamically require "'+_+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Er={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(_,l){(function(e){_.exports=e()})(function(){return function e(o,r,t){function s(h,y){if(!r[h]){if(!o[h]){var b=typeof we=="function"&&we;if(!y&&b)return b(h,!0);if(n)return n(h,!0);var g=new Error("Cannot find module '"+h+"'");throw g.code="MODULE_NOT_FOUND",g}var u=r[h]={exports:{}};o[h][0].call(u.exports,function(v){var a=o[h][1][v];return s(a||v)},u,u.exports,e,o,r,t)}return r[h].exports}for(var n=typeof we=="function"&&we,f=0;f<t.length;f++)s(t[f]);return s}({1:[function(e,o,r){var t=e("./utils"),s=e("./support"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(f){for(var h,y,b,g,u,v,a,p=[],d=0,w=f.length,C=w,I=t.getTypeOf(f)!=="string";d<f.length;)C=w-d,b=I?(h=f[d++],y=d<w?f[d++]:0,d<w?f[d++]:0):(h=f.charCodeAt(d++),y=d<w?f.charCodeAt(d++):0,d<w?f.charCodeAt(d++):0),g=h>>2,u=(3&h)<<4|y>>4,v=1<C?(15&y)<<2|b>>6:64,a=2<C?63&b:64,p.push(n.charAt(g)+n.charAt(u)+n.charAt(v)+n.charAt(a));return p.join("")},r.decode=function(f){var h,y,b,g,u,v,a=0,p=0,d="data:";if(f.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var w,C=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===n.charAt(64)&&C--,f.charAt(f.length-2)===n.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=s.uint8array?new Uint8Array(0|C):new Array(0|C);a<f.length;)h=n.indexOf(f.charAt(a++))<<2|(g=n.indexOf(f.charAt(a++)))>>4,y=(15&g)<<4|(u=n.indexOf(f.charAt(a++)))>>2,b=(3&u)<<6|(v=n.indexOf(f.charAt(a++))),w[p++]=h,u!==64&&(w[p++]=y),v!==64&&(w[p++]=b);return w}},{"./support":30,"./utils":32}],2:[function(e,o,r){var t=e("./external"),s=e("./stream/DataWorker"),n=e("./stream/Crc32Probe"),f=e("./stream/DataLengthProbe");function h(y,b,g,u,v){this.compressedSize=y,this.uncompressedSize=b,this.crc32=g,this.compression=u,this.compressedContent=v}h.prototype={getContentWorker:function(){var y=new s(t.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),b=this;return y.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new s(t.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(y,b,g){return y.pipe(new n).pipe(new f("uncompressedSize")).pipe(b.compressWorker(g)).pipe(new f("compressedSize")).withStreamInfo("compression",b)},o.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,o,r){var t=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new t("STORE compression")},uncompressWorker:function(){return new t("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,o,r){var t=e("./utils"),s=function(){for(var n,f=[],h=0;h<256;h++){n=h;for(var y=0;y<8;y++)n=1&n?3988292384^n>>>1:n>>>1;f[h]=n}return f}();o.exports=function(n,f){return n!==void 0&&n.length?t.getTypeOf(n)!=="string"?function(h,y,b,g){var u=s,v=g+b;h^=-1;for(var a=g;a<v;a++)h=h>>>8^u[255&(h^y[a])];return-1^h}(0|f,n,n.length,0):function(h,y,b,g){var u=s,v=g+b;h^=-1;for(var a=g;a<v;a++)h=h>>>8^u[255&(h^y.charCodeAt(a))];return-1^h}(0|f,n,n.length,0):0}},{"./utils":32}],5:[function(e,o,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,o,r){var t=null;t=typeof Promise<"u"?Promise:e("lie"),o.exports={Promise:t}},{lie:37}],7:[function(e,o,r){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=e("pako"),n=e("./utils"),f=e("./stream/GenericWorker"),h=t?"uint8array":"array";function y(b,g){f.call(this,"FlateWorker/"+b),this._pako=null,this._pakoAction=b,this._pakoOptions=g,this.meta={}}r.magic="\b\0",n.inherits(y,f),y.prototype.processChunk=function(b){this.meta=b.meta,this._pako===null&&this._createPako(),this._pako.push(n.transformTo(h,b.data),!1)},y.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var b=this;this._pako.onData=function(g){b.push({data:g,meta:b.meta})}},r.compressWorker=function(b){return new y("Deflate",b)},r.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,o,r){function t(u,v){var a,p="";for(a=0;a<v;a++)p+=String.fromCharCode(255&u),u>>>=8;return p}function s(u,v,a,p,d,w){var C,I,T=u.file,z=u.compression,O=w!==h.utf8encode,R=n.transformTo("string",w(T.name)),A=n.transformTo("string",h.utf8encode(T.name)),N=T.comment,J=n.transformTo("string",w(N)),S=n.transformTo("string",h.utf8encode(N)),U=A.length!==T.name.length,c=S.length!==N.length,V="",nt="",q="",et=T.dir,D=T.date,$={crc32:0,compressedSize:0,uncompressedSize:0};v&&!a||($.crc32=u.crc32,$.compressedSize=u.compressedSize,$.uncompressedSize=u.uncompressedSize);var x=0;v&&(x|=8),O||!U&&!c||(x|=2048);var L=0,ot=0;et&&(L|=16),d==="UNIX"?(ot=798,L|=function(X,gt){var pt=X;return X||(pt=gt?16893:33204),(65535&pt)<<16}(T.unixPermissions,et)):(ot=20,L|=function(X){return 63&(X||0)}(T.dosPermissions)),C=D.getUTCHours(),C<<=6,C|=D.getUTCMinutes(),C<<=5,C|=D.getUTCSeconds()/2,I=D.getUTCFullYear()-1980,I<<=4,I|=D.getUTCMonth()+1,I<<=5,I|=D.getUTCDate(),U&&(nt=t(1,1)+t(y(R),4)+A,V+="up"+t(nt.length,2)+nt),c&&(q=t(1,1)+t(y(J),4)+S,V+="uc"+t(q.length,2)+q);var rt="";return rt+=`
\0`,rt+=t(x,2),rt+=z.magic,rt+=t(C,2),rt+=t(I,2),rt+=t($.crc32,4),rt+=t($.compressedSize,4),rt+=t($.uncompressedSize,4),rt+=t(R.length,2),rt+=t(V.length,2),{fileRecord:b.LOCAL_FILE_HEADER+rt+R+V,dirRecord:b.CENTRAL_FILE_HEADER+t(ot,2)+rt+t(J.length,2)+"\0\0\0\0"+t(L,4)+t(p,4)+R+V+J}}var n=e("../utils"),f=e("../stream/GenericWorker"),h=e("../utf8"),y=e("../crc32"),b=e("../signature");function g(u,v,a,p){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=a,this.encodeFileName=p,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(g,f),g.prototype.push=function(u){var v=u.meta.percent||0,a=this.entriesCount,p=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,f.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:a?(v+100*(a-p-1))/a:100}}))},g.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var v=this.streamFiles&&!u.file.dir;if(v){var a=s(u,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:a.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(u){this.accumulate=!1;var v=this.streamFiles&&!u.file.dir,a=s(u,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(a.dirRecord),v)this.push({data:function(p){return b.DATA_DESCRIPTOR+t(p.crc32,4)+t(p.compressedSize,4)+t(p.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:a.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var u=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var a=this.bytesWritten-u,p=function(d,w,C,I,T){var z=n.transformTo("string",T(I));return b.CENTRAL_DIRECTORY_END+"\0\0\0\0"+t(d,2)+t(d,2)+t(w,4)+t(C,4)+t(z.length,2)+z}(this.dirRecords.length,a,u,this.zipComment,this.encodeFileName);this.push({data:p,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(u){this._sources.push(u);var v=this;return u.on("data",function(a){v.processChunk(a)}),u.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),u.on("error",function(a){v.error(a)}),this},g.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(u){var v=this._sources;if(!f.prototype.error.call(this,u))return!1;for(var a=0;a<v.length;a++)try{v[a].error(u)}catch{}return!0},g.prototype.lock=function(){f.prototype.lock.call(this);for(var u=this._sources,v=0;v<u.length;v++)u[v].lock()},o.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,o,r){var t=e("../compressions"),s=e("./ZipFileWorker");r.generateWorker=function(n,f,h){var y=new s(f.streamFiles,h,f.platform,f.encodeFileName),b=0;try{n.forEach(function(g,u){b++;var v=function(w,C){var I=w||C,T=t[I];if(!T)throw new Error(I+" is not a valid compression method !");return T}(u.options.compression,f.compression),a=u.options.compressionOptions||f.compressionOptions||{},p=u.dir,d=u.date;u._compressWorker(v,a).withStreamInfo("file",{name:g,dir:p,date:d,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(y)}),y.entriesCount=b}catch(g){y.error(g)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,o,r){function t(){if(!(this instanceof t))return new t;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new t;for(var n in this)typeof this[n]!="function"&&(s[n]=this[n]);return s}}(t.prototype=e("./object")).loadAsync=e("./load"),t.support=e("./support"),t.defaults=e("./defaults"),t.version="3.10.1",t.loadAsync=function(s,n){return new t().loadAsync(s,n)},t.external=e("./external"),o.exports=t},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,o,r){var t=e("./utils"),s=e("./external"),n=e("./utf8"),f=e("./zipEntries"),h=e("./stream/Crc32Probe"),y=e("./nodejsUtils");function b(g){return new s.Promise(function(u,v){var a=g.decompressed.getContentWorker().pipe(new h);a.on("error",function(p){v(p)}).on("end",function(){a.streamInfo.crc32!==g.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}o.exports=function(g,u){var v=this;return u=t.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),y.isNode&&y.isStream(g)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):t.prepareContent("the loaded zip file",g,!0,u.optimizedBinaryString,u.base64).then(function(a){var p=new f(u);return p.load(a),p}).then(function(a){var p=[s.Promise.resolve(a)],d=a.files;if(u.checkCRC32)for(var w=0;w<d.length;w++)p.push(b(d[w]));return s.Promise.all(p)}).then(function(a){for(var p=a.shift(),d=p.files,w=0;w<d.length;w++){var C=d[w],I=C.fileNameStr,T=t.resolve(C.fileNameStr);v.file(T,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:u.createFolders}),C.dir||(v.file(T).unsafeOriginalName=I)}return p.zipComment.length&&(v.comment=p.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,o,r){var t=e("../utils"),s=e("../stream/GenericWorker");function n(f,h){s.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(h)}t.inherits(n,s),n.prototype._bindStream=function(f){var h=this;(this._stream=f).pause(),f.on("data",function(y){h.push({data:y,meta:{percent:0}})}).on("error",function(y){h.isPaused?this.generatedError=y:h.error(y)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},n.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},o.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,o,r){var t=e("readable-stream").Readable;function s(n,f,h){t.call(this,f),this._helper=n;var y=this;n.on("data",function(b,g){y.push(b)||y._helper.pause(),h&&h(g)}).on("error",function(b){y.emit("error",b)}).on("end",function(){y.push(null)})}e("../utils").inherits(s,t),s.prototype._read=function(){this._helper.resume()},o.exports=s},{"../utils":32,"readable-stream":16}],14:[function(e,o,r){o.exports={isNode:typeof Buffer<"u",newBufferFrom:function(t,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,s);if(typeof t=="number")throw new Error('The "data" argument must not be a number');return new Buffer(t,s)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var s=new Buffer(t);return s.fill(0),s},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&typeof t.on=="function"&&typeof t.pause=="function"&&typeof t.resume=="function"}}},{}],15:[function(e,o,r){function t(T,z,O){var R,A=n.getTypeOf(z),N=n.extend(O||{},y);N.date=N.date||new Date,N.compression!==null&&(N.compression=N.compression.toUpperCase()),typeof N.unixPermissions=="string"&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(T=d(T)),N.createFolders&&(R=p(T))&&w.call(this,R,!0);var J=A==="string"&&N.binary===!1&&N.base64===!1;O&&O.binary!==void 0||(N.binary=!J),(z instanceof b&&z.uncompressedSize===0||N.dir||!z||z.length===0)&&(N.base64=!1,N.binary=!0,z="",N.compression="STORE",A="string");var S=null;S=z instanceof b||z instanceof f?z:v.isNode&&v.isStream(z)?new a(T,z):n.prepareContent(T,z,N.binary,N.optimizedBinaryString,N.base64);var U=new g(T,S,N);this.files[T]=U}var s=e("./utf8"),n=e("./utils"),f=e("./stream/GenericWorker"),h=e("./stream/StreamHelper"),y=e("./defaults"),b=e("./compressedObject"),g=e("./zipObject"),u=e("./generate"),v=e("./nodejsUtils"),a=e("./nodejs/NodejsStreamInputAdapter"),p=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var z=T.lastIndexOf("/");return 0<z?T.substring(0,z):""},d=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},w=function(T,z){return z=z!==void 0?z:y.createFolders,T=d(T),this.files[T]||t.call(this,T,null,{dir:!0,createFolders:z}),this.files[T]};function C(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var I={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var z,O,R;for(z in this.files)R=this.files[z],(O=z.slice(this.root.length,z.length))&&z.slice(0,this.root.length)===this.root&&T(O,R)},filter:function(T){var z=[];return this.forEach(function(O,R){T(O,R)&&z.push(R)}),z},file:function(T,z,O){if(arguments.length!==1)return T=this.root+T,t.call(this,T,z,O),this;if(C(T)){var R=T;return this.filter(function(N,J){return!J.dir&&R.test(N)})}var A=this.files[this.root+T];return A&&!A.dir?A:null},folder:function(T){if(!T)return this;if(C(T))return this.filter(function(A,N){return N.dir&&T.test(A)});var z=this.root+T,O=w.call(this,z),R=this.clone();return R.root=O.name,R},remove:function(T){T=this.root+T;var z=this.files[T];if(z||(T.slice(-1)!=="/"&&(T+="/"),z=this.files[T]),z&&!z.dir)delete this.files[T];else for(var O=this.filter(function(A,N){return N.name.slice(0,T.length)===T}),R=0;R<O.length;R++)delete this.files[O[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var z,O={};try{if((O=n.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");n.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var R=O.comment||this.comment||"";z=u.generateWorker(this,O,R)}catch(A){(z=new f("error")).error(A)}return new h(z,O.type||"string",O.mimeType)},generateAsync:function(T,z){return this.generateInternalStream(T).accumulate(z)},generateNodeStream:function(T,z){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(z)}};o.exports=I},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,o,r){o.exports=e("stream")},{stream:void 0}],17:[function(e,o,r){var t=e("./DataReader");function s(n){t.call(this,n);for(var f=0;f<this.data.length;f++)n[f]=255&n[f]}e("../utils").inherits(s,t),s.prototype.byteAt=function(n){return this.data[this.zero+n]},s.prototype.lastIndexOfSignature=function(n){for(var f=n.charCodeAt(0),h=n.charCodeAt(1),y=n.charCodeAt(2),b=n.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===f&&this.data[g+1]===h&&this.data[g+2]===y&&this.data[g+3]===b)return g-this.zero;return-1},s.prototype.readAndCheckSignature=function(n){var f=n.charCodeAt(0),h=n.charCodeAt(1),y=n.charCodeAt(2),b=n.charCodeAt(3),g=this.readData(4);return f===g[0]&&h===g[1]&&y===g[2]&&b===g[3]},s.prototype.readData=function(n){if(this.checkOffset(n),n===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,f},o.exports=s},{"../utils":32,"./DataReader":18}],18:[function(e,o,r){var t=e("../utils");function s(n){this.data=n,this.length=n.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<this.zero+n||n<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?")},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(){},readInt:function(n){var f,h=0;for(this.checkOffset(n),f=this.index+n-1;f>=this.index;f--)h=(h<<8)+this.byteAt(f);return this.index+=n,h},readString:function(n){return t.transformTo("string",this.readData(n))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var n=this.readInt(4);return new Date(Date.UTC(1980+(n>>25&127),(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1))}},o.exports=s},{"../utils":32}],19:[function(e,o,r){var t=e("./Uint8ArrayReader");function s(n){t.call(this,n)}e("../utils").inherits(s,t),s.prototype.readData=function(n){this.checkOffset(n);var f=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,f},o.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,o,r){var t=e("./DataReader");function s(n){t.call(this,n)}e("../utils").inherits(s,t),s.prototype.byteAt=function(n){return this.data.charCodeAt(this.zero+n)},s.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)-this.zero},s.prototype.readAndCheckSignature=function(n){return n===this.readData(4)},s.prototype.readData=function(n){this.checkOffset(n);var f=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,f},o.exports=s},{"../utils":32,"./DataReader":18}],21:[function(e,o,r){var t=e("./ArrayReader");function s(n){t.call(this,n)}e("../utils").inherits(s,t),s.prototype.readData=function(n){if(this.checkOffset(n),n===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+n);return this.index+=n,f},o.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(e,o,r){var t=e("../utils"),s=e("../support"),n=e("./ArrayReader"),f=e("./StringReader"),h=e("./NodeBufferReader"),y=e("./Uint8ArrayReader");o.exports=function(b){var g=t.getTypeOf(b);return t.checkSupport(g),g!=="string"||s.uint8array?g==="nodebuffer"?new h(b):s.uint8array?new y(t.transformTo("uint8array",b)):new n(t.transformTo("array",b)):new f(b)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,o,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,o,r){var t=e("./GenericWorker"),s=e("../utils");function n(f){t.call(this,"ConvertWorker to "+f),this.destType=f}s.inherits(n,t),n.prototype.processChunk=function(f){this.push({data:s.transformTo(this.destType,f.data),meta:f.meta})},o.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(e,o,r){var t=e("./GenericWorker"),s=e("../crc32");function n(){t.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(n,t),n.prototype.processChunk=function(f){this.streamInfo.crc32=s(f.data,this.streamInfo.crc32||0),this.push(f)},o.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,o,r){var t=e("../utils"),s=e("./GenericWorker");function n(f){s.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}t.inherits(n,s),n.prototype.processChunk=function(f){if(f){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+f.data.length}s.prototype.processChunk.call(this,f)},o.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(e,o,r){var t=e("../utils"),s=e("./GenericWorker");function n(f){s.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(y){h.dataIsReady=!0,h.data=y,h.max=y&&y.length||0,h.type=t.getTypeOf(y),h.isPaused||h._tickAndRepeat()},function(y){h.error(y)})}t.inherits(n,s),n.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,t.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(t.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,h);break;case"uint8array":f=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":f=this.data.slice(this.index,h)}return this.index=h,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},o.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(e,o,r){function t(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}t.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,n){return this._listeners[s].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,n){if(this._listeners[s])for(var f=0;f<this._listeners[s].length;f++)this._listeners[s][f].call(this,n)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var n=this;return s.on("data",function(f){n.processChunk(f)}),s.on("end",function(){n.end()}),s.on("error",function(f){n.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,n){return this.extraStreamInfo[s]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},o.exports=t},{}],29:[function(e,o,r){var t=e("../utils"),s=e("./ConvertWorker"),n=e("./GenericWorker"),f=e("../base64"),h=e("../support"),y=e("../external"),b=null;if(h.nodestream)try{b=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(v,a){return new y.Promise(function(p,d){var w=[],C=v._internalType,I=v._outputType,T=v._mimeType;v.on("data",function(z,O){w.push(z),a&&a(O)}).on("error",function(z){w=[],d(z)}).on("end",function(){try{var z=function(O,R,A){switch(O){case"blob":return t.newBlob(t.transformTo("arraybuffer",R),A);case"base64":return f.encode(R);default:return t.transformTo(O,R)}}(I,function(O,R){var A,N=0,J=null,S=0;for(A=0;A<R.length;A++)S+=R[A].length;switch(O){case"string":return R.join("");case"array":return Array.prototype.concat.apply([],R);case"uint8array":for(J=new Uint8Array(S),A=0;A<R.length;A++)J.set(R[A],N),N+=R[A].length;return J;case"nodebuffer":return Buffer.concat(R);default:throw new Error("concat : unsupported type '"+O+"'")}}(C,w),T);p(z)}catch(O){d(O)}w=[]}).resume()})}function u(v,a,p){var d=a;switch(a){case"blob":case"arraybuffer":d="uint8array";break;case"base64":d="string"}try{this._internalType=d,this._outputType=a,this._mimeType=p,t.checkSupport(d),this._worker=v.pipe(new s(d)),v.lock()}catch(w){this._worker=new n("error"),this._worker.error(w)}}u.prototype={accumulate:function(v){return g(this,v)},on:function(v,a){var p=this;return v==="data"?this._worker.on(v,function(d){a.call(p,d.data,d.meta)}):this._worker.on(v,function(){t.delay(a,arguments,p)}),this},resume:function(){return t.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(t.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new b(this,{objectMode:this._outputType!=="nodebuffer"},v)}},o.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,o,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var t=new ArrayBuffer(0);try{r.blob=new Blob([t],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(t),r.blob=s.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(e,o,r){for(var t=e("./utils"),s=e("./support"),n=e("./nodejsUtils"),f=e("./stream/GenericWorker"),h=new Array(256),y=0;y<256;y++)h[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;h[254]=h[254]=1;function b(){f.call(this,"utf-8 decode"),this.leftOver=null}function g(){f.call(this,"utf-8 encode")}r.utf8encode=function(u){return s.nodebuffer?n.newBufferFrom(u,"utf-8"):function(v){var a,p,d,w,C,I=v.length,T=0;for(w=0;w<I;w++)(64512&(p=v.charCodeAt(w)))==55296&&w+1<I&&(64512&(d=v.charCodeAt(w+1)))==56320&&(p=65536+(p-55296<<10)+(d-56320),w++),T+=p<128?1:p<2048?2:p<65536?3:4;for(a=s.uint8array?new Uint8Array(T):new Array(T),w=C=0;C<T;w++)(64512&(p=v.charCodeAt(w)))==55296&&w+1<I&&(64512&(d=v.charCodeAt(w+1)))==56320&&(p=65536+(p-55296<<10)+(d-56320),w++),p<128?a[C++]=p:(p<2048?a[C++]=192|p>>>6:(p<65536?a[C++]=224|p>>>12:(a[C++]=240|p>>>18,a[C++]=128|p>>>12&63),a[C++]=128|p>>>6&63),a[C++]=128|63&p);return a}(u)},r.utf8decode=function(u){return s.nodebuffer?t.transformTo("nodebuffer",u).toString("utf-8"):function(v){var a,p,d,w,C=v.length,I=new Array(2*C);for(a=p=0;a<C;)if((d=v[a++])<128)I[p++]=d;else if(4<(w=h[d]))I[p++]=65533,a+=w-1;else{for(d&=w===2?31:w===3?15:7;1<w&&a<C;)d=d<<6|63&v[a++],w--;1<w?I[p++]=65533:d<65536?I[p++]=d:(d-=65536,I[p++]=55296|d>>10&1023,I[p++]=56320|1023&d)}return I.length!==p&&(I.subarray?I=I.subarray(0,p):I.length=p),t.applyFromCharCode(I)}(u=t.transformTo(s.uint8array?"uint8array":"array",u))},t.inherits(b,f),b.prototype.processChunk=function(u){var v=t.transformTo(s.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var a=v;(v=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),v.set(a,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var p=function(w,C){var I;for((C=C||w.length)>w.length&&(C=w.length),I=C-1;0<=I&&(192&w[I])==128;)I--;return I<0||I===0?C:I+h[w[I]]>C?I:C}(v),d=v;p!==v.length&&(s.uint8array?(d=v.subarray(0,p),this.leftOver=v.subarray(p,v.length)):(d=v.slice(0,p),this.leftOver=v.slice(p,v.length))),this.push({data:r.utf8decode(d),meta:u.meta})},b.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=b,t.inherits(g,f),g.prototype.processChunk=function(u){this.push({data:r.utf8encode(u.data),meta:u.meta})},r.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,o,r){var t=e("./support"),s=e("./base64"),n=e("./nodejsUtils"),f=e("./external");function h(a){return a}function y(a,p){for(var d=0;d<a.length;++d)p[d]=255&a.charCodeAt(d);return p}e("setimmediate"),r.newBlob=function(a,p){r.checkSupport("blob");try{return new Blob([a],{type:p})}catch{try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return d.append(a),d.getBlob(p)}catch{throw new Error("Bug : can't construct the Blob.")}}};var b={stringifyByChunk:function(a,p,d){var w=[],C=0,I=a.length;if(I<=d)return String.fromCharCode.apply(null,a);for(;C<I;)p==="array"||p==="nodebuffer"?w.push(String.fromCharCode.apply(null,a.slice(C,Math.min(C+d,I)))):w.push(String.fromCharCode.apply(null,a.subarray(C,Math.min(C+d,I)))),C+=d;return w.join("")},stringifyByChar:function(a){for(var p="",d=0;d<a.length;d++)p+=String.fromCharCode(a[d]);return p},applyCanBeUsed:{uint8array:function(){try{return t.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return t.nodebuffer&&String.fromCharCode.apply(null,n.allocBuffer(1)).length===1}catch{return!1}}()}};function g(a){var p=65536,d=r.getTypeOf(a),w=!0;if(d==="uint8array"?w=b.applyCanBeUsed.uint8array:d==="nodebuffer"&&(w=b.applyCanBeUsed.nodebuffer),w)for(;1<p;)try{return b.stringifyByChunk(a,d,p)}catch{p=Math.floor(p/2)}return b.stringifyByChar(a)}function u(a,p){for(var d=0;d<a.length;d++)p[d]=a[d];return p}r.applyFromCharCode=g;var v={};v.string={string:h,array:function(a){return y(a,new Array(a.length))},arraybuffer:function(a){return v.string.uint8array(a).buffer},uint8array:function(a){return y(a,new Uint8Array(a.length))},nodebuffer:function(a){return y(a,n.allocBuffer(a.length))}},v.array={string:g,array:h,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return n.newBufferFrom(a)}},v.arraybuffer={string:function(a){return g(new Uint8Array(a))},array:function(a){return u(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:h,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return n.newBufferFrom(new Uint8Array(a))}},v.uint8array={string:g,array:function(a){return u(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:h,nodebuffer:function(a){return n.newBufferFrom(a)}},v.nodebuffer={string:g,array:function(a){return u(a,new Array(a.length))},arraybuffer:function(a){return v.nodebuffer.uint8array(a).buffer},uint8array:function(a){return u(a,new Uint8Array(a.length))},nodebuffer:h},r.transformTo=function(a,p){if(p=p||"",!a)return p;r.checkSupport(a);var d=r.getTypeOf(p);return v[d][a](p)},r.resolve=function(a){for(var p=a.split("/"),d=[],w=0;w<p.length;w++){var C=p[w];C==="."||C===""&&w!==0&&w!==p.length-1||(C===".."?d.pop():d.push(C))}return d.join("/")},r.getTypeOf=function(a){return typeof a=="string"?"string":Object.prototype.toString.call(a)==="[object Array]"?"array":t.nodebuffer&&n.isBuffer(a)?"nodebuffer":t.uint8array&&a instanceof Uint8Array?"uint8array":t.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(a){if(!t[a.toLowerCase()])throw new Error(a+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(a){var p,d,w="";for(d=0;d<(a||"").length;d++)w+="\\x"+((p=a.charCodeAt(d))<16?"0":"")+p.toString(16).toUpperCase();return w},r.delay=function(a,p,d){setImmediate(function(){a.apply(d||null,p||[])})},r.inherits=function(a,p){function d(){}d.prototype=p.prototype,a.prototype=new d},r.extend=function(){var a,p,d={};for(a=0;a<arguments.length;a++)for(p in arguments[a])Object.prototype.hasOwnProperty.call(arguments[a],p)&&d[p]===void 0&&(d[p]=arguments[a][p]);return d},r.prepareContent=function(a,p,d,w,C){return f.Promise.resolve(p).then(function(I){return t.blob&&(I instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(I))!==-1)&&typeof FileReader<"u"?new f.Promise(function(T,z){var O=new FileReader;O.onload=function(R){T(R.target.result)},O.onerror=function(R){z(R.target.error)},O.readAsArrayBuffer(I)}):I}).then(function(I){var T=r.getTypeOf(I);return T?(T==="arraybuffer"?I=r.transformTo("uint8array",I):T==="string"&&(C?I=s.decode(I):d&&w!==!0&&(I=function(z){return y(z,t.uint8array?new Uint8Array(z.length):new Array(z.length))}(I))),I):f.Promise.reject(new Error("Can't read the data of '"+a+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,o,r){var t=e("./reader/readerFor"),s=e("./utils"),n=e("./signature"),f=e("./zipEntry"),h=e("./support");function y(b){this.files=[],this.loadOptions=b}y.prototype={checkSignature:function(b){if(!this.reader.readAndCheckSignature(b)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(g)+", expected "+s.pretty(b)+")")}},isSignature:function(b,g){var u=this.reader.index;this.reader.setIndex(b);var v=this.reader.readString(4)===g;return this.reader.setIndex(u),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var b=this.reader.readData(this.zipCommentLength),g=h.uint8array?"uint8array":"array",u=s.transformTo(g,b);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var b,g,u,v=this.zip64EndOfCentralSize-44;0<v;)b=this.reader.readInt(2),g=this.reader.readInt(4),u=this.reader.readData(g),this.zip64ExtensibleData[b]={id:b,length:g,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var b,g;for(b=0;b<this.files.length;b++)g=this.files[b],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var b;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(b=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(b);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var b=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(b<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(b);var g=b;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(b=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(b),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var v=g-u;if(0<v)this.isSignature(g,n.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(b){this.reader=t(b)},load:function(b){this.prepareReader(b),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},o.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,o,r){var t=e("./reader/readerFor"),s=e("./utils"),n=e("./compressedObject"),f=e("./crc32"),h=e("./utf8"),y=e("./compressions"),b=e("./support");function g(u,v){this.options=u,this.loadOptions=v}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var v,a;if(u.skip(22),this.fileNameLength=u.readInt(2),a=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(a),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(p){for(var d in y)if(Object.prototype.hasOwnProperty.call(y,d)&&y[d].magic===p)return y[d];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,v,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var v=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(v),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=t(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var v,a,p,d=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<d;)v=u.readInt(2),a=u.readInt(2),p=u.readData(a),this.extraFields[v]={id:v,length:a,value:p};u.setIndex(d)},handleUTF8:function(){var u=b.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var a=s.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(a)}var p=this.findExtraFieldUnicodeComment();if(p!==null)this.fileCommentStr=p;else{var d=s.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(d)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var v=t(u.value);return v.readInt(1)!==1||f(this.fileName)!==v.readInt(4)?null:h.utf8decode(v.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var v=t(u.value);return v.readInt(1)!==1||f(this.fileComment)!==v.readInt(4)?null:h.utf8decode(v.readData(u.length-5))}return null}},o.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,o,r){function t(v,a,p){this.name=v,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=a,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}}var s=e("./stream/StreamHelper"),n=e("./stream/DataWorker"),f=e("./utf8"),h=e("./compressedObject"),y=e("./stream/GenericWorker");t.prototype={internalStream:function(v){var a=null,p="string";try{if(!v)throw new Error("No output type specified.");var d=(p=v.toLowerCase())==="string"||p==="text";p!=="binarystring"&&p!=="text"||(p="string"),a=this._decompressWorker();var w=!this._dataBinary;w&&!d&&(a=a.pipe(new f.Utf8EncodeWorker)),!w&&d&&(a=a.pipe(new f.Utf8DecodeWorker))}catch(C){(a=new y("error")).error(C)}return new s(a,p,"")},async:function(v,a){return this.internalStream(v).accumulate(a)},nodeStream:function(v,a){return this.internalStream(v||"nodebuffer").toNodejsStream(a)},_compressWorker:function(v,a){if(this._data instanceof h&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new f.Utf8EncodeWorker)),h.createWorkerFrom(p,v,a)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof y?this._data:new n(this._data)}};for(var b=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<b.length;u++)t.prototype[b[u]]=g;o.exports=t},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,o,r){(function(t){var s,n,f=t.MutationObserver||t.WebKitMutationObserver;if(f){var h=0,y=new f(v),b=t.document.createTextNode("");y.observe(b,{characterData:!0}),s=function(){b.data=h=++h%2}}else if(t.setImmediate||t.MessageChannel===void 0)s="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var a=t.document.createElement("script");a.onreadystatechange=function(){v(),a.onreadystatechange=null,a.parentNode.removeChild(a),a=null},t.document.documentElement.appendChild(a)}:function(){setTimeout(v,0)};else{var g=new t.MessageChannel;g.port1.onmessage=v,s=function(){g.port2.postMessage(0)}}var u=[];function v(){var a,p;n=!0;for(var d=u.length;d;){for(p=u,u=[],a=-1;++a<d;)p[a]();d=u.length}n=!1}o.exports=function(a){u.push(a)!==1||n||s()}}).call(this,typeof Vt<"u"?Vt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,o,r){var t=e("immediate");function s(){}var n={},f=["REJECTED"],h=["FULFILLED"],y=["PENDING"];function b(d){if(typeof d!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,d!==s&&a(this,d)}function g(d,w,C){this.promise=d,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function u(d,w,C){t(function(){var I;try{I=w(C)}catch(T){return n.reject(d,T)}I===d?n.reject(d,new TypeError("Cannot resolve promise with itself")):n.resolve(d,I)})}function v(d){var w=d&&d.then;if(d&&(typeof d=="object"||typeof d=="function")&&typeof w=="function")return function(){w.apply(d,arguments)}}function a(d,w){var C=!1;function I(O){C||(C=!0,n.reject(d,O))}function T(O){C||(C=!0,n.resolve(d,O))}var z=p(function(){w(T,I)});z.status==="error"&&I(z.value)}function p(d,w){var C={};try{C.value=d(w),C.status="success"}catch(I){C.status="error",C.value=I}return C}(o.exports=b).prototype.finally=function(d){if(typeof d!="function")return this;var w=this.constructor;return this.then(function(C){return w.resolve(d()).then(function(){return C})},function(C){return w.resolve(d()).then(function(){throw C})})},b.prototype.catch=function(d){return this.then(null,d)},b.prototype.then=function(d,w){if(typeof d!="function"&&this.state===h||typeof w!="function"&&this.state===f)return this;var C=new this.constructor(s);return this.state!==y?u(C,this.state===h?d:w,this.outcome):this.queue.push(new g(C,d,w)),C},g.prototype.callFulfilled=function(d){n.resolve(this.promise,d)},g.prototype.otherCallFulfilled=function(d){u(this.promise,this.onFulfilled,d)},g.prototype.callRejected=function(d){n.reject(this.promise,d)},g.prototype.otherCallRejected=function(d){u(this.promise,this.onRejected,d)},n.resolve=function(d,w){var C=p(v,w);if(C.status==="error")return n.reject(d,C.value);var I=C.value;if(I)a(d,I);else{d.state=h,d.outcome=w;for(var T=-1,z=d.queue.length;++T<z;)d.queue[T].callFulfilled(w)}return d},n.reject=function(d,w){d.state=f,d.outcome=w;for(var C=-1,I=d.queue.length;++C<I;)d.queue[C].callRejected(w);return d},b.resolve=function(d){return d instanceof this?d:n.resolve(new this(s),d)},b.reject=function(d){var w=new this(s);return n.reject(w,d)},b.all=function(d){var w=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=d.length,I=!1;if(!C)return this.resolve([]);for(var T=new Array(C),z=0,O=-1,R=new this(s);++O<C;)A(d[O],O);return R;function A(N,J){w.resolve(N).then(function(S){T[J]=S,++z!==C||I||(I=!0,n.resolve(R,T))},function(S){I||(I=!0,n.reject(R,S))})}},b.race=function(d){var w=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=d.length,I=!1;if(!C)return this.resolve([]);for(var T=-1,z=new this(s);++T<C;)O=d[T],w.resolve(O).then(function(R){I||(I=!0,n.resolve(z,R))},function(R){I||(I=!0,n.reject(z,R))});var O;return z}},{immediate:36}],38:[function(e,o,r){var t={};(0,e("./lib/utils/common").assign)(t,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),o.exports=t},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,o,r){var t=e("./zlib/deflate"),s=e("./utils/common"),n=e("./utils/strings"),f=e("./zlib/messages"),h=e("./zlib/zstream"),y=Object.prototype.toString,b=0,g=-1,u=0,v=8;function a(d){if(!(this instanceof a))return new a(d);this.options=s.assign({level:g,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},d||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var C=t.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(C!==b)throw new Error(f[C]);if(w.header&&t.deflateSetHeader(this.strm,w.header),w.dictionary){var I;if(I=typeof w.dictionary=="string"?n.string2buf(w.dictionary):y.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(C=t.deflateSetDictionary(this.strm,I))!==b)throw new Error(f[C]);this._dict_set=!0}}function p(d,w){var C=new a(w);if(C.push(d,!0),C.err)throw C.msg||f[C.err];return C.result}a.prototype.push=function(d,w){var C,I,T=this.strm,z=this.options.chunkSize;if(this.ended)return!1;I=w===~~w?w:w===!0?4:0,typeof d=="string"?T.input=n.string2buf(d):y.call(d)==="[object ArrayBuffer]"?T.input=new Uint8Array(d):T.input=d,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new s.Buf8(z),T.next_out=0,T.avail_out=z),(C=t.deflate(T,I))!==1&&C!==b)return this.onEnd(C),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||I!==4&&I!==2)||(this.options.to==="string"?this.onData(n.buf2binstring(s.shrinkBuf(T.output,T.next_out))):this.onData(s.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&C!==1);return I===4?(C=t.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===b):I!==2||(this.onEnd(b),!(T.avail_out=0))},a.prototype.onData=function(d){this.chunks.push(d)},a.prototype.onEnd=function(d){d===b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},r.Deflate=a,r.deflate=p,r.deflateRaw=function(d,w){return(w=w||{}).raw=!0,p(d,w)},r.gzip=function(d,w){return(w=w||{}).gzip=!0,p(d,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,o,r){var t=e("./zlib/inflate"),s=e("./utils/common"),n=e("./utils/strings"),f=e("./zlib/constants"),h=e("./zlib/messages"),y=e("./zlib/zstream"),b=e("./zlib/gzheader"),g=Object.prototype.toString;function u(a){if(!(this instanceof u))return new u(a);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},a||{});var p=this.options;p.raw&&0<=p.windowBits&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),!(0<=p.windowBits&&p.windowBits<16)||a&&a.windowBits||(p.windowBits+=32),15<p.windowBits&&p.windowBits<48&&!(15&p.windowBits)&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var d=t.inflateInit2(this.strm,p.windowBits);if(d!==f.Z_OK)throw new Error(h[d]);this.header=new b,t.inflateGetHeader(this.strm,this.header)}function v(a,p){var d=new u(p);if(d.push(a,!0),d.err)throw d.msg||h[d.err];return d.result}u.prototype.push=function(a,p){var d,w,C,I,T,z,O=this.strm,R=this.options.chunkSize,A=this.options.dictionary,N=!1;if(this.ended)return!1;w=p===~~p?p:p===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof a=="string"?O.input=n.binstring2buf(a):g.call(a)==="[object ArrayBuffer]"?O.input=new Uint8Array(a):O.input=a,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new s.Buf8(R),O.next_out=0,O.avail_out=R),(d=t.inflate(O,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&A&&(z=typeof A=="string"?n.string2buf(A):g.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,d=t.inflateSetDictionary(this.strm,z)),d===f.Z_BUF_ERROR&&N===!0&&(d=f.Z_OK,N=!1),d!==f.Z_STREAM_END&&d!==f.Z_OK)return this.onEnd(d),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&d!==f.Z_STREAM_END&&(O.avail_in!==0||w!==f.Z_FINISH&&w!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=n.utf8border(O.output,O.next_out),I=O.next_out-C,T=n.buf2string(O.output,C),O.next_out=I,O.avail_out=R-I,I&&s.arraySet(O.output,O.output,C,I,0),this.onData(T)):this.onData(s.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(N=!0)}while((0<O.avail_in||O.avail_out===0)&&d!==f.Z_STREAM_END);return d===f.Z_STREAM_END&&(w=f.Z_FINISH),w===f.Z_FINISH?(d=t.inflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===f.Z_OK):w!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(O.avail_out=0))},u.prototype.onData=function(a){this.chunks.push(a)},u.prototype.onEnd=function(a){a===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},r.Inflate=u,r.inflate=v,r.inflateRaw=function(a,p){return(p=p||{}).raw=!0,v(a,p)},r.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,o,r){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(f){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var y=h.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var b in y)y.hasOwnProperty(b)&&(f[b]=y[b])}}return f},r.shrinkBuf=function(f,h){return f.length===h?f:f.subarray?f.subarray(0,h):(f.length=h,f)};var s={arraySet:function(f,h,y,b,g){if(h.subarray&&f.subarray)f.set(h.subarray(y,y+b),g);else for(var u=0;u<b;u++)f[g+u]=h[y+u]},flattenChunks:function(f){var h,y,b,g,u,v;for(h=b=0,y=f.length;h<y;h++)b+=f[h].length;for(v=new Uint8Array(b),h=g=0,y=f.length;h<y;h++)u=f[h],v.set(u,g),g+=u.length;return v}},n={arraySet:function(f,h,y,b,g){for(var u=0;u<b;u++)f[g+u]=h[y+u]},flattenChunks:function(f){return[].concat.apply([],f)}};r.setTyped=function(f){f?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,s)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,n))},r.setTyped(t)},{}],42:[function(e,o,r){var t=e("./common"),s=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var f=new t.Buf8(256),h=0;h<256;h++)f[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function y(b,g){if(g<65537&&(b.subarray&&n||!b.subarray&&s))return String.fromCharCode.apply(null,t.shrinkBuf(b,g));for(var u="",v=0;v<g;v++)u+=String.fromCharCode(b[v]);return u}f[254]=f[254]=1,r.string2buf=function(b){var g,u,v,a,p,d=b.length,w=0;for(a=0;a<d;a++)(64512&(u=b.charCodeAt(a)))==55296&&a+1<d&&(64512&(v=b.charCodeAt(a+1)))==56320&&(u=65536+(u-55296<<10)+(v-56320),a++),w+=u<128?1:u<2048?2:u<65536?3:4;for(g=new t.Buf8(w),a=p=0;p<w;a++)(64512&(u=b.charCodeAt(a)))==55296&&a+1<d&&(64512&(v=b.charCodeAt(a+1)))==56320&&(u=65536+(u-55296<<10)+(v-56320),a++),u<128?g[p++]=u:(u<2048?g[p++]=192|u>>>6:(u<65536?g[p++]=224|u>>>12:(g[p++]=240|u>>>18,g[p++]=128|u>>>12&63),g[p++]=128|u>>>6&63),g[p++]=128|63&u);return g},r.buf2binstring=function(b){return y(b,b.length)},r.binstring2buf=function(b){for(var g=new t.Buf8(b.length),u=0,v=g.length;u<v;u++)g[u]=b.charCodeAt(u);return g},r.buf2string=function(b,g){var u,v,a,p,d=g||b.length,w=new Array(2*d);for(u=v=0;u<d;)if((a=b[u++])<128)w[v++]=a;else if(4<(p=f[a]))w[v++]=65533,u+=p-1;else{for(a&=p===2?31:p===3?15:7;1<p&&u<d;)a=a<<6|63&b[u++],p--;1<p?w[v++]=65533:a<65536?w[v++]=a:(a-=65536,w[v++]=55296|a>>10&1023,w[v++]=56320|1023&a)}return y(w,v)},r.utf8border=function(b,g){var u;for((g=g||b.length)>b.length&&(g=b.length),u=g-1;0<=u&&(192&b[u])==128;)u--;return u<0||u===0?g:u+f[b[u]]>g?u:g}},{"./common":41}],43:[function(e,o,r){o.exports=function(t,s,n,f){for(var h=65535&t|0,y=t>>>16&65535|0,b=0;n!==0;){for(n-=b=2e3<n?2e3:n;y=y+(h=h+s[f++]|0)|0,--b;);h%=65521,y%=65521}return h|y<<16|0}},{}],44:[function(e,o,r){o.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,o,r){var t=function(){for(var s,n=[],f=0;f<256;f++){s=f;for(var h=0;h<8;h++)s=1&s?3988292384^s>>>1:s>>>1;n[f]=s}return n}();o.exports=function(s,n,f,h){var y=t,b=h+f;s^=-1;for(var g=h;g<b;g++)s=s>>>8^y[255&(s^n[g])];return-1^s}},{}],46:[function(e,o,r){var t,s=e("../utils/common"),n=e("./trees"),f=e("./adler32"),h=e("./crc32"),y=e("./messages"),b=0,g=4,u=0,v=-2,a=-1,p=4,d=2,w=8,C=9,I=286,T=30,z=19,O=2*I+1,R=15,A=3,N=258,J=N+A+1,S=42,U=113,c=1,V=2,nt=3,q=4;function et(i,G){return i.msg=y[G],G}function D(i){return(i<<1)-(4<i?9:0)}function $(i){for(var G=i.length;0<=--G;)i[G]=0}function x(i){var G=i.state,W=G.pending;W>i.avail_out&&(W=i.avail_out),W!==0&&(s.arraySet(i.output,G.pending_buf,G.pending_out,W,i.next_out),i.next_out+=W,G.pending_out+=W,i.total_out+=W,i.avail_out-=W,G.pending-=W,G.pending===0&&(G.pending_out=0))}function L(i,G){n._tr_flush_block(i,0<=i.block_start?i.block_start:-1,i.strstart-i.block_start,G),i.block_start=i.strstart,x(i.strm)}function ot(i,G){i.pending_buf[i.pending++]=G}function rt(i,G){i.pending_buf[i.pending++]=G>>>8&255,i.pending_buf[i.pending++]=255&G}function X(i,G){var W,k,m=i.max_chain_length,B=i.strstart,K=i.prev_length,Y=i.nice_match,F=i.strstart>i.w_size-J?i.strstart-(i.w_size-J):0,tt=i.window,lt=i.w_mask,Q=i.prev,ut=i.strstart+N,wt=tt[B+K-1],vt=tt[B+K];i.prev_length>=i.good_match&&(m>>=2),Y>i.lookahead&&(Y=i.lookahead);do if(tt[(W=G)+K]===vt&&tt[W+K-1]===wt&&tt[W]===tt[B]&&tt[++W]===tt[B+1]){B+=2,W++;do;while(tt[++B]===tt[++W]&&tt[++B]===tt[++W]&&tt[++B]===tt[++W]&&tt[++B]===tt[++W]&&tt[++B]===tt[++W]&&tt[++B]===tt[++W]&&tt[++B]===tt[++W]&&tt[++B]===tt[++W]&&B<ut);if(k=N-(ut-B),B=ut-N,K<k){if(i.match_start=G,Y<=(K=k))break;wt=tt[B+K-1],vt=tt[B+K]}}while((G=Q[G&lt])>F&&--m!=0);return K<=i.lookahead?K:i.lookahead}function gt(i){var G,W,k,m,B,K,Y,F,tt,lt,Q=i.w_size;do{if(m=i.window_size-i.lookahead-i.strstart,i.strstart>=Q+(Q-J)){for(s.arraySet(i.window,i.window,Q,Q,0),i.match_start-=Q,i.strstart-=Q,i.block_start-=Q,G=W=i.hash_size;k=i.head[--G],i.head[G]=Q<=k?k-Q:0,--W;);for(G=W=Q;k=i.prev[--G],i.prev[G]=Q<=k?k-Q:0,--W;);m+=Q}if(i.strm.avail_in===0)break;if(K=i.strm,Y=i.window,F=i.strstart+i.lookahead,tt=m,lt=void 0,lt=K.avail_in,tt<lt&&(lt=tt),W=lt===0?0:(K.avail_in-=lt,s.arraySet(Y,K.input,K.next_in,lt,F),K.state.wrap===1?K.adler=f(K.adler,Y,lt,F):K.state.wrap===2&&(K.adler=h(K.adler,Y,lt,F)),K.next_in+=lt,K.total_in+=lt,lt),i.lookahead+=W,i.lookahead+i.insert>=A)for(B=i.strstart-i.insert,i.ins_h=i.window[B],i.ins_h=(i.ins_h<<i.hash_shift^i.window[B+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[B+A-1])&i.hash_mask,i.prev[B&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=B,B++,i.insert--,!(i.lookahead+i.insert<A)););}while(i.lookahead<J&&i.strm.avail_in!==0)}function pt(i,G){for(var W,k;;){if(i.lookahead<J){if(gt(i),i.lookahead<J&&G===b)return c;if(i.lookahead===0)break}if(W=0,i.lookahead>=A&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+A-1])&i.hash_mask,W=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),W!==0&&i.strstart-W<=i.w_size-J&&(i.match_length=X(i,W)),i.match_length>=A)if(k=n._tr_tally(i,i.strstart-i.match_start,i.match_length-A),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=A){for(i.match_length--;i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+A-1])&i.hash_mask,W=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart,--i.match_length!=0;);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else k=n._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(k&&(L(i,!1),i.strm.avail_out===0))return c}return i.insert=i.strstart<A-1?i.strstart:A-1,G===g?(L(i,!0),i.strm.avail_out===0?nt:q):i.last_lit&&(L(i,!1),i.strm.avail_out===0)?c:V}function at(i,G){for(var W,k,m;;){if(i.lookahead<J){if(gt(i),i.lookahead<J&&G===b)return c;if(i.lookahead===0)break}if(W=0,i.lookahead>=A&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+A-1])&i.hash_mask,W=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=A-1,W!==0&&i.prev_length<i.max_lazy_match&&i.strstart-W<=i.w_size-J&&(i.match_length=X(i,W),i.match_length<=5&&(i.strategy===1||i.match_length===A&&4096<i.strstart-i.match_start)&&(i.match_length=A-1)),i.prev_length>=A&&i.match_length<=i.prev_length){for(m=i.strstart+i.lookahead-A,k=n._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-A),i.lookahead-=i.prev_length-1,i.prev_length-=2;++i.strstart<=m&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+A-1])&i.hash_mask,W=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),--i.prev_length!=0;);if(i.match_available=0,i.match_length=A-1,i.strstart++,k&&(L(i,!1),i.strm.avail_out===0))return c}else if(i.match_available){if((k=n._tr_tally(i,0,i.window[i.strstart-1]))&&L(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return c}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(k=n._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<A-1?i.strstart:A-1,G===g?(L(i,!0),i.strm.avail_out===0?nt:q):i.last_lit&&(L(i,!1),i.strm.avail_out===0)?c:V}function dt(i,G,W,k,m){this.good_length=i,this.max_lazy=G,this.nice_length=W,this.max_chain=k,this.func=m}function ht(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*O),this.dyn_dtree=new s.Buf16(2*(2*T+1)),this.bl_tree=new s.Buf16(2*(2*z+1)),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(R+1),this.heap=new s.Buf16(2*I+1),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*I+1),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function mt(i){var G;return i&&i.state?(i.total_in=i.total_out=0,i.data_type=d,(G=i.state).pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?S:U,i.adler=G.wrap===2?0:1,G.last_flush=b,n._tr_init(G),u):et(i,v)}function bt(i){var G=mt(i);return G===u&&function(W){W.window_size=2*W.w_size,$(W.head),W.max_lazy_match=t[W.level].max_lazy,W.good_match=t[W.level].good_length,W.nice_match=t[W.level].nice_length,W.max_chain_length=t[W.level].max_chain,W.strstart=0,W.block_start=0,W.lookahead=0,W.insert=0,W.match_length=W.prev_length=A-1,W.match_available=0,W.ins_h=0}(i.state),G}function yt(i,G,W,k,m,B){if(!i)return v;var K=1;if(G===a&&(G=6),k<0?(K=0,k=-k):15<k&&(K=2,k-=16),m<1||C<m||W!==w||k<8||15<k||G<0||9<G||B<0||p<B)return et(i,v);k===8&&(k=9);var Y=new ht;return(i.state=Y).strm=i,Y.wrap=K,Y.gzhead=null,Y.w_bits=k,Y.w_size=1<<Y.w_bits,Y.w_mask=Y.w_size-1,Y.hash_bits=m+7,Y.hash_size=1<<Y.hash_bits,Y.hash_mask=Y.hash_size-1,Y.hash_shift=~~((Y.hash_bits+A-1)/A),Y.window=new s.Buf8(2*Y.w_size),Y.head=new s.Buf16(Y.hash_size),Y.prev=new s.Buf16(Y.w_size),Y.lit_bufsize=1<<m+6,Y.pending_buf_size=4*Y.lit_bufsize,Y.pending_buf=new s.Buf8(Y.pending_buf_size),Y.d_buf=1*Y.lit_bufsize,Y.l_buf=3*Y.lit_bufsize,Y.level=G,Y.strategy=B,Y.method=W,bt(i)}t=[new dt(0,0,0,0,function(i,G){var W=65535;for(W>i.pending_buf_size-5&&(W=i.pending_buf_size-5);;){if(i.lookahead<=1){if(gt(i),i.lookahead===0&&G===b)return c;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;var k=i.block_start+W;if((i.strstart===0||i.strstart>=k)&&(i.lookahead=i.strstart-k,i.strstart=k,L(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-J&&(L(i,!1),i.strm.avail_out===0))return c}return i.insert=0,G===g?(L(i,!0),i.strm.avail_out===0?nt:q):(i.strstart>i.block_start&&(L(i,!1),i.strm.avail_out),c)}),new dt(4,4,8,4,pt),new dt(4,5,16,8,pt),new dt(4,6,32,32,pt),new dt(4,4,16,16,at),new dt(8,16,32,32,at),new dt(8,16,128,128,at),new dt(8,32,128,256,at),new dt(32,128,258,1024,at),new dt(32,258,258,4096,at)],r.deflateInit=function(i,G){return yt(i,G,w,15,8,0)},r.deflateInit2=yt,r.deflateReset=bt,r.deflateResetKeep=mt,r.deflateSetHeader=function(i,G){return i&&i.state?i.state.wrap!==2?v:(i.state.gzhead=G,u):v},r.deflate=function(i,G){var W,k,m,B;if(!i||!i.state||5<G||G<0)return i?et(i,v):v;if(k=i.state,!i.output||!i.input&&i.avail_in!==0||k.status===666&&G!==g)return et(i,i.avail_out===0?-5:v);if(k.strm=i,W=k.last_flush,k.last_flush=G,k.status===S)if(k.wrap===2)i.adler=0,ot(k,31),ot(k,139),ot(k,8),k.gzhead?(ot(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),ot(k,255&k.gzhead.time),ot(k,k.gzhead.time>>8&255),ot(k,k.gzhead.time>>16&255),ot(k,k.gzhead.time>>24&255),ot(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),ot(k,255&k.gzhead.os),k.gzhead.extra&&k.gzhead.extra.length&&(ot(k,255&k.gzhead.extra.length),ot(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(i.adler=h(i.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=69):(ot(k,0),ot(k,0),ot(k,0),ot(k,0),ot(k,0),ot(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),ot(k,3),k.status=U);else{var K=w+(k.w_bits-8<<4)<<8;K|=(2<=k.strategy||k.level<2?0:k.level<6?1:k.level===6?2:3)<<6,k.strstart!==0&&(K|=32),K+=31-K%31,k.status=U,rt(k,K),k.strstart!==0&&(rt(k,i.adler>>>16),rt(k,65535&i.adler)),i.adler=1}if(k.status===69)if(k.gzhead.extra){for(m=k.pending;k.gzindex<(65535&k.gzhead.extra.length)&&(k.pending!==k.pending_buf_size||(k.gzhead.hcrc&&k.pending>m&&(i.adler=h(i.adler,k.pending_buf,k.pending-m,m)),x(i),m=k.pending,k.pending!==k.pending_buf_size));)ot(k,255&k.gzhead.extra[k.gzindex]),k.gzindex++;k.gzhead.hcrc&&k.pending>m&&(i.adler=h(i.adler,k.pending_buf,k.pending-m,m)),k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=73)}else k.status=73;if(k.status===73)if(k.gzhead.name){m=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>m&&(i.adler=h(i.adler,k.pending_buf,k.pending-m,m)),x(i),m=k.pending,k.pending===k.pending_buf_size)){B=1;break}B=k.gzindex<k.gzhead.name.length?255&k.gzhead.name.charCodeAt(k.gzindex++):0,ot(k,B)}while(B!==0);k.gzhead.hcrc&&k.pending>m&&(i.adler=h(i.adler,k.pending_buf,k.pending-m,m)),B===0&&(k.gzindex=0,k.status=91)}else k.status=91;if(k.status===91)if(k.gzhead.comment){m=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>m&&(i.adler=h(i.adler,k.pending_buf,k.pending-m,m)),x(i),m=k.pending,k.pending===k.pending_buf_size)){B=1;break}B=k.gzindex<k.gzhead.comment.length?255&k.gzhead.comment.charCodeAt(k.gzindex++):0,ot(k,B)}while(B!==0);k.gzhead.hcrc&&k.pending>m&&(i.adler=h(i.adler,k.pending_buf,k.pending-m,m)),B===0&&(k.status=103)}else k.status=103;if(k.status===103&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&x(i),k.pending+2<=k.pending_buf_size&&(ot(k,255&i.adler),ot(k,i.adler>>8&255),i.adler=0,k.status=U)):k.status=U),k.pending!==0){if(x(i),i.avail_out===0)return k.last_flush=-1,u}else if(i.avail_in===0&&D(G)<=D(W)&&G!==g)return et(i,-5);if(k.status===666&&i.avail_in!==0)return et(i,-5);if(i.avail_in!==0||k.lookahead!==0||G!==b&&k.status!==666){var Y=k.strategy===2?function(F,tt){for(var lt;;){if(F.lookahead===0&&(gt(F),F.lookahead===0)){if(tt===b)return c;break}if(F.match_length=0,lt=n._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++,lt&&(L(F,!1),F.strm.avail_out===0))return c}return F.insert=0,tt===g?(L(F,!0),F.strm.avail_out===0?nt:q):F.last_lit&&(L(F,!1),F.strm.avail_out===0)?c:V}(k,G):k.strategy===3?function(F,tt){for(var lt,Q,ut,wt,vt=F.window;;){if(F.lookahead<=N){if(gt(F),F.lookahead<=N&&tt===b)return c;if(F.lookahead===0)break}if(F.match_length=0,F.lookahead>=A&&0<F.strstart&&(Q=vt[ut=F.strstart-1])===vt[++ut]&&Q===vt[++ut]&&Q===vt[++ut]){wt=F.strstart+N;do;while(Q===vt[++ut]&&Q===vt[++ut]&&Q===vt[++ut]&&Q===vt[++ut]&&Q===vt[++ut]&&Q===vt[++ut]&&Q===vt[++ut]&&Q===vt[++ut]&&ut<wt);F.match_length=N-(wt-ut),F.match_length>F.lookahead&&(F.match_length=F.lookahead)}if(F.match_length>=A?(lt=n._tr_tally(F,1,F.match_length-A),F.lookahead-=F.match_length,F.strstart+=F.match_length,F.match_length=0):(lt=n._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++),lt&&(L(F,!1),F.strm.avail_out===0))return c}return F.insert=0,tt===g?(L(F,!0),F.strm.avail_out===0?nt:q):F.last_lit&&(L(F,!1),F.strm.avail_out===0)?c:V}(k,G):t[k.level].func(k,G);if(Y!==nt&&Y!==q||(k.status=666),Y===c||Y===nt)return i.avail_out===0&&(k.last_flush=-1),u;if(Y===V&&(G===1?n._tr_align(k):G!==5&&(n._tr_stored_block(k,0,0,!1),G===3&&($(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0))),x(i),i.avail_out===0))return k.last_flush=-1,u}return G!==g?u:k.wrap<=0?1:(k.wrap===2?(ot(k,255&i.adler),ot(k,i.adler>>8&255),ot(k,i.adler>>16&255),ot(k,i.adler>>24&255),ot(k,255&i.total_in),ot(k,i.total_in>>8&255),ot(k,i.total_in>>16&255),ot(k,i.total_in>>24&255)):(rt(k,i.adler>>>16),rt(k,65535&i.adler)),x(i),0<k.wrap&&(k.wrap=-k.wrap),k.pending!==0?u:1)},r.deflateEnd=function(i){var G;return i&&i.state?(G=i.state.status)!==S&&G!==69&&G!==73&&G!==91&&G!==103&&G!==U&&G!==666?et(i,v):(i.state=null,G===U?et(i,-3):u):v},r.deflateSetDictionary=function(i,G){var W,k,m,B,K,Y,F,tt,lt=G.length;if(!i||!i.state||(B=(W=i.state).wrap)===2||B===1&&W.status!==S||W.lookahead)return v;for(B===1&&(i.adler=f(i.adler,G,lt,0)),W.wrap=0,lt>=W.w_size&&(B===0&&($(W.head),W.strstart=0,W.block_start=0,W.insert=0),tt=new s.Buf8(W.w_size),s.arraySet(tt,G,lt-W.w_size,W.w_size,0),G=tt,lt=W.w_size),K=i.avail_in,Y=i.next_in,F=i.input,i.avail_in=lt,i.next_in=0,i.input=G,gt(W);W.lookahead>=A;){for(k=W.strstart,m=W.lookahead-(A-1);W.ins_h=(W.ins_h<<W.hash_shift^W.window[k+A-1])&W.hash_mask,W.prev[k&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=k,k++,--m;);W.strstart=k,W.lookahead=A-1,gt(W)}return W.strstart+=W.lookahead,W.block_start=W.strstart,W.insert=W.lookahead,W.lookahead=0,W.match_length=W.prev_length=A-1,W.match_available=0,i.next_in=Y,i.input=F,i.avail_in=K,W.wrap=B,u},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,o,r){o.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,o,r){o.exports=function(t,s){var n,f,h,y,b,g,u,v,a,p,d,w,C,I,T,z,O,R,A,N,J,S,U,c,V;n=t.state,f=t.next_in,c=t.input,h=f+(t.avail_in-5),y=t.next_out,V=t.output,b=y-(s-t.avail_out),g=y+(t.avail_out-257),u=n.dmax,v=n.wsize,a=n.whave,p=n.wnext,d=n.window,w=n.hold,C=n.bits,I=n.lencode,T=n.distcode,z=(1<<n.lenbits)-1,O=(1<<n.distbits)-1;t:do{C<15&&(w+=c[f++]<<C,C+=8,w+=c[f++]<<C,C+=8),R=I[w&z];e:for(;;){if(w>>>=A=R>>>24,C-=A,(A=R>>>16&255)===0)V[y++]=65535&R;else{if(!(16&A)){if(!(64&A)){R=I[(65535&R)+(w&(1<<A)-1)];continue e}if(32&A){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}N=65535&R,(A&=15)&&(C<A&&(w+=c[f++]<<C,C+=8),N+=w&(1<<A)-1,w>>>=A,C-=A),C<15&&(w+=c[f++]<<C,C+=8,w+=c[f++]<<C,C+=8),R=T[w&O];r:for(;;){if(w>>>=A=R>>>24,C-=A,!(16&(A=R>>>16&255))){if(!(64&A)){R=T[(65535&R)+(w&(1<<A)-1)];continue r}t.msg="invalid distance code",n.mode=30;break t}if(J=65535&R,C<(A&=15)&&(w+=c[f++]<<C,(C+=8)<A&&(w+=c[f++]<<C,C+=8)),u<(J+=w&(1<<A)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(w>>>=A,C-=A,(A=y-b)<J){if(a<(A=J-A)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(U=d,(S=0)===p){if(S+=v-A,A<N){for(N-=A;V[y++]=d[S++],--A;);S=y-J,U=V}}else if(p<A){if(S+=v+p-A,(A-=p)<N){for(N-=A;V[y++]=d[S++],--A;);if(S=0,p<N){for(N-=A=p;V[y++]=d[S++],--A;);S=y-J,U=V}}}else if(S+=p-A,A<N){for(N-=A;V[y++]=d[S++],--A;);S=y-J,U=V}for(;2<N;)V[y++]=U[S++],V[y++]=U[S++],V[y++]=U[S++],N-=3;N&&(V[y++]=U[S++],1<N&&(V[y++]=U[S++]))}else{for(S=y-J;V[y++]=V[S++],V[y++]=V[S++],V[y++]=V[S++],2<(N-=3););N&&(V[y++]=V[S++],1<N&&(V[y++]=V[S++]))}break}}break}}while(f<h&&y<g);f-=N=C>>3,w&=(1<<(C-=N<<3))-1,t.next_in=f,t.next_out=y,t.avail_in=f<h?h-f+5:5-(f-h),t.avail_out=y<g?g-y+257:257-(y-g),n.hold=w,n.bits=C}},{}],49:[function(e,o,r){var t=e("../utils/common"),s=e("./adler32"),n=e("./crc32"),f=e("./inffast"),h=e("./inftrees"),y=1,b=2,g=0,u=-2,v=1,a=852,p=592;function d(S){return(S>>>24&255)+(S>>>8&65280)+((65280&S)<<8)+((255&S)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new t.Buf16(320),this.work=new t.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(S){var U;return S&&S.state?(U=S.state,S.total_in=S.total_out=U.total=0,S.msg="",U.wrap&&(S.adler=1&U.wrap),U.mode=v,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new t.Buf32(a),U.distcode=U.distdyn=new t.Buf32(p),U.sane=1,U.back=-1,g):u}function I(S){var U;return S&&S.state?((U=S.state).wsize=0,U.whave=0,U.wnext=0,C(S)):u}function T(S,U){var c,V;return S&&S.state?(V=S.state,U<0?(c=0,U=-U):(c=1+(U>>4),U<48&&(U&=15)),U&&(U<8||15<U)?u:(V.window!==null&&V.wbits!==U&&(V.window=null),V.wrap=c,V.wbits=U,I(S))):u}function z(S,U){var c,V;return S?(V=new w,(S.state=V).window=null,(c=T(S,U))!==g&&(S.state=null),c):u}var O,R,A=!0;function N(S){if(A){var U;for(O=new t.Buf32(512),R=new t.Buf32(32),U=0;U<144;)S.lens[U++]=8;for(;U<256;)S.lens[U++]=9;for(;U<280;)S.lens[U++]=7;for(;U<288;)S.lens[U++]=8;for(h(y,S.lens,0,288,O,0,S.work,{bits:9}),U=0;U<32;)S.lens[U++]=5;h(b,S.lens,0,32,R,0,S.work,{bits:5}),A=!1}S.lencode=O,S.lenbits=9,S.distcode=R,S.distbits=5}function J(S,U,c,V){var nt,q=S.state;return q.window===null&&(q.wsize=1<<q.wbits,q.wnext=0,q.whave=0,q.window=new t.Buf8(q.wsize)),V>=q.wsize?(t.arraySet(q.window,U,c-q.wsize,q.wsize,0),q.wnext=0,q.whave=q.wsize):(V<(nt=q.wsize-q.wnext)&&(nt=V),t.arraySet(q.window,U,c-V,nt,q.wnext),(V-=nt)?(t.arraySet(q.window,U,c-V,V,0),q.wnext=V,q.whave=q.wsize):(q.wnext+=nt,q.wnext===q.wsize&&(q.wnext=0),q.whave<q.wsize&&(q.whave+=nt))),0}r.inflateReset=I,r.inflateReset2=T,r.inflateResetKeep=C,r.inflateInit=function(S){return z(S,15)},r.inflateInit2=z,r.inflate=function(S,U){var c,V,nt,q,et,D,$,x,L,ot,rt,X,gt,pt,at,dt,ht,mt,bt,yt,i,G,W,k,m=0,B=new t.Buf8(4),K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!S||!S.state||!S.output||!S.input&&S.avail_in!==0)return u;(c=S.state).mode===12&&(c.mode=13),et=S.next_out,nt=S.output,$=S.avail_out,q=S.next_in,V=S.input,D=S.avail_in,x=c.hold,L=c.bits,ot=D,rt=$,G=g;t:for(;;)switch(c.mode){case v:if(c.wrap===0){c.mode=13;break}for(;L<16;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}if(2&c.wrap&&x===35615){B[c.check=0]=255&x,B[1]=x>>>8&255,c.check=n(c.check,B,2,0),L=x=0,c.mode=2;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&x)<<8)+(x>>8))%31){S.msg="incorrect header check",c.mode=30;break}if((15&x)!=8){S.msg="unknown compression method",c.mode=30;break}if(L-=4,i=8+(15&(x>>>=4)),c.wbits===0)c.wbits=i;else if(i>c.wbits){S.msg="invalid window size",c.mode=30;break}c.dmax=1<<i,S.adler=c.check=1,c.mode=512&x?10:12,L=x=0;break;case 2:for(;L<16;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}if(c.flags=x,(255&c.flags)!=8){S.msg="unknown compression method",c.mode=30;break}if(57344&c.flags){S.msg="unknown header flags set",c.mode=30;break}c.head&&(c.head.text=x>>8&1),512&c.flags&&(B[0]=255&x,B[1]=x>>>8&255,c.check=n(c.check,B,2,0)),L=x=0,c.mode=3;case 3:for(;L<32;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}c.head&&(c.head.time=x),512&c.flags&&(B[0]=255&x,B[1]=x>>>8&255,B[2]=x>>>16&255,B[3]=x>>>24&255,c.check=n(c.check,B,4,0)),L=x=0,c.mode=4;case 4:for(;L<16;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}c.head&&(c.head.xflags=255&x,c.head.os=x>>8),512&c.flags&&(B[0]=255&x,B[1]=x>>>8&255,c.check=n(c.check,B,2,0)),L=x=0,c.mode=5;case 5:if(1024&c.flags){for(;L<16;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}c.length=x,c.head&&(c.head.extra_len=x),512&c.flags&&(B[0]=255&x,B[1]=x>>>8&255,c.check=n(c.check,B,2,0)),L=x=0}else c.head&&(c.head.extra=null);c.mode=6;case 6:if(1024&c.flags&&(D<(X=c.length)&&(X=D),X&&(c.head&&(i=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),t.arraySet(c.head.extra,V,q,X,i)),512&c.flags&&(c.check=n(c.check,V,X,q)),D-=X,q+=X,c.length-=X),c.length))break t;c.length=0,c.mode=7;case 7:if(2048&c.flags){if(D===0)break t;for(X=0;i=V[q+X++],c.head&&i&&c.length<65536&&(c.head.name+=String.fromCharCode(i)),i&&X<D;);if(512&c.flags&&(c.check=n(c.check,V,X,q)),D-=X,q+=X,i)break t}else c.head&&(c.head.name=null);c.length=0,c.mode=8;case 8:if(4096&c.flags){if(D===0)break t;for(X=0;i=V[q+X++],c.head&&i&&c.length<65536&&(c.head.comment+=String.fromCharCode(i)),i&&X<D;);if(512&c.flags&&(c.check=n(c.check,V,X,q)),D-=X,q+=X,i)break t}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(512&c.flags){for(;L<16;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}if(x!==(65535&c.check)){S.msg="header crc mismatch",c.mode=30;break}L=x=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),S.adler=c.check=0,c.mode=12;break;case 10:for(;L<32;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}S.adler=c.check=d(x),L=x=0,c.mode=11;case 11:if(c.havedict===0)return S.next_out=et,S.avail_out=$,S.next_in=q,S.avail_in=D,c.hold=x,c.bits=L,2;S.adler=c.check=1,c.mode=12;case 12:if(U===5||U===6)break t;case 13:if(c.last){x>>>=7&L,L-=7&L,c.mode=27;break}for(;L<3;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}switch(c.last=1&x,L-=1,3&(x>>>=1)){case 0:c.mode=14;break;case 1:if(N(c),c.mode=20,U!==6)break;x>>>=2,L-=2;break t;case 2:c.mode=17;break;case 3:S.msg="invalid block type",c.mode=30}x>>>=2,L-=2;break;case 14:for(x>>>=7&L,L-=7&L;L<32;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}if((65535&x)!=(x>>>16^65535)){S.msg="invalid stored block lengths",c.mode=30;break}if(c.length=65535&x,L=x=0,c.mode=15,U===6)break t;case 15:c.mode=16;case 16:if(X=c.length){if(D<X&&(X=D),$<X&&(X=$),X===0)break t;t.arraySet(nt,V,q,X,et),D-=X,q+=X,$-=X,et+=X,c.length-=X;break}c.mode=12;break;case 17:for(;L<14;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}if(c.nlen=257+(31&x),x>>>=5,L-=5,c.ndist=1+(31&x),x>>>=5,L-=5,c.ncode=4+(15&x),x>>>=4,L-=4,286<c.nlen||30<c.ndist){S.msg="too many length or distance symbols",c.mode=30;break}c.have=0,c.mode=18;case 18:for(;c.have<c.ncode;){for(;L<3;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}c.lens[K[c.have++]]=7&x,x>>>=3,L-=3}for(;c.have<19;)c.lens[K[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,W={bits:c.lenbits},G=h(0,c.lens,0,19,c.lencode,0,c.work,W),c.lenbits=W.bits,G){S.msg="invalid code lengths set",c.mode=30;break}c.have=0,c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;dt=(m=c.lencode[x&(1<<c.lenbits)-1])>>>16&255,ht=65535&m,!((at=m>>>24)<=L);){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}if(ht<16)x>>>=at,L-=at,c.lens[c.have++]=ht;else{if(ht===16){for(k=at+2;L<k;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}if(x>>>=at,L-=at,c.have===0){S.msg="invalid bit length repeat",c.mode=30;break}i=c.lens[c.have-1],X=3+(3&x),x>>>=2,L-=2}else if(ht===17){for(k=at+3;L<k;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}L-=at,i=0,X=3+(7&(x>>>=at)),x>>>=3,L-=3}else{for(k=at+7;L<k;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}L-=at,i=0,X=11+(127&(x>>>=at)),x>>>=7,L-=7}if(c.have+X>c.nlen+c.ndist){S.msg="invalid bit length repeat",c.mode=30;break}for(;X--;)c.lens[c.have++]=i}}if(c.mode===30)break;if(c.lens[256]===0){S.msg="invalid code -- missing end-of-block",c.mode=30;break}if(c.lenbits=9,W={bits:c.lenbits},G=h(y,c.lens,0,c.nlen,c.lencode,0,c.work,W),c.lenbits=W.bits,G){S.msg="invalid literal/lengths set",c.mode=30;break}if(c.distbits=6,c.distcode=c.distdyn,W={bits:c.distbits},G=h(b,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,W),c.distbits=W.bits,G){S.msg="invalid distances set",c.mode=30;break}if(c.mode=20,U===6)break t;case 20:c.mode=21;case 21:if(6<=D&&258<=$){S.next_out=et,S.avail_out=$,S.next_in=q,S.avail_in=D,c.hold=x,c.bits=L,f(S,rt),et=S.next_out,nt=S.output,$=S.avail_out,q=S.next_in,V=S.input,D=S.avail_in,x=c.hold,L=c.bits,c.mode===12&&(c.back=-1);break}for(c.back=0;dt=(m=c.lencode[x&(1<<c.lenbits)-1])>>>16&255,ht=65535&m,!((at=m>>>24)<=L);){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}if(dt&&!(240&dt)){for(mt=at,bt=dt,yt=ht;dt=(m=c.lencode[yt+((x&(1<<mt+bt)-1)>>mt)])>>>16&255,ht=65535&m,!(mt+(at=m>>>24)<=L);){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}x>>>=mt,L-=mt,c.back+=mt}if(x>>>=at,L-=at,c.back+=at,c.length=ht,dt===0){c.mode=26;break}if(32&dt){c.back=-1,c.mode=12;break}if(64&dt){S.msg="invalid literal/length code",c.mode=30;break}c.extra=15&dt,c.mode=22;case 22:if(c.extra){for(k=c.extra;L<k;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}c.length+=x&(1<<c.extra)-1,x>>>=c.extra,L-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=23;case 23:for(;dt=(m=c.distcode[x&(1<<c.distbits)-1])>>>16&255,ht=65535&m,!((at=m>>>24)<=L);){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}if(!(240&dt)){for(mt=at,bt=dt,yt=ht;dt=(m=c.distcode[yt+((x&(1<<mt+bt)-1)>>mt)])>>>16&255,ht=65535&m,!(mt+(at=m>>>24)<=L);){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}x>>>=mt,L-=mt,c.back+=mt}if(x>>>=at,L-=at,c.back+=at,64&dt){S.msg="invalid distance code",c.mode=30;break}c.offset=ht,c.extra=15&dt,c.mode=24;case 24:if(c.extra){for(k=c.extra;L<k;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}c.offset+=x&(1<<c.extra)-1,x>>>=c.extra,L-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){S.msg="invalid distance too far back",c.mode=30;break}c.mode=25;case 25:if($===0)break t;if(X=rt-$,c.offset>X){if((X=c.offset-X)>c.whave&&c.sane){S.msg="invalid distance too far back",c.mode=30;break}gt=X>c.wnext?(X-=c.wnext,c.wsize-X):c.wnext-X,X>c.length&&(X=c.length),pt=c.window}else pt=nt,gt=et-c.offset,X=c.length;for($<X&&(X=$),$-=X,c.length-=X;nt[et++]=pt[gt++],--X;);c.length===0&&(c.mode=21);break;case 26:if($===0)break t;nt[et++]=c.length,$--,c.mode=21;break;case 27:if(c.wrap){for(;L<32;){if(D===0)break t;D--,x|=V[q++]<<L,L+=8}if(rt-=$,S.total_out+=rt,c.total+=rt,rt&&(S.adler=c.check=c.flags?n(c.check,nt,rt,et-rt):s(c.check,nt,rt,et-rt)),rt=$,(c.flags?x:d(x))!==c.check){S.msg="incorrect data check",c.mode=30;break}L=x=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;L<32;){if(D===0)break t;D--,x+=V[q++]<<L,L+=8}if(x!==(4294967295&c.total)){S.msg="incorrect length check",c.mode=30;break}L=x=0}c.mode=29;case 29:G=1;break t;case 30:G=-3;break t;case 31:return-4;case 32:default:return u}return S.next_out=et,S.avail_out=$,S.next_in=q,S.avail_in=D,c.hold=x,c.bits=L,(c.wsize||rt!==S.avail_out&&c.mode<30&&(c.mode<27||U!==4))&&J(S,S.output,S.next_out,rt-S.avail_out)?(c.mode=31,-4):(ot-=S.avail_in,rt-=S.avail_out,S.total_in+=ot,S.total_out+=rt,c.total+=rt,c.wrap&&rt&&(S.adler=c.check=c.flags?n(c.check,nt,rt,S.next_out-rt):s(c.check,nt,rt,S.next_out-rt)),S.data_type=c.bits+(c.last?64:0)+(c.mode===12?128:0)+(c.mode===20||c.mode===15?256:0),(ot==0&&rt===0||U===4)&&G===g&&(G=-5),G)},r.inflateEnd=function(S){if(!S||!S.state)return u;var U=S.state;return U.window&&(U.window=null),S.state=null,g},r.inflateGetHeader=function(S,U){var c;return S&&S.state&&2&(c=S.state).wrap?((c.head=U).done=!1,g):u},r.inflateSetDictionary=function(S,U){var c,V=U.length;return S&&S.state?(c=S.state).wrap!==0&&c.mode!==11?u:c.mode===11&&s(1,U,V,0)!==c.check?-3:J(S,U,V,V)?(c.mode=31,-4):(c.havedict=1,g):u},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,o,r){var t=e("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];o.exports=function(y,b,g,u,v,a,p,d){var w,C,I,T,z,O,R,A,N,J=d.bits,S=0,U=0,c=0,V=0,nt=0,q=0,et=0,D=0,$=0,x=0,L=null,ot=0,rt=new t.Buf16(16),X=new t.Buf16(16),gt=null,pt=0;for(S=0;S<=15;S++)rt[S]=0;for(U=0;U<u;U++)rt[b[g+U]]++;for(nt=J,V=15;1<=V&&rt[V]===0;V--);if(V<nt&&(nt=V),V===0)return v[a++]=20971520,v[a++]=20971520,d.bits=1,0;for(c=1;c<V&&rt[c]===0;c++);for(nt<c&&(nt=c),S=D=1;S<=15;S++)if(D<<=1,(D-=rt[S])<0)return-1;if(0<D&&(y===0||V!==1))return-1;for(X[1]=0,S=1;S<15;S++)X[S+1]=X[S]+rt[S];for(U=0;U<u;U++)b[g+U]!==0&&(p[X[b[g+U]]++]=U);if(O=y===0?(L=gt=p,19):y===1?(L=s,ot-=257,gt=n,pt-=257,256):(L=f,gt=h,-1),S=c,z=a,et=U=x=0,I=-1,T=($=1<<(q=nt))-1,y===1&&852<$||y===2&&592<$)return 1;for(;;){for(R=S-et,N=p[U]<O?(A=0,p[U]):p[U]>O?(A=gt[pt+p[U]],L[ot+p[U]]):(A=96,0),w=1<<S-et,c=C=1<<q;v[z+(x>>et)+(C-=w)]=R<<24|A<<16|N|0,C!==0;);for(w=1<<S-1;x&w;)w>>=1;if(w!==0?(x&=w-1,x+=w):x=0,U++,--rt[S]==0){if(S===V)break;S=b[g+p[U]]}if(nt<S&&(x&T)!==I){for(et===0&&(et=nt),z+=c,D=1<<(q=S-et);q+et<V&&!((D-=rt[q+et])<=0);)q++,D<<=1;if($+=1<<q,y===1&&852<$||y===2&&592<$)return 1;v[I=x&T]=nt<<24|q<<16|z-a|0}}return x!==0&&(v[z+x]=S-et<<24|64<<16|0),d.bits=nt,0}},{"../utils/common":41}],51:[function(e,o,r){o.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,o,r){var t=e("../utils/common"),s=0,n=1;function f(m){for(var B=m.length;0<=--B;)m[B]=0}var h=0,y=29,b=256,g=b+1+y,u=30,v=19,a=2*g+1,p=15,d=16,w=7,C=256,I=16,T=17,z=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=new Array(2*(g+2));f(J);var S=new Array(2*u);f(S);var U=new Array(512);f(U);var c=new Array(256);f(c);var V=new Array(y);f(V);var nt,q,et,D=new Array(u);function $(m,B,K,Y,F){this.static_tree=m,this.extra_bits=B,this.extra_base=K,this.elems=Y,this.max_length=F,this.has_stree=m&&m.length}function x(m,B){this.dyn_tree=m,this.max_code=0,this.stat_desc=B}function L(m){return m<256?U[m]:U[256+(m>>>7)]}function ot(m,B){m.pending_buf[m.pending++]=255&B,m.pending_buf[m.pending++]=B>>>8&255}function rt(m,B,K){m.bi_valid>d-K?(m.bi_buf|=B<<m.bi_valid&65535,ot(m,m.bi_buf),m.bi_buf=B>>d-m.bi_valid,m.bi_valid+=K-d):(m.bi_buf|=B<<m.bi_valid&65535,m.bi_valid+=K)}function X(m,B,K){rt(m,K[2*B],K[2*B+1])}function gt(m,B){for(var K=0;K|=1&m,m>>>=1,K<<=1,0<--B;);return K>>>1}function pt(m,B,K){var Y,F,tt=new Array(p+1),lt=0;for(Y=1;Y<=p;Y++)tt[Y]=lt=lt+K[Y-1]<<1;for(F=0;F<=B;F++){var Q=m[2*F+1];Q!==0&&(m[2*F]=gt(tt[Q]++,Q))}}function at(m){var B;for(B=0;B<g;B++)m.dyn_ltree[2*B]=0;for(B=0;B<u;B++)m.dyn_dtree[2*B]=0;for(B=0;B<v;B++)m.bl_tree[2*B]=0;m.dyn_ltree[2*C]=1,m.opt_len=m.static_len=0,m.last_lit=m.matches=0}function dt(m){8<m.bi_valid?ot(m,m.bi_buf):0<m.bi_valid&&(m.pending_buf[m.pending++]=m.bi_buf),m.bi_buf=0,m.bi_valid=0}function ht(m,B,K,Y){var F=2*B,tt=2*K;return m[F]<m[tt]||m[F]===m[tt]&&Y[B]<=Y[K]}function mt(m,B,K){for(var Y=m.heap[K],F=K<<1;F<=m.heap_len&&(F<m.heap_len&&ht(B,m.heap[F+1],m.heap[F],m.depth)&&F++,!ht(B,Y,m.heap[F],m.depth));)m.heap[K]=m.heap[F],K=F,F<<=1;m.heap[K]=Y}function bt(m,B,K){var Y,F,tt,lt,Q=0;if(m.last_lit!==0)for(;Y=m.pending_buf[m.d_buf+2*Q]<<8|m.pending_buf[m.d_buf+2*Q+1],F=m.pending_buf[m.l_buf+Q],Q++,Y===0?X(m,F,B):(X(m,(tt=c[F])+b+1,B),(lt=O[tt])!==0&&rt(m,F-=V[tt],lt),X(m,tt=L(--Y),K),(lt=R[tt])!==0&&rt(m,Y-=D[tt],lt)),Q<m.last_lit;);X(m,C,B)}function yt(m,B){var K,Y,F,tt=B.dyn_tree,lt=B.stat_desc.static_tree,Q=B.stat_desc.has_stree,ut=B.stat_desc.elems,wt=-1;for(m.heap_len=0,m.heap_max=a,K=0;K<ut;K++)tt[2*K]!==0?(m.heap[++m.heap_len]=wt=K,m.depth[K]=0):tt[2*K+1]=0;for(;m.heap_len<2;)tt[2*(F=m.heap[++m.heap_len]=wt<2?++wt:0)]=1,m.depth[F]=0,m.opt_len--,Q&&(m.static_len-=lt[2*F+1]);for(B.max_code=wt,K=m.heap_len>>1;1<=K;K--)mt(m,tt,K);for(F=ut;K=m.heap[1],m.heap[1]=m.heap[m.heap_len--],mt(m,tt,1),Y=m.heap[1],m.heap[--m.heap_max]=K,m.heap[--m.heap_max]=Y,tt[2*F]=tt[2*K]+tt[2*Y],m.depth[F]=(m.depth[K]>=m.depth[Y]?m.depth[K]:m.depth[Y])+1,tt[2*K+1]=tt[2*Y+1]=F,m.heap[1]=F++,mt(m,tt,1),2<=m.heap_len;);m.heap[--m.heap_max]=m.heap[1],function(vt,It){var Dt,Ot,Bt,Et,At,Lt,Pt=It.dyn_tree,ee=It.max_code,$t=It.stat_desc.static_tree,ue=It.stat_desc.has_stree,ce=It.stat_desc.extra_bits,re=It.stat_desc.extra_base,qt=It.stat_desc.max_length,te=0;for(Et=0;Et<=p;Et++)vt.bl_count[Et]=0;for(Pt[2*vt.heap[vt.heap_max]+1]=0,Dt=vt.heap_max+1;Dt<a;Dt++)qt<(Et=Pt[2*Pt[2*(Ot=vt.heap[Dt])+1]+1]+1)&&(Et=qt,te++),Pt[2*Ot+1]=Et,ee<Ot||(vt.bl_count[Et]++,At=0,re<=Ot&&(At=ce[Ot-re]),Lt=Pt[2*Ot],vt.opt_len+=Lt*(Et+At),ue&&(vt.static_len+=Lt*($t[2*Ot+1]+At)));if(te!==0){do{for(Et=qt-1;vt.bl_count[Et]===0;)Et--;vt.bl_count[Et]--,vt.bl_count[Et+1]+=2,vt.bl_count[qt]--,te-=2}while(0<te);for(Et=qt;Et!==0;Et--)for(Ot=vt.bl_count[Et];Ot!==0;)ee<(Bt=vt.heap[--Dt])||(Pt[2*Bt+1]!==Et&&(vt.opt_len+=(Et-Pt[2*Bt+1])*Pt[2*Bt],Pt[2*Bt+1]=Et),Ot--)}}(m,B),pt(tt,wt,m.bl_count)}function i(m,B,K){var Y,F,tt=-1,lt=B[1],Q=0,ut=7,wt=4;for(lt===0&&(ut=138,wt=3),B[2*(K+1)+1]=65535,Y=0;Y<=K;Y++)F=lt,lt=B[2*(Y+1)+1],++Q<ut&&F===lt||(Q<wt?m.bl_tree[2*F]+=Q:F!==0?(F!==tt&&m.bl_tree[2*F]++,m.bl_tree[2*I]++):Q<=10?m.bl_tree[2*T]++:m.bl_tree[2*z]++,tt=F,wt=(Q=0)===lt?(ut=138,3):F===lt?(ut=6,3):(ut=7,4))}function G(m,B,K){var Y,F,tt=-1,lt=B[1],Q=0,ut=7,wt=4;for(lt===0&&(ut=138,wt=3),Y=0;Y<=K;Y++)if(F=lt,lt=B[2*(Y+1)+1],!(++Q<ut&&F===lt)){if(Q<wt)for(;X(m,F,m.bl_tree),--Q!=0;);else F!==0?(F!==tt&&(X(m,F,m.bl_tree),Q--),X(m,I,m.bl_tree),rt(m,Q-3,2)):Q<=10?(X(m,T,m.bl_tree),rt(m,Q-3,3)):(X(m,z,m.bl_tree),rt(m,Q-11,7));tt=F,wt=(Q=0)===lt?(ut=138,3):F===lt?(ut=6,3):(ut=7,4)}}f(D);var W=!1;function k(m,B,K,Y){rt(m,(h<<1)+(Y?1:0),3),function(F,tt,lt,Q){dt(F),Q&&(ot(F,lt),ot(F,~lt)),t.arraySet(F.pending_buf,F.window,tt,lt,F.pending),F.pending+=lt}(m,B,K,!0)}r._tr_init=function(m){W||(function(){var B,K,Y,F,tt,lt=new Array(p+1);for(F=Y=0;F<y-1;F++)for(V[F]=Y,B=0;B<1<<O[F];B++)c[Y++]=F;for(c[Y-1]=F,F=tt=0;F<16;F++)for(D[F]=tt,B=0;B<1<<R[F];B++)U[tt++]=F;for(tt>>=7;F<u;F++)for(D[F]=tt<<7,B=0;B<1<<R[F]-7;B++)U[256+tt++]=F;for(K=0;K<=p;K++)lt[K]=0;for(B=0;B<=143;)J[2*B+1]=8,B++,lt[8]++;for(;B<=255;)J[2*B+1]=9,B++,lt[9]++;for(;B<=279;)J[2*B+1]=7,B++,lt[7]++;for(;B<=287;)J[2*B+1]=8,B++,lt[8]++;for(pt(J,g+1,lt),B=0;B<u;B++)S[2*B+1]=5,S[2*B]=gt(B,5);nt=new $(J,O,b+1,g,p),q=new $(S,R,0,u,p),et=new $(new Array(0),A,0,v,w)}(),W=!0),m.l_desc=new x(m.dyn_ltree,nt),m.d_desc=new x(m.dyn_dtree,q),m.bl_desc=new x(m.bl_tree,et),m.bi_buf=0,m.bi_valid=0,at(m)},r._tr_stored_block=k,r._tr_flush_block=function(m,B,K,Y){var F,tt,lt=0;0<m.level?(m.strm.data_type===2&&(m.strm.data_type=function(Q){var ut,wt=4093624447;for(ut=0;ut<=31;ut++,wt>>>=1)if(1&wt&&Q.dyn_ltree[2*ut]!==0)return s;if(Q.dyn_ltree[18]!==0||Q.dyn_ltree[20]!==0||Q.dyn_ltree[26]!==0)return n;for(ut=32;ut<b;ut++)if(Q.dyn_ltree[2*ut]!==0)return n;return s}(m)),yt(m,m.l_desc),yt(m,m.d_desc),lt=function(Q){var ut;for(i(Q,Q.dyn_ltree,Q.l_desc.max_code),i(Q,Q.dyn_dtree,Q.d_desc.max_code),yt(Q,Q.bl_desc),ut=v-1;3<=ut&&Q.bl_tree[2*N[ut]+1]===0;ut--);return Q.opt_len+=3*(ut+1)+5+5+4,ut}(m),F=m.opt_len+3+7>>>3,(tt=m.static_len+3+7>>>3)<=F&&(F=tt)):F=tt=K+5,K+4<=F&&B!==-1?k(m,B,K,Y):m.strategy===4||tt===F?(rt(m,2+(Y?1:0),3),bt(m,J,S)):(rt(m,4+(Y?1:0),3),function(Q,ut,wt,vt){var It;for(rt(Q,ut-257,5),rt(Q,wt-1,5),rt(Q,vt-4,4),It=0;It<vt;It++)rt(Q,Q.bl_tree[2*N[It]+1],3);G(Q,Q.dyn_ltree,ut-1),G(Q,Q.dyn_dtree,wt-1)}(m,m.l_desc.max_code+1,m.d_desc.max_code+1,lt+1),bt(m,m.dyn_ltree,m.dyn_dtree)),at(m),Y&&dt(m)},r._tr_tally=function(m,B,K){return m.pending_buf[m.d_buf+2*m.last_lit]=B>>>8&255,m.pending_buf[m.d_buf+2*m.last_lit+1]=255&B,m.pending_buf[m.l_buf+m.last_lit]=255&K,m.last_lit++,B===0?m.dyn_ltree[2*K]++:(m.matches++,B--,m.dyn_ltree[2*(c[K]+b+1)]++,m.dyn_dtree[2*L(B)]++),m.last_lit===m.lit_bufsize-1},r._tr_align=function(m){rt(m,2,3),X(m,C,J),function(B){B.bi_valid===16?(ot(B,B.bi_buf),B.bi_buf=0,B.bi_valid=0):8<=B.bi_valid&&(B.pending_buf[B.pending++]=255&B.bi_buf,B.bi_buf>>=8,B.bi_valid-=8)}(m)}},{"../utils/common":41}],53:[function(e,o,r){o.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,o,r){(function(t){(function(s,n){if(!s.setImmediate){var f,h,y,b,g=1,u={},v=!1,a=s.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(s);p=p&&p.setTimeout?p:s,f={}.toString.call(s.process)==="[object process]"?function(I){process.nextTick(function(){w(I)})}:function(){if(s.postMessage&&!s.importScripts){var I=!0,T=s.onmessage;return s.onmessage=function(){I=!1},s.postMessage("","*"),s.onmessage=T,I}}()?(b="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",C,!1):s.attachEvent("onmessage",C),function(I){s.postMessage(b+I,"*")}):s.MessageChannel?((y=new MessageChannel).port1.onmessage=function(I){w(I.data)},function(I){y.port2.postMessage(I)}):a&&"onreadystatechange"in a.createElement("script")?(h=a.documentElement,function(I){var T=a.createElement("script");T.onreadystatechange=function(){w(I),T.onreadystatechange=null,h.removeChild(T),T=null},h.appendChild(T)}):function(I){setTimeout(w,0,I)},p.setImmediate=function(I){typeof I!="function"&&(I=new Function(""+I));for(var T=new Array(arguments.length-1),z=0;z<T.length;z++)T[z]=arguments[z+1];var O={callback:I,args:T};return u[g]=O,f(g),g++},p.clearImmediate=d}function d(I){delete u[I]}function w(I){if(v)setTimeout(w,0,I);else{var T=u[I];if(T){v=!0;try{(function(z){var O=z.callback,R=z.args;switch(R.length){case 0:O();break;case 1:O(R[0]);break;case 2:O(R[0],R[1]);break;case 3:O(R[0],R[1],R[2]);break;default:O.apply(n,R)}})(T)}finally{d(I),v=!1}}}}function C(I){I.source===s&&typeof I.data=="string"&&I.data.indexOf(b)===0&&w(+I.data.slice(b.length))}})(typeof self>"u"?t===void 0?this:t:self)}).call(this,typeof Vt<"u"?Vt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Er);var Sn=Er.exports;const In=Dr(Sn);var Cr={exports:{}};(function(_,l){(function(e,o){o()})(Vt,function(){function e(h,y){return typeof y>"u"?y={autoBom:!1}:typeof y!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),y={autoBom:!y}),y.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function o(h,y,b){var g=new XMLHttpRequest;g.open("GET",h),g.responseType="blob",g.onload=function(){f(g.response,y,b)},g.onerror=function(){console.error("could not download file")},g.send()}function r(h){var y=new XMLHttpRequest;y.open("HEAD",h,!1);try{y.send()}catch{}return 200<=y.status&&299>=y.status}function t(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(y)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Vt=="object"&&Vt.global===Vt?Vt:void 0,n=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!n?function(h,y,b){var g=s.URL||s.webkitURL,u=document.createElement("a");y=y||h.name||"download",u.download=y,u.rel="noopener",typeof h=="string"?(u.href=h,u.origin===location.origin?t(u):r(u.href)?o(h,y,b):t(u,u.target="_blank")):(u.href=g.createObjectURL(h),setTimeout(function(){g.revokeObjectURL(u.href)},4e4),setTimeout(function(){t(u)},0))}:"msSaveOrOpenBlob"in navigator?function(h,y,b){if(y=y||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(e(h,b),y);else if(r(h))o(h,y,b);else{var g=document.createElement("a");g.href=h,g.target="_blank",setTimeout(function(){t(g)})}}:function(h,y,b,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof h=="string")return o(h,y,b);var u=h.type==="application/octet-stream",v=/constructor/i.test(s.HTMLElement)||s.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||u&&v||n)&&typeof FileReader<"u"){var p=new FileReader;p.onloadend=function(){var C=p.result;C=a?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=C:location=C,g=null},p.readAsDataURL(h)}else{var d=s.URL||s.webkitURL,w=d.createObjectURL(h);g?g.location=w:location.href=w,g=null,setTimeout(function(){d.revokeObjectURL(w)},4e4)}});s.saveAs=f.saveAs=f,_.exports=f})})(Cr);var An=Cr.exports;async function zn(_,l,e="watermarked_images.zip"){const o=new In;_.forEach((t,s)=>{const n=`${s+1}.jpg`;o.file(n,t)});const r=await o.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}});An.saveAs(r,e)}function vr(_){let l,e=(_[9]||_[5]||_[4])+"",o;return{c(){l=M("p"),o=ct(e),this.h()},l(r){l=Z(r,"P",{class:!0});var t=H(l);o=ft(t,e),t.forEach(j),this.h()},h(){P(l,"class","text-sm text-neutral-600")},m(r,t){kt(r,l,t),E(l,o)},p(r,t){t&560&&e!==(e=(r[9]||r[5]||r[4])+"")&&Zt(o,e)},d(r){r&&j(l)}}}function gr(_){let l,e,o,r,t,s,n,f,h=_[8].current+"",y,b,g=_[8].total+"",u,v,a,p=_[8].currentFile+"",d,w,C,I,T,z;return o=new Nr({props:{size:32,class:"animate-spin text-neutral-600 mb-3 mx-auto"}}),{c(){l=M("div"),e=M("div"),Ut(o.$$.fragment),r=it(),t=M("p"),s=ct("Processing Images"),n=it(),f=M("p"),y=ct(h),b=ct(" of "),u=ct(g),v=it(),a=M("p"),d=ct(p),C=it(),I=M("div"),T=M("div"),this.h()},l(O){l=Z(O,"DIV",{class:!0});var R=H(l);e=Z(R,"DIV",{class:!0});var A=H(e);jt(o.$$.fragment,A),r=st(A),t=Z(A,"P",{class:!0});var N=H(t);s=ft(N,"Processing Images"),N.forEach(j),n=st(A),f=Z(A,"P",{class:!0});var J=H(f);y=ft(J,h),b=ft(J," of "),u=ft(J,g),J.forEach(j),v=st(A),a=Z(A,"P",{class:!0,title:!0});var S=H(a);d=ft(S,p),S.forEach(j),C=st(A),I=Z(A,"DIV",{class:!0});var U=H(I);T=Z(U,"DIV",{class:!0,style:!0}),H(T).forEach(j),U.forEach(j),A.forEach(j),R.forEach(j),this.h()},h(){P(t,"class","text-lg font-medium text-black svelte-1eldi8g"),P(f,"class","text-sm text-neutral-600 svelte-1eldi8g"),P(a,"class","text-xs text-neutral-500 mt-1 truncate max-w-xs mx-auto svelte-1eldi8g"),P(a,"title",w=_[8].currentFile),P(T,"class","progress-bar-fill svelte-1eldi8g"),tr(T,"width",(_[8].total>0?_[8].current/_[8].total*100:0)+"%"),P(I,"class","progress-bar-bg svelte-1eldi8g"),P(e,"class","progress-card svelte-1eldi8g"),P(l,"class","progress-overlay svelte-1eldi8g")},m(O,R){kt(O,l,R),E(l,e),Wt(o,e,null),E(e,r),E(e,t),E(t,s),E(e,n),E(e,f),E(f,y),E(f,b),E(f,u),E(e,v),E(e,a),E(a,d),E(e,C),E(e,I),E(I,T),z=!0},p(O,R){(!z||R&256)&&h!==(h=O[8].current+"")&&Zt(y,h),(!z||R&256)&&g!==(g=O[8].total+"")&&Zt(u,g),(!z||R&256)&&p!==(p=O[8].currentFile+"")&&Zt(d,p),(!z||R&256&&w!==(w=O[8].currentFile))&&P(a,"title",w),(!z||R&256)&&tr(T,"width",(O[8].total>0?O[8].current/O[8].total*100:0)+"%")},i(O){z||(St(o.$$.fragment,O),z=!0)},o(O){Tt(o.$$.fragment,O),z=!1},d(O){O&&j(l),Mt(o)}}}function Tn(_){let l,e,o,r,t,s,n,f,h,y,b,g,u,v,a,p,d,w,C,I,T,z,O,R,A,N,J;o=new Or({props:{title:"Austin Li – Watermark Tool",description:"Batch watermark images with timestamps. All processing happens in your browser."}});function S(D){_[16](D)}function U(D){_[17](D)}let c={totalImages:_[0].length};_[2]!==void 0&&(c.config=_[2]),_[1]!==void 0&&(c.selectedPhotoCount=_[1]),b=new _n({props:c}),ke.push(()=>Se(b,"config",S)),ke.push(()=>Se(b,"selectedPhotoCount",U));function V(D){_[18](D)}let nt={};_[7]!==void 0&&(nt.options=_[7]),p=new bn({props:nt}),ke.push(()=>Se(p,"options",V)),I=new Qr({props:{disabled:_[3]}}),I.$on("filesSelected",_[11]);let q=(_[9]||_[10])&&_[0].length>0&&vr(_);R=new on({props:{files:_[0],onProcess:_[15],canProcess:_[6]&&!_[10],config:_[2]}}),R.$on("remove",_[12]),R.$on("reorder",_[13]),R.$on("clearAll",_[14]);let et=_[3]&&gr(_);return{c(){l=M("link"),e=it(),Ut(o.$$.fragment),r=it(),t=M("div"),s=M("div"),n=M("p"),f=ct(`Upload images and add timestamped watermarks. All processing happens in
      your browser — nothing is uploaded.`),h=it(),y=M("div"),Ut(b.$$.fragment),v=it(),a=M("div"),Ut(p.$$.fragment),w=it(),C=M("div"),Ut(I.$$.fragment),T=it(),q&&q.c(),z=it(),O=M("div"),Ut(R.$$.fragment),A=it(),et&&et.c(),N=le(),this.h()},l(D){const $=Pr("svelte-19ru3f7",document.head);l=Z($,"LINK",{rel:!0,href:!0}),$.forEach(j),e=st(D),jt(o.$$.fragment,D),r=st(D),t=Z(D,"DIV",{class:!0});var x=H(t);s=Z(x,"DIV",{class:!0});var L=H(s);n=Z(L,"P",{class:!0});var ot=H(n);f=ft(ot,`Upload images and add timestamped watermarks. All processing happens in
      your browser — nothing is uploaded.`),ot.forEach(j),L.forEach(j),h=st(x),y=Z(x,"DIV",{class:!0});var rt=H(y);jt(b.$$.fragment,rt),rt.forEach(j),v=st(x),a=Z(x,"DIV",{class:!0});var X=H(a);jt(p.$$.fragment,X),X.forEach(j),w=st(x),C=Z(x,"DIV",{class:!0});var gt=H(C);jt(I.$$.fragment,gt),T=st(gt),q&&q.l(gt),gt.forEach(j),x.forEach(j),z=st(D),O=Z(D,"DIV",{class:!0});var pt=H(O);jt(R.$$.fragment,pt),pt.forEach(j),A=st(D),et&&et.l(D),N=le(),this.h()},h(){P(l,"rel","stylesheet"),P(l,"href","https://use.typekit.net/evw2arl.css"),P(n,"class","text-sm sm:text-base"),P(s,"class","space-y-3 sm:space-y-5"),P(y,"class","space-y-4 sm:space-y-5"),P(a,"class","space-y-4 sm:space-y-5"),P(C,"class","space-y-4 sm:space-y-5"),P(t,"class","layout-md text-base sm:text-lg space-y-8 sm:space-y-14"),P(O,"class","image-grid-container svelte-1eldi8g")},m(D,$){E(document.head,l),kt(D,e,$),Wt(o,D,$),kt(D,r,$),kt(D,t,$),E(t,s),E(s,n),E(n,f),E(t,h),E(t,y),Wt(b,y,null),E(t,v),E(t,a),Wt(p,a,null),E(t,w),E(t,C),Wt(I,C,null),E(C,T),q&&q.m(C,null),kt(D,z,$),kt(D,O,$),Wt(R,O,null),kt(D,A,$),et&&et.m(D,$),kt(D,N,$),J=!0},p(D,[$]){const x={};$&1&&(x.totalImages=D[0].length),!g&&$&4&&(g=!0,x.config=D[2],Ie(()=>g=!1)),!u&&$&2&&(u=!0,x.selectedPhotoCount=D[1],Ie(()=>u=!1)),b.$set(x);const L={};!d&&$&128&&(d=!0,L.options=D[7],Ie(()=>d=!1)),p.$set(L);const ot={};$&8&&(ot.disabled=D[3]),I.$set(ot),(D[9]||D[10])&&D[0].length>0?q?q.p(D,$):(q=vr(D),q.c(),q.m(C,null)):q&&(q.d(1),q=null);const rt={};$&1&&(rt.files=D[0]),$&1088&&(rt.canProcess=D[6]&&!D[10]),$&4&&(rt.config=D[2]),R.$set(rt),D[3]?et?(et.p(D,$),$&8&&St(et,1)):(et=gr(D),et.c(),St(et,1),et.m(N.parentNode,N)):et&&(De(),Tt(et,1,1,()=>{et=null}),Re())},i(D){J||(St(o.$$.fragment,D),St(b.$$.fragment,D),St(p.$$.fragment,D),St(I.$$.fragment,D),St(R.$$.fragment,D),St(et),J=!0)},o(D){Tt(o.$$.fragment,D),Tt(b.$$.fragment,D),Tt(p.$$.fragment,D),Tt(I.$$.fragment,D),Tt(R.$$.fragment,D),Tt(et),J=!1},d(D){j(l),D&&j(e),Mt(o,D),D&&j(r),D&&j(t),Mt(b),Mt(p),Mt(I),q&&q.d(),D&&j(z),D&&j(O),Mt(R),D&&j(A),et&&et.d(D),D&&j(N)}}}function Bn(_,l,e){let o,r,t,s,n=[],f=18,h={date:new Date().toISOString().split("T")[0],street:"",city:"",state:"",zip:"",timeRanges:[{id:crypto.randomUUID(),startTime:"10:00",incrementPattern:wr[0],photoCount:18}]},y={position:"top-left",fontSize:"large",textColor:"white",hasBorder:!1,borderColor:"black",borderWidth:"medium",bold:!0},b=!1,g={current:0,total:0,currentFile:""},u="";function v(z){const O=z.detail;e(0,n=[...n,...O]),e(9,u="")}function a(z){const O=z.detail;e(0,n=n.filter((R,A)=>A!==O))}function p(z){const{from:O,to:R}=z.detail;if(O===R||O<0||O>=n.length||R<0||R>=n.length)return;const A=[...n];[A[O],A[R]]=[A[R],A[O]],e(0,n=A),e(9,u="")}function d(){e(0,n=[]),e(9,u="")}async function w(){const z=mr(n);if(z){e(9,u=z);return}const O=_r(h,n.length);if(O){e(9,u=O);return}e(9,u=""),e(3,b=!0);try{const R=await wn(n,h,y,A=>{e(8,g=A)});await zn(R,n)}catch(R){console.error("Processing failed:",R),e(9,u=R instanceof Error?R.message:"Failed to process images. Please try again.")}finally{e(3,b=!1),e(8,g={current:0,total:0,currentFile:""})}}function C(z){h=z,e(2,h)}function I(z){f=z,e(1,f)}function T(z){y=z,e(7,y)}return _.$$.update=()=>{if(_.$$.dirty&6&&f!==null&&h.timeRanges.length>0){const z=h.timeRanges[0];z.photoCount!==f&&(z.incrementPattern=$r(f),z.photoCount=f,e(0,n=[]),e(9,u=""))}_.$$.dirty&9&&e(6,o=n.length>0&&!b),_.$$.dirty&1&&e(5,r=n.length>0?mr(n):null),_.$$.dirty&69&&e(4,t=o?_r(h,n.length):null),_.$$.dirty&48&&e(10,s=r!==null||t!==null)},[n,f,h,b,t,r,o,y,g,u,s,v,a,p,d,w,C,I,T]}class xn extends Xt{constructor(l){super(),Yt(this,l,Bn,Tn,Jt,{})}}export{xn as component};

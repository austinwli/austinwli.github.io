import{S as Qt,i as $t,s as Gt,R as Zt,y as jt,z as xt,A as Wt,T as Le,U as Ne,g as At,d as Rt,B as Vt,V as ee,K as Fe,L as Me,M as je,N as xe,k as F,a as at,q as ct,l as M,m as G,c as it,r as dt,h as B,n as C,H as Bt,b as It,C as w,Y as ht,a2 as Je,Z as re,a3 as sr,w as Oe,e as fe,v as De,f as Pe,a4 as Fr,u as Jt,D as qr,$ as Hr,a5 as Gr,J as Qe,F as oe,a6 as Mt,O as $e,a7 as de,a8 as Ye,a9 as Mr,_ as Xr,aa as Yr,ab as ae,ac as hr,ad as er,I as Kr,ae as rr,p as pr}from"../chunks/index.d4be371a.js";import{I as We}from"../chunks/Icon.06cd5a90.js";import{S as Jr}from"../chunks/Seo.6670ebfa.js";import{c as ie,g as Qr}from"../chunks/_commonjsHelpers.725317a4.js";function $r(o){let r;const t=o[2].default,a=Fe(t,o,o[3],null);return{c(){a&&a.c()},l(n){a&&a.l(n)},m(n,e){a&&a.m(n,e),r=!0},p(n,e){a&&a.p&&(!r||e&8)&&Me(a,t,n,n[3],r?xe(t,n[3],e,null):je(n[3]),null)},i(n){r||(At(a,n),r=!0)},o(n){Rt(a,n),r=!1},d(n){a&&a.d(n)}}}function tn(o){let r,t;const a=[{name:"loader-2"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[$r]},$$scope:{ctx:o}};for(let e=0;e<a.length;e+=1)n=Zt(n,a[e]);return r=new We({props:n}),{c(){jt(r.$$.fragment)},l(e){xt(r.$$.fragment,e)},m(e,s){Wt(r,e,s),t=!0},p(e,[s]){const i=s&3?Le(a,[a[0],s&2&&Ne(e[1]),s&1&&{iconNode:e[0]}]):{};s&8&&(i.$$scope={dirty:s,ctx:e}),r.$set(i)},i(e){t||(At(r.$$.fragment,e),t=!0)},o(e){Rt(r.$$.fragment,e),t=!1},d(e){Vt(r,e)}}}function en(o,r,t){let{$$slots:a={},$$scope:n}=r;const e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];return o.$$set=s=>{t(1,r=Zt(Zt({},r),ee(s))),"$$scope"in s&&t(3,n=s.$$scope)},r=ee(r),[e,r,a,n]}class rn extends Qt{constructor(r){super(),$t(this,r,en,tn,Gt,{})}}const nn=rn;function sn(o){let r;const t=o[2].default,a=Fe(t,o,o[3],null);return{c(){a&&a.c()},l(n){a&&a.l(n)},m(n,e){a&&a.m(n,e),r=!0},p(n,e){a&&a.p&&(!r||e&8)&&Me(a,t,n,n[3],r?xe(t,n[3],e,null):je(n[3]),null)},i(n){r||(At(a,n),r=!0)},o(n){Rt(a,n),r=!1},d(n){a&&a.d(n)}}}function an(o){let r,t;const a=[{name:"rotate-ccw"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[sn]},$$scope:{ctx:o}};for(let e=0;e<a.length;e+=1)n=Zt(n,a[e]);return r=new We({props:n}),{c(){jt(r.$$.fragment)},l(e){xt(r.$$.fragment,e)},m(e,s){Wt(r,e,s),t=!0},p(e,[s]){const i=s&3?Le(a,[a[0],s&2&&Ne(e[1]),s&1&&{iconNode:e[0]}]):{};s&8&&(i.$$scope={dirty:s,ctx:e}),r.$set(i)},i(e){t||(At(r.$$.fragment,e),t=!0)},o(e){Rt(r.$$.fragment,e),t=!1},d(e){Vt(r,e)}}}function on(o,r,t){let{$$slots:a={},$$scope:n}=r;const e=[["path",{d:"M3 2v6h6"}],["path",{d:"M3 13a9 9 0 1 0 3-7.7L3 8"}]];return o.$$set=s=>{t(1,r=Zt(Zt({},r),ee(s))),"$$scope"in s&&t(3,n=s.$$scope)},r=ee(r),[e,r,a,n]}class ln extends Qt{constructor(r){super(),$t(this,r,on,an,Gt,{})}}const un=ln;function cn(o){let r;const t=o[2].default,a=Fe(t,o,o[3],null);return{c(){a&&a.c()},l(n){a&&a.l(n)},m(n,e){a&&a.m(n,e),r=!0},p(n,e){a&&a.p&&(!r||e&8)&&Me(a,t,n,n[3],r?xe(t,n[3],e,null):je(n[3]),null)},i(n){r||(At(a,n),r=!0)},o(n){Rt(a,n),r=!1},d(n){a&&a.d(n)}}}function dn(o){let r,t;const a=[{name:"rotate-cw"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[cn]},$$scope:{ctx:o}};for(let e=0;e<a.length;e+=1)n=Zt(n,a[e]);return r=new We({props:n}),{c(){jt(r.$$.fragment)},l(e){xt(r.$$.fragment,e)},m(e,s){Wt(r,e,s),t=!0},p(e,[s]){const i=s&3?Le(a,[a[0],s&2&&Ne(e[1]),s&1&&{iconNode:e[0]}]):{};s&8&&(i.$$scope={dirty:s,ctx:e}),r.$set(i)},i(e){t||(At(r.$$.fragment,e),t=!0)},o(e){Rt(r.$$.fragment,e),t=!1},d(e){Vt(r,e)}}}function fn(o,r,t){let{$$slots:a={},$$scope:n}=r;const e=[["path",{d:"M21 2v6h-6"}],["path",{d:"M21 13a9 9 0 1 1-3-7.7L21 8"}]];return o.$$set=s=>{t(1,r=Zt(Zt({},r),ee(s))),"$$scope"in s&&t(3,n=s.$$scope)},r=ee(r),[e,r,a,n]}class hn extends Qt{constructor(r){super(),$t(this,r,fn,dn,Gt,{})}}const pn=hn;function mn(o){let r;const t=o[2].default,a=Fe(t,o,o[3],null);return{c(){a&&a.c()},l(n){a&&a.l(n)},m(n,e){a&&a.m(n,e),r=!0},p(n,e){a&&a.p&&(!r||e&8)&&Me(a,t,n,n[3],r?xe(t,n[3],e,null):je(n[3]),null)},i(n){r||(At(a,n),r=!0)},o(n){Rt(a,n),r=!1},d(n){a&&a.d(n)}}}function _n(o){let r,t;const a=[{name:"upload"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[mn]},$$scope:{ctx:o}};for(let e=0;e<a.length;e+=1)n=Zt(n,a[e]);return r=new We({props:n}),{c(){jt(r.$$.fragment)},l(e){xt(r.$$.fragment,e)},m(e,s){Wt(r,e,s),t=!0},p(e,[s]){const i=s&3?Le(a,[a[0],s&2&&Ne(e[1]),s&1&&{iconNode:e[0]}]):{};s&8&&(i.$$scope={dirty:s,ctx:e}),r.$set(i)},i(e){t||(At(r.$$.fragment,e),t=!0)},o(e){Rt(r.$$.fragment,e),t=!1},d(e){Vt(r,e)}}}function vn(o,r,t){let{$$slots:a={},$$scope:n}=r;const e=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",y1:"3",x2:"12",y2:"15"}]];return o.$$set=s=>{t(1,r=Zt(Zt({},r),ee(s))),"$$scope"in s&&t(3,n=s.$$scope)},r=ee(r),[e,r,a,n]}class gn extends Qt{constructor(r){super(),$t(this,r,vn,_n,Gt,{})}}const bn=gn;function wn(o){let r;const t=o[2].default,a=Fe(t,o,o[3],null);return{c(){a&&a.c()},l(n){a&&a.l(n)},m(n,e){a&&a.m(n,e),r=!0},p(n,e){a&&a.p&&(!r||e&8)&&Me(a,t,n,n[3],r?xe(t,n[3],e,null):je(n[3]),null)},i(n){r||(At(a,n),r=!0)},o(n){Rt(a,n),r=!1},d(n){a&&a.d(n)}}}function yn(o){let r,t;const a=[{name:"x"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[wn]},$$scope:{ctx:o}};for(let e=0;e<a.length;e+=1)n=Zt(n,a[e]);return r=new We({props:n}),{c(){jt(r.$$.fragment)},l(e){xt(r.$$.fragment,e)},m(e,s){Wt(r,e,s),t=!0},p(e,[s]){const i=s&3?Le(a,[a[0],s&2&&Ne(e[1]),s&1&&{iconNode:e[0]}]):{};s&8&&(i.$$scope={dirty:s,ctx:e}),r.$set(i)},i(e){t||(At(r.$$.fragment,e),t=!0)},o(e){Rt(r.$$.fragment,e),t=!1},d(e){Vt(r,e)}}}function kn(o,r,t){let{$$slots:a={},$$scope:n}=r;const e=[["line",{x1:"18",y1:"6",x2:"6",y2:"18"}],["line",{x1:"6",y1:"6",x2:"18",y2:"18"}]];return o.$$set=s=>{t(1,r=Zt(Zt({},r),ee(s))),"$$scope"in s&&t(3,n=s.$$scope)},r=ee(r),[e,r,a,n]}class En extends Qt{constructor(r){super(),$t(this,r,kn,yn,Gt,{})}}const Cn=En;function Sn(o){let r,t,a,n,e,s,i,f,m,v,g,_,h,b,u,d;return e=new bn({props:{size:32,class:"mx-auto text-neutral-400"}}),{c(){r=F("div"),t=F("input"),a=at(),n=F("div"),jt(e.$$.fragment),s=at(),i=F("p"),f=ct(`Drag & drop images here, or
      `),m=F("button"),v=ct("browse"),g=at(),_=F("p"),h=ct("Supports JPG, PNG, WebP"),this.h()},l(p){r=M(p,"DIV",{class:!0,role:!0,tabindex:!0});var E=G(r);t=M(E,"INPUT",{type:!0,accept:!0,class:!0}),a=it(E),n=M(E,"DIV",{class:!0});var A=G(n);xt(e.$$.fragment,A),s=it(A),i=M(A,"P",{class:!0});var T=G(i);f=dt(T,`Drag & drop images here, or
      `),m=M(T,"BUTTON",{type:!0,class:!0});var O=G(m);v=dt(O,"browse"),O.forEach(B),T.forEach(B),g=it(A),_=M(A,"P",{class:!0});var U=G(_);h=dt(U,"Supports JPG, PNG, WebP"),U.forEach(B),A.forEach(B),E.forEach(B),this.h()},h(){C(t,"type","file"),C(t,"accept","image/*"),t.multiple=!0,C(t,"class","hidden svelte-1uzv72t"),t.disabled=o[0],C(m,"type","button"),C(m,"class","link svelte-1uzv72t"),m.disabled=o[0],C(i,"class","text-neutral-700 text-sm sm:text-base svelte-1uzv72t"),C(_,"class","text-xs sm:text-sm text-neutral-500 svelte-1uzv72t"),C(n,"class","content svelte-1uzv72t"),C(r,"class","upload-zone svelte-1uzv72t"),C(r,"role","button"),C(r,"tabindex","0"),Bt(r,"drag-over",o[1]),Bt(r,"disabled",o[0])},m(p,E){It(p,r,E),w(r,t),o[8](t),w(r,a),w(r,n),Wt(e,n,null),w(n,s),w(n,i),w(i,f),w(i,m),w(m,v),w(n,g),w(n,_),w(_,h),b=!0,u||(d=[ht(t,"change",o[4]),ht(m,"click",Je(o[5])),ht(r,"drop",o[3]),ht(r,"dragover",In),ht(r,"dragenter",o[6]),ht(r,"dragleave",o[7]),ht(r,"click",o[5]),ht(r,"keypress",o[9])],u=!0)},p(p,[E]){(!b||E&1)&&(t.disabled=p[0]),(!b||E&1)&&(m.disabled=p[0]),(!b||E&2)&&Bt(r,"drag-over",p[1]),(!b||E&1)&&Bt(r,"disabled",p[0])},i(p){b||(At(e.$$.fragment,p),b=!0)},o(p){Rt(e.$$.fragment,p),b=!1},d(p){p&&B(r),o[8](null),Vt(e),u=!1,re(d)}}}function In(o){o.preventDefault()}function An(o,r,t){let{disabled:a=!1}=r;const n=sr();let e=!1,s;function i(b){var p;b.preventDefault(),t(1,e=!1);const d=Array.from(((p=b.dataTransfer)==null?void 0:p.files)||[]).filter(E=>E.type.startsWith("image/"));d.length>0&&n("filesSelected",d)}function f(b){const u=b.target,d=Array.from(u.files||[]);d.length>0&&n("filesSelected",d),u.value=""}function m(){a||s.click()}function v(){a||t(1,e=!0)}function g(b){const u=b.currentTarget.getBoundingClientRect();(b.clientX<u.left||b.clientX>=u.right||b.clientY<u.top||b.clientY>=u.bottom)&&t(1,e=!1)}function _(b){Oe[b?"unshift":"push"](()=>{s=b,t(2,s)})}const h=b=>b.key==="Enter"&&m();return o.$$set=b=>{"disabled"in b&&t(0,a=b.disabled)},[a,e,s,i,f,m,v,g,_,h]}class Rn extends Qt{constructor(r){super(),$t(this,r,An,Sn,Gt,{disabled:0})}}const jr=[[2,1,1,2,0,1,0,1,0,10,4,4,1,5,16,17,3],[2,1,1,1,0,1,0,1,0,1,0,1,0,1,0,10,5,4,1,1,1,4,16,16,2,{relativeTo:22,add:2},16,17,2],[2,1,1,1,0,0,1,0,0,2,0,1,0,1,0,1,0,2,0,1,0,10,5,5,1,1,1,1,1,4,16,16,3,{relativeTo:30,add:3},18,16,2,{relativeTo:30,add:5},17,16,3],[2,1,1,1,0,0,0,1,0,0,1,0,0,2,0,1,0,1,0,2,0,1,0,1,0,1,0,2,0,1,0,1,0,12,8,4,1,1,1,2,1,1,1,2,1,4,16,16,3,{relativeTo:46,add:3},18,16,2,{relativeTo:50,add:2},17,16,3,{relativeTo:54,add:40},16,17,2,{relativeTo:58,add:3},17,17,2]],mr=[18,30,42,66];function Tn(o){const r=mr.indexOf(o);if(r===-1)throw new Error(`Invalid photo count: ${o}. Must be one of: ${mr.join(", ")}`);return jr[r]}function xr(o,r){let t=0;for(const a of o.timeRanges){const n=t+a.photoCount;if(r<n){const e=r-t;return zn(a.startTime,a.incrementPattern,e)}t=n}return null}function zn(o,r,t){const[a,n]=o.split(":").map(Number),s=[a*60+n];for(let f=0;f<t&&f<r.length;f++){const m=r[f];let v;if(typeof m=="number")v=s[s.length-1]+m;else{if(m.relativeTo<0||m.relativeTo>=s.length)throw new Error(`Invalid relative reference: index ${m.relativeTo} is out of bounds`);v=s[m.relativeTo]+m.add}s.push(v)}const i=s[s.length-1];return On(i)}function On(o){const r=Math.floor(o/60)%24,t=o%60,a=r>=12?"PM":"AM";return`${r%12||12}:${String(t).padStart(2,"0")}${a}`}const Dn={"4:3":4/3,"3:4":3/4,"1:1":1},Lt=.05,Be={rotation:0,aspectRatio:"none",crop:{x:0,y:0,width:1,height:1}};function ar(o){return o==="none"?null:Dn[o]??4/3}function ke(o,r=1){if(o==="none")return{x:0,y:0,width:1,height:1};const t=ar(o);if(t===null)return;const a=t*r;let n,e;a>=1?(e=1,n=Math.min(1,a)):(n=1,e=Math.min(1,1/a));const s=Math.max(0,(1-n)/2),i=Math.max(0,(1-e)/2);return Ue({x:s,y:i,width:n,height:e})}function Ke(o,r,t=1){if(r==="none")return o?Ue(o):ke("none",t);if(!o)return ke(r,t);const a=ar(r);if(a===null)return Ue(o);const n=a*t;let{x:e,y:s,width:i,height:f}=o;i=Math.max(i,Lt),f=Math.max(f,Lt);const m=f*n,v=i/n;return m<=1?i=m:(f=Math.min(v,1),i=f*n),i=Math.min(i,1),f=Math.min(f,1),{x:e,y:s}=Wr({x:e,y:s},i,f),{x:e,y:s,width:i,height:f}}function tr(o,r,t){return Math.min(Math.max(o,r),t)}function Wr(o,r,t){return{x:tr(o.x,0,1-r),y:tr(o.y,0,1-t)}}function Ue(o){const r=tr(o.width,Lt,1),t=tr(o.height,Lt,1),{x:a,y:n}=Wr({x:o.x,y:o.y},r,t);return{x:a,y:n,width:r,height:t}}function nr(o=Be){return{rotation:o.rotation,aspectRatio:o.aspectRatio,crop:o.crop?{...o.crop}:void 0}}function ir(o,r){const t=o.naturalWidth||o.width,a=o.naturalHeight||o.height,n=(r==null?void 0:r.rotation)??0,e=(r==null?void 0:r.aspectRatio)??"none",s=document.createElement("canvas"),i=n===90||n===270;s.width=i?a:t,s.height=i?t:a;const f=s.height/s.width||1;let m;e==="none"?m=r!=null&&r.crop?Ue(r.crop):void 0:m=r!=null&&r.crop?Ue(r.crop):Ke(void 0,e,f);const v=s.getContext("2d");if(!v)throw new Error("Could not create rotation canvas context");if(v.translate(s.width/2,s.height/2),v.rotate(n*Math.PI/180),v.drawImage(o,-t/2,-a/2,t,a),!m)return s;const g=Math.max(1,Math.round(s.width*m.width)),_=Math.max(1,Math.round(s.height*m.height)),h=Math.round(s.width*m.x),b=Math.round(s.height*m.y),u=document.createElement("canvas");u.width=g,u.height=_;const d=u.getContext("2d");if(!d)throw new Error("Could not create output canvas context");return d.drawImage(s,h,b,g,_,0,0,u.width,u.height),u}function Pn(o,r){const t=o.naturalWidth||o.width,a=o.naturalHeight||o.height,n=r===90||r===270,e=document.createElement("canvas");e.width=n?a:t,e.height=n?t:a;const s=e.getContext("2d");if(!s)throw new Error("Could not create rotation canvas context");return s.translate(e.width/2,e.height/2),s.rotate(r*Math.PI/180),s.drawImage(o,-t/2,-a/2,t,a),e}function _r(o,r,t){const a=o.slice();a[31]=r[t],a[35]=t;const n=xr(a[4],a[35]);a[32]=n;const e=a[1][a[35]]??Be;return a[33]=e,a}function vr(o){let r,t,a,n=o[0].length+"",e,s,i=o[0].length===1?"image":"images",f,m,v,g,_,h,b,u,d,p=[],E=new Map,A,T,O,U=o[2]&&gr(o),D=o[0];const W=z=>z[35];for(let z=0;z<D.length;z+=1){let Z=_r(o,D,z),et=W(Z);E.set(et,p[z]=br(et,Z))}return{c(){r=F("div"),t=F("div"),a=F("div"),e=ct(n),s=at(),f=ct(i),m=ct(" uploaded"),v=at(),g=F("div"),_=F("button"),h=ct("Clear all"),b=at(),U&&U.c(),u=at(),d=F("div");for(let z=0;z<p.length;z+=1)p[z].c();this.h()},l(z){r=M(z,"DIV",{class:!0});var Z=G(r);t=M(Z,"DIV",{class:!0});var et=G(t);a=M(et,"DIV",{class:!0});var R=G(a);e=dt(R,n),s=it(R),f=dt(R,i),m=dt(R," uploaded"),R.forEach(B),v=it(et),g=M(et,"DIV",{class:!0});var P=G(g);_=M(P,"BUTTON",{type:!0,class:!0});var c=G(_);h=dt(c,"Clear all"),c.forEach(B),b=it(P),U&&U.l(P),P.forEach(B),et.forEach(B),u=it(Z),d=M(Z,"DIV",{class:!0});var H=G(d);for(let J=0;J<p.length;J+=1)p[J].l(H);H.forEach(B),Z.forEach(B),this.h()},h(){C(a,"class","text-sm text-neutral-600"),C(_,"type","button"),C(_,"class","text-sm text-neutral-500 hover:text-red-600 transition-colors"),C(g,"class","button-group svelte-1isun97"),C(t,"class","header-actions svelte-1isun97"),C(d,"class","image-grid-responsive svelte-1isun97"),C(r,"class","space-y-4")},m(z,Z){It(z,r,Z),w(r,t),w(t,a),w(a,e),w(a,s),w(a,f),w(a,m),w(t,v),w(t,g),w(g,_),w(_,h),w(g,b),U&&U.m(g,null),w(r,u),w(r,d);for(let et=0;et<p.length;et+=1)p[et]&&p[et].m(d,null);A=!0,T||(O=ht(_,"click",o[13]),T=!0)},p(z,Z){(!A||Z[0]&1)&&n!==(n=z[0].length+"")&&Jt(e,n),(!A||Z[0]&1)&&i!==(i=z[0].length===1?"image":"images")&&Jt(f,i),z[2]?U?U.p(z,Z):(U=gr(z),U.c(),U.m(g,null)):U&&(U.d(1),U=null),Z[0]&516083&&(D=z[0],De(),p=qr(p,Z,W,1,z,D,E,d,Hr,br,null,_r),Pe())},i(z){if(!A){for(let Z=0;Z<D.length;Z+=1)At(p[Z]);A=!0}},o(z){for(let Z=0;Z<p.length;Z+=1)Rt(p[Z]);A=!1},d(z){z&&B(r),U&&U.d();for(let Z=0;Z<p.length;Z+=1)p[Z].d();T=!1,O()}}}function gr(o){let r,t,a,n,e;return{c(){r=F("button"),t=ct("Download images"),this.h()},l(s){r=M(s,"BUTTON",{type:!0,class:!0});var i=G(r);t=dt(i,"Download images"),i.forEach(B),this.h()},h(){C(r,"type","button"),C(r,"class","text-sm bg-blue-500 hover:bg-blue-600 text-white transition-colors disabled:bg-neutral-300 disabled:cursor-not-allowed px-3 py-1.5 rounded"),r.disabled=a=!o[3]},m(s,i){It(s,r,i),w(r,t),n||(e=ht(r,"click",function(){Gr(o[2])&&o[2].apply(this,arguments)}),n=!0)},p(s,i){o=s,i[0]&8&&a!==(a=!o[3])&&(r.disabled=a)},d(s){s&&B(r),n=!1,e()}}}function Bn(o){let r,t;return{c(){r=F("p"),t=ct("Not assigned"),this.h()},l(a){r=M(a,"P",{class:!0});var n=G(r);t=dt(n,"Not assigned"),n.forEach(B),this.h()},h(){C(r,"class","svelte-1isun97")},m(a,n){It(a,r,n),w(r,t)},p:oe,d(a){a&&B(r)}}}function Un(o){let r,t=o[32]+"",a;return{c(){r=F("p"),a=ct(t),this.h()},l(n){r=M(n,"P",{class:!0});var e=G(r);a=dt(e,t),e.forEach(B),this.h()},h(){C(r,"class","svelte-1isun97")},m(n,e){It(n,r,e),w(r,a)},p(n,e){e[0]&17&&t!==(t=n[32]+"")&&Jt(a,t)},d(n){n&&B(r)}}}function br(o,r){let t,a,n,e,s,i,f,m,v,g,_,h,b,u,d,p,E,A,T,O,U;function D(J,q){return J[32]?Un:Bn}let W=D(r),z=W(r);function Z(){return r[19](r[35])}function et(...J){return r[20](r[35],...J)}d=new Cn({props:{size:16}});function R(){return r[21](r[35])}function P(...J){return r[22](r[35],...J)}function c(...J){return r[23](r[35],...J)}function H(...J){return r[24](r[35],...J)}return{key:o,first:null,c(){t=F("div"),a=F("div"),n=F("img"),i=at(),f=F("div"),z.c(),m=at(),v=F("div"),g=ct("Click to edit"),b=at(),u=F("button"),jt(d.$$.fragment),E=at(),this.h()},l(J){t=M(J,"DIV",{class:!0,draggable:!0,role:!0,tabindex:!0,"aria-label":!0});var q=G(t);a=M(q,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0,style:!0});var x=G(a);n=M(x,"IMG",{src:!0,alt:!0,class:!0,draggable:!0}),i=it(x),f=M(x,"DIV",{class:!0});var j=G(f);z.l(j),j.forEach(B),m=it(x),v=M(x,"DIV",{class:!0,"aria-hidden":!0});var nt=G(v);g=dt(nt,"Click to edit"),nt.forEach(B),x.forEach(B),b=it(q),u=M(q,"BUTTON",{type:!0,class:!0,"aria-label":!0});var I=G(u);xt(d.$$.fragment,I),I.forEach(B),E=it(q),q.forEach(B),this.h()},h(){Qe(n.src,e=r[5][r[35]]??r[9][r[35]]??r[6][r[35]])||C(n,"src",e),C(n,"alt",s=r[31].name),C(n,"class","image-preview svelte-1isun97"),C(n,"draggable","false"),C(f,"class","assignment-info-mobile svelte-1isun97"),C(v,"class","edit-indicator svelte-1isun97"),C(v,"aria-hidden","true"),C(a,"class","image-wrapper svelte-1isun97"),C(a,"role","button"),C(a,"tabindex","0"),C(a,"aria-label",_="Edit image "+(r[35]+1)),C(a,"style",h=`aspect-ratio: ${r[11](r[33])};`),Bt(a,"auto-aspect",!!r[33].crop),C(u,"type","button"),C(u,"class","remove-btn-mobile svelte-1isun97"),C(u,"aria-label",p="Remove "+r[31].name),C(t,"class","image-card-mobile group svelte-1isun97"),C(t,"draggable","true"),C(t,"role","button"),C(t,"tabindex","0"),C(t,"aria-label",A="Drag to reorder image "+(r[35]+1)),Bt(t,"drag-over",r[8]===r[35]),Bt(t,"is-dragging",r[7]===r[35]),this.first=t},m(J,q){It(J,t,q),w(t,a),w(a,n),w(a,i),w(a,f),z.m(f,null),w(a,m),w(a,v),w(v,g),w(t,b),w(t,u),Wt(d,u,null),w(t,E),T=!0,O||(U=[ht(a,"click",Je(Z)),ht(a,"keydown",et),ht(u,"click",R),ht(t,"dragstart",P),ht(t,"dragend",r[15]),ht(t,"dragover",c),ht(t,"dragleave",r[17]),ht(t,"drop",H)],O=!0)},p(J,q){r=J,(!T||q[0]&609&&!Qe(n.src,e=r[5][r[35]]??r[9][r[35]]??r[6][r[35]]))&&C(n,"src",e),(!T||q[0]&1&&s!==(s=r[31].name))&&C(n,"alt",s),W===(W=D(r))&&z?z.p(r,q):(z.d(1),z=W(r),z&&(z.c(),z.m(f,null))),(!T||q[0]&1&&_!==(_="Edit image "+(r[35]+1)))&&C(a,"aria-label",_),(!T||q[0]&3&&h!==(h=`aspect-ratio: ${r[11](r[33])};`))&&C(a,"style",h),(!T||q[0]&3)&&Bt(a,"auto-aspect",!!r[33].crop),(!T||q[0]&1&&p!==(p="Remove "+r[31].name))&&C(u,"aria-label",p),(!T||q[0]&1&&A!==(A="Drag to reorder image "+(r[35]+1)))&&C(t,"aria-label",A),(!T||q[0]&257)&&Bt(t,"drag-over",r[8]===r[35]),(!T||q[0]&129)&&Bt(t,"is-dragging",r[7]===r[35])},i(J){T||(At(d.$$.fragment,J),T=!0)},o(J){Rt(d.$$.fragment,J),T=!1},d(J){J&&B(t),z.d(),Vt(d),O=!1,re(U)}}}function Ln(o){let r,t,a=o[0].length>0&&vr(o);return{c(){a&&a.c(),r=fe()},l(n){a&&a.l(n),r=fe()},m(n,e){a&&a.m(n,e),It(n,r,e),t=!0},p(n,e){n[0].length>0?a?(a.p(n,e),e[0]&1&&At(a,1)):(a=vr(n),a.c(),At(a,1),a.m(r.parentNode,r)):a&&(De(),Rt(a,1,1,()=>{a=null}),Pe())},i(n){t||(At(a),t=!0)},o(n){Rt(a),t=!1},d(n){a&&a.d(n),n&&B(r)}}}async function Nn(o){return new Promise((r,t)=>{const a=new Image;a.onload=()=>{URL.revokeObjectURL(a.src),r(a)},a.onerror=()=>{URL.revokeObjectURL(a.src),t(new Error(`Failed to load image: ${o.name}`))},a.src=URL.createObjectURL(o)})}function Fn(o,r,t){let{files:a=[]}=r,{imageAdjustments:n=[]}=r,{onProcess:e=null}=r,{canProcess:s=!1}=r,{config:i}=r,{previewOverrides:f=[]}=r;const m=sr();function v(x){m("edit",x)}let g=null,_=null;const h={"4:3":"4 / 3","3:4":"3 / 4","1:1":"1 / 1",none:"auto"};function b(x){return h[x]??"auto"}function u(x){return x.aspectRatio==="none"||x.crop?"auto":b(x.aspectRatio)}let d=[],p=[],E=0;async function A(x,j){const nt=await Nn(x),I=ir(nt,j),L=600,lt=Math.max(I.width,I.height);let st=I;if(lt>L){const tt=L/lt,vt=document.createElement("canvas");vt.width=Math.max(1,Math.round(I.width*tt)),vt.height=Math.max(1,Math.round(I.height*tt));const ft=vt.getContext("2d");ft&&(ft.imageSmoothingEnabled=!0,ft.imageSmoothingQuality="high",ft.drawImage(I,0,0,vt.width,vt.height),st=vt)}return new Promise((tt,vt)=>{st.toBlob(ft=>{ft?tt(URL.createObjectURL(ft)):vt(new Error("Failed to generate preview"))},"image/jpeg",.9)})}async function T(){if(typeof window>"u")return;const x=++E;if(a.length===0){p.forEach(j=>URL.revokeObjectURL(j)),t(9,p=[]);return}try{const j=await Promise.all(a.map((nt,I)=>A(nt,n[I])));if(x!==E){j.forEach(nt=>URL.revokeObjectURL(nt));return}p.forEach(nt=>URL.revokeObjectURL(nt)),t(9,p=j)}catch(j){console.error("Failed to generate previews:",j)}}Fr(()=>{d.forEach(x=>URL.revokeObjectURL(x)),p.forEach(x=>URL.revokeObjectURL(x))});function O(x){m("remove",x)}function U(){m("clearAll")}function D(x,j){t(7,g=j),x.dataTransfer.effectAllowed="move",x.dataTransfer.setData("text/plain",j.toString()),x.dataTransfer&&(x.dataTransfer.dropEffect="move")}function W(){t(7,g=null),t(8,_=null)}function z(x,j){x.preventDefault(),x.dataTransfer.dropEffect="move",g!==null&&g!==j&&t(8,_=j)}function Z(){t(8,_=null)}function et(x,j){if(x.preventDefault(),g===null||g===j){t(8,_=null);return}m("reorder",{from:g,to:j}),t(7,g=null),t(8,_=null)}const R=x=>v(x),P=(x,j)=>j.key==="Enter"&&(j.preventDefault(),v(x)),c=x=>O(x),H=(x,j)=>D(j,x),J=(x,j)=>z(j,x),q=(x,j)=>et(j,x);return o.$$set=x=>{"files"in x&&t(0,a=x.files),"imageAdjustments"in x&&t(1,n=x.imageAdjustments),"onProcess"in x&&t(2,e=x.onProcess),"canProcess"in x&&t(3,s=x.canProcess),"config"in x&&t(4,i=x.config),"previewOverrides"in x&&t(5,f=x.previewOverrides)},o.$$.update=()=>{o.$$.dirty[0]&65&&(d.forEach(x=>URL.revokeObjectURL(x)),t(6,d=a.map(x=>URL.createObjectURL(x))))},T(),[a,n,e,s,i,f,d,g,_,p,v,u,O,U,D,W,z,Z,et,R,P,c,H,J,q]}class Mn extends Qt{constructor(r){super(),$t(this,r,Fn,Ln,Gt,{files:0,imageAdjustments:1,onProcess:2,canProcess:3,config:4,previewOverrides:5},null,[-1,-1])}}function jn(o){const r=o.slice(),t=r[0].timeRanges[0];r[12]=t;const a=Hn(r[0],r[12]);return r[13]=a,r}function wr(o){let r,t,a,n,e,s,i,f,m,v,g,_,h,b,u,d,p,E,A,T,O,U,D,W,z;return{c(){r=F("div"),t=F("div"),a=F("div"),n=F("label"),e=ct("Start Time"),i=at(),f=F("input"),v=at(),g=F("div"),_=F("label"),h=ct("Number of Photos"),b=at(),u=F("select"),d=F("option"),p=ct("18"),E=F("option"),A=ct("30"),T=F("option"),O=ct("42"),U=F("option"),D=ct("66"),this.h()},l(Z){r=M(Z,"DIV",{class:!0});var et=G(r);t=M(et,"DIV",{class:!0});var R=G(t);a=M(R,"DIV",{class:!0});var P=G(a);n=M(P,"LABEL",{for:!0,class:!0});var c=G(n);e=dt(c,"Start Time"),c.forEach(B),i=it(P),f=M(P,"INPUT",{id:!0,type:!0,class:!0}),P.forEach(B),v=it(R),g=M(R,"DIV",{class:!0});var H=G(g);_=M(H,"LABEL",{for:!0,class:!0});var J=G(_);h=dt(J,"Number of Photos"),J.forEach(B),b=it(H),u=M(H,"SELECT",{id:!0,class:!0});var q=G(u);d=M(q,"OPTION",{});var x=G(d);p=dt(x,"18"),x.forEach(B),E=M(q,"OPTION",{});var j=G(E);A=dt(j,"30"),j.forEach(B),T=M(q,"OPTION",{});var nt=G(T);O=dt(nt,"42"),nt.forEach(B),U=M(q,"OPTION",{});var I=G(U);D=dt(I,"66"),I.forEach(B),q.forEach(B),H.forEach(B),R.forEach(B),et.forEach(B),this.h()},h(){C(n,"for",s="startTime-"+o[0].timeRanges[0].id),C(n,"class","svelte-2nvjso"),C(f,"id",m="startTime-"+o[0].timeRanges[0].id),C(f,"type","time"),f.required=!0,C(f,"class","svelte-2nvjso"),C(a,"class","form-field svelte-2nvjso"),C(_,"for","photoCount"),C(_,"class","svelte-2nvjso"),d.__value=18,d.value=d.__value,E.__value=30,E.value=E.__value,T.__value=42,T.value=T.__value,U.__value=66,U.value=U.__value,C(u,"id","photoCount"),C(u,"class","svelte-2nvjso"),o[1]===void 0&&$e(()=>o[11].call(u)),C(g,"class","form-field svelte-2nvjso"),C(t,"class","space-y-3"),C(r,"class","time-range-card svelte-2nvjso")},m(Z,et){It(Z,r,et),w(r,t),w(t,a),w(a,n),w(n,e),w(a,i),w(a,f),Mt(f,o[0].timeRanges[0].startTime),w(t,v),w(t,g),w(g,_),w(_,h),w(g,b),w(g,u),w(u,d),w(d,p),w(u,E),w(E,A),w(u,T),w(T,O),w(u,U),w(U,D),de(u,o[1],!0),W||(z=[ht(f,"input",o[10]),ht(u,"change",o[11])],W=!0)},p(Z,et){et&1&&s!==(s="startTime-"+Z[0].timeRanges[0].id)&&C(n,"for",s),et&1&&m!==(m="startTime-"+Z[0].timeRanges[0].id)&&C(f,"id",m),et&1&&Mt(f,Z[0].timeRanges[0].startTime),et&2&&de(u,Z[1])},d(Z){Z&&B(r),W=!1,re(z)}}}function yr(o){let r,t,a,n,e,s;return{c(){r=F("div"),t=ct("Total photos assigned: "),a=F("span"),n=ct(o[3]),e=ct(`
        / `),s=ct(o[2]),this.h()},l(i){r=M(i,"DIV",{class:!0});var f=G(r);t=dt(f,"Total photos assigned: "),a=M(f,"SPAN",{});var m=G(a);n=dt(m,o[3]),m.forEach(B),e=dt(f,`
        / `),s=dt(f,o[2]),f.forEach(B),this.h()},h(){Bt(a,"text-red-600",o[4]),Bt(a,"font-medium",o[4]),C(r,"class","text-sm text-neutral-600")},m(i,f){It(i,r,f),w(r,t),w(r,a),w(a,n),w(r,e),w(r,s)},p(i,f){f&8&&Jt(n,i[3]),f&16&&Bt(a,"text-red-600",i[4]),f&16&&Bt(a,"font-medium",i[4]),f&4&&Jt(s,i[2])},d(i){i&&B(r)}}}function kr(o){let r,t;return{c(){r=F("p"),t=ct("Total photos in ranges must equal uploaded images"),this.h()},l(a){r=M(a,"P",{class:!0});var n=G(r);t=dt(n,"Total photos in ranges must equal uploaded images"),n.forEach(B),this.h()},h(){C(r,"class","text-sm text-red-600")},m(a,n){It(a,r,n),w(r,t)},d(a){a&&B(r)}}}function Er(o){let r;function t(e,s){return e[13]?Vn:Wn}let a=t(o),n=a(o);return{c(){n.c(),r=fe()},l(e){n.l(e),r=fe()},m(e,s){n.m(e,s),It(e,r,s)},p(e,s){a===(a=t(e))&&n?n.p(e,s):(n.d(1),n=a(e),n&&(n.c(),n.m(r.parentNode,r)))},d(e){n.d(e),e&&B(r)}}}function xn(o){let r,t;return{c(){r=F("p"),t=ct("Fill in all fields to see preview..."),this.h()},l(a){r=M(a,"P",{class:!0});var n=G(r);t=dt(n,"Fill in all fields to see preview..."),n.forEach(B),this.h()},h(){C(r,"class","text-sm text-neutral-400 italic")},m(a,n){It(a,r,n),w(r,t)},p:oe,d(a){a&&B(r)}}}function Wn(o){let r,t;return{c(){r=F("p"),t=ct("Invalid configuration"),this.h()},l(a){r=M(a,"P",{class:!0});var n=G(r);t=dt(n,"Invalid configuration"),n.forEach(B),this.h()},h(){C(r,"class","text-sm text-neutral-400 italic")},m(a,n){It(a,r,n),w(r,t)},p:oe,d(a){a&&B(r)}}}function Vn(o){let r,t=o[13]+"",a;return{c(){r=F("pre"),a=ct(t),this.h()},l(n){r=M(n,"PRE",{class:!0});var e=G(r);a=dt(e,t),e.forEach(B),this.h()},h(){C(r,"class","preview-text svelte-2nvjso")},m(n,e){It(n,r,e),w(r,a)},p(n,e){e&1&&t!==(t=n[13]+"")&&Jt(a,t)},d(n){n&&B(r)}}}function Zn(o){let r,t,a,n,e,s,i,f,m,v,g,_,h,b,u,d,p,E,A,T,O,U,D,W,z,Z,et,R,P,c,H,J,q,x,j,nt,I,L,lt,st,tt,vt,ft,ut,mt,pt,gt=o[0].timeRanges.length>0&&wr(o),wt=o[2]>0&&yr(o),kt=o[4]&&o[2]>0&&kr();function l(y,k){if(!y[0].date||!y[0].street||!y[0].city||!y[0].state||!y[0].zip)return xn;if(y[0].timeRanges.length>0)return Er}function Q(y,k){return k===Er?jn(y):y}let X=l(o),S=X&&X(Q(o,X));return{c(){r=F("div"),t=F("div"),a=F("label"),n=ct("Date"),e=at(),s=F("input"),i=at(),f=F("div"),m=F("div"),v=F("label"),g=ct("Street Address"),_=at(),h=F("input"),b=at(),u=F("div"),d=F("div"),p=F("label"),E=ct("City"),A=at(),T=F("input"),O=at(),U=F("div"),D=F("label"),W=ct("State"),z=at(),Z=F("input"),et=at(),R=F("div"),P=F("label"),c=ct("ZIP Code"),H=at(),J=F("input"),q=at(),x=F("div"),j=F("span"),nt=ct("Time Range"),I=at(),gt&&gt.c(),L=at(),wt&&wt.c(),lt=at(),kt&&kt.c(),st=at(),tt=F("div"),vt=F("p"),ft=ct("Preview"),ut=at(),S&&S.c(),this.h()},l(y){r=M(y,"DIV",{class:!0});var k=G(r);t=M(k,"DIV",{class:!0});var V=G(t);a=M(V,"LABEL",{for:!0,class:!0});var Y=G(a);n=dt(Y,"Date"),Y.forEach(B),e=it(V),s=M(V,"INPUT",{id:!0,type:!0,class:!0}),V.forEach(B),i=it(k),f=M(k,"DIV",{class:!0});var N=G(f);m=M(N,"DIV",{class:!0});var $=G(m);v=M($,"LABEL",{for:!0,class:!0});var ot=G(v);g=dt(ot,"Street Address"),ot.forEach(B),_=it($),h=M($,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),$.forEach(B),b=it(N),u=M(N,"DIV",{class:!0});var K=G(u);d=M(K,"DIV",{class:!0});var rt=G(d);p=M(rt,"LABEL",{for:!0,class:!0});var yt=G(p);E=dt(yt,"City"),yt.forEach(B),A=it(rt),T=M(rt,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),rt.forEach(B),O=it(K),U=M(K,"DIV",{class:!0});var _t=G(U);D=M(_t,"LABEL",{for:!0,class:!0});var Ot=G(D);W=dt(Ot,"State"),Ot.forEach(B),z=it(_t),Z=M(_t,"INPUT",{id:!0,type:!0,placeholder:!0,maxlength:!0,class:!0}),_t.forEach(B),et=it(K),R=M(K,"DIV",{class:!0});var Tt=G(R);P=M(Tt,"LABEL",{for:!0,class:!0});var Ct=G(P);c=dt(Ct,"ZIP Code"),Ct.forEach(B),H=it(Tt),J=M(Tt,"INPUT",{id:!0,type:!0,placeholder:!0,maxlength:!0,class:!0}),Tt.forEach(B),K.forEach(B),N.forEach(B),q=it(k),x=M(k,"DIV",{class:!0});var Et=G(x);j=M(Et,"SPAN",{class:!0});var bt=G(j);nt=dt(bt,"Time Range"),bt.forEach(B),I=it(Et),gt&&gt.l(Et),L=it(Et),wt&&wt.l(Et),lt=it(Et),kt&&kt.l(Et),Et.forEach(B),st=it(k),tt=M(k,"DIV",{class:!0});var St=G(tt);vt=M(St,"P",{class:!0});var Nt=G(vt);ft=dt(Nt,"Preview"),Nt.forEach(B),ut=it(St),S&&S.l(St),St.forEach(B),k.forEach(B),this.h()},h(){C(a,"for","date"),C(a,"class","svelte-2nvjso"),C(s,"id","date"),C(s,"type","date"),s.required=!0,C(s,"class","svelte-2nvjso"),C(t,"class","form-field svelte-2nvjso"),C(v,"for","street"),C(v,"class","svelte-2nvjso"),C(h,"id","street"),C(h,"type","text"),C(h,"placeholder","101 Dunster St"),h.required=!0,C(h,"class","svelte-2nvjso"),C(m,"class","form-field full-width svelte-2nvjso"),C(p,"for","city"),C(p,"class","svelte-2nvjso"),C(T,"id","city"),C(T,"type","text"),C(T,"placeholder","Cambridge"),T.required=!0,C(T,"class","svelte-2nvjso"),C(d,"class","form-field svelte-2nvjso"),C(D,"for","state"),C(D,"class","svelte-2nvjso"),C(Z,"id","state"),C(Z,"type","text"),C(Z,"placeholder","MA"),C(Z,"maxlength","2"),Z.required=!0,C(Z,"class","svelte-2nvjso"),C(U,"class","form-field svelte-2nvjso"),C(P,"for","zip"),C(P,"class","svelte-2nvjso"),C(J,"id","zip"),C(J,"type","text"),C(J,"placeholder","02138"),C(J,"maxlength","10"),J.required=!0,C(J,"class","svelte-2nvjso"),C(R,"class","form-field svelte-2nvjso"),C(u,"class","address-row svelte-2nvjso"),C(f,"class","form-grid-responsive svelte-2nvjso"),C(j,"class","text-sm text-neutral-500 font-medium"),C(x,"class","space-y-3"),C(vt,"class","text-sm text-neutral-500 mb-3"),C(tt,"class","preview-section svelte-2nvjso"),C(r,"class","space-y-4")},m(y,k){It(y,r,k),w(r,t),w(t,a),w(a,n),w(t,e),w(t,s),Mt(s,o[0].date),w(r,i),w(r,f),w(f,m),w(m,v),w(v,g),w(m,_),w(m,h),Mt(h,o[0].street),w(f,b),w(f,u),w(u,d),w(d,p),w(p,E),w(d,A),w(d,T),Mt(T,o[0].city),w(u,O),w(u,U),w(U,D),w(D,W),w(U,z),w(U,Z),Mt(Z,o[0].state),w(u,et),w(u,R),w(R,P),w(P,c),w(R,H),w(R,J),Mt(J,o[0].zip),w(r,q),w(r,x),w(x,j),w(j,nt),w(x,I),gt&&gt.m(x,null),w(x,L),wt&&wt.m(x,null),w(x,lt),kt&&kt.m(x,null),w(r,st),w(r,tt),w(tt,vt),w(vt,ft),w(tt,ut),S&&S.m(tt,null),mt||(pt=[ht(s,"input",o[5]),ht(h,"input",o[6]),ht(T,"input",o[7]),ht(Z,"input",o[8]),ht(J,"input",o[9])],mt=!0)},p(y,[k]){k&1&&Mt(s,y[0].date),k&1&&h.value!==y[0].street&&Mt(h,y[0].street),k&1&&T.value!==y[0].city&&Mt(T,y[0].city),k&1&&Z.value!==y[0].state&&Mt(Z,y[0].state),k&1&&J.value!==y[0].zip&&Mt(J,y[0].zip),y[0].timeRanges.length>0?gt?gt.p(y,k):(gt=wr(y),gt.c(),gt.m(x,L)):gt&&(gt.d(1),gt=null),y[2]>0?wt?wt.p(y,k):(wt=yr(y),wt.c(),wt.m(x,lt)):wt&&(wt.d(1),wt=null),y[4]&&y[2]>0?kt||(kt=kr(),kt.c(),kt.m(x,null)):kt&&(kt.d(1),kt=null),X===(X=l(y))&&S?S.p(Q(y,X),k):(S&&S.d(1),S=X&&X(Q(y,X)),S&&(S.c(),S.m(tt,null)))},i:oe,o:oe,d(y){y&&B(r),gt&&gt.d(),wt&&wt.d(),kt&&kt.d(),S&&S.d(),mt=!1,re(pt)}}}function qn(o){const[r,t]=o.split(":").map(Number),a=r>=12?"PM":"AM";return`${r%12||12}:${String(t).padStart(2,"0")}${a}`}function Hn(o,r){if(!o.date||!o.street||!o.city||!o.state||!o.zip)return null;const[t,a,n]=o.date.split("-"),e=`${a}/${n}/${t}`,s=qn(r.startTime);return`${e} ${s}
${o.street.toUpperCase()}
${o.city.toUpperCase()}, ${o.state.toUpperCase()} ${o.zip}`}function Gn(o,r,t){let a,n,{config:e}=r,{selectedPhotoCount:s}=r,{totalImages:i=0}=r;function f(){e.date=this.value,t(0,e)}function m(){e.street=this.value,t(0,e)}function v(){e.city=this.value,t(0,e)}function g(){e.state=this.value,t(0,e)}function _(){e.zip=this.value,t(0,e)}function h(){e.timeRanges[0].startTime=this.value,t(0,e)}function b(){s=Ye(this),t(1,s)}return o.$$set=u=>{"config"in u&&t(0,e=u.config),"selectedPhotoCount"in u&&t(1,s=u.selectedPhotoCount),"totalImages"in u&&t(2,i=u.totalImages)},o.$$.update=()=>{o.$$.dirty&1&&t(3,a=e.timeRanges.reduce((u,d)=>u+d.photoCount,0)),o.$$.dirty&12&&t(4,n=i>0&&a!==i)},[e,s,i,a,n,f,m,v,g,_,h,b]}class Xn extends Qt{constructor(r){super(),$t(this,r,Gn,Zn,Gt,{config:0,selectedPhotoCount:1,totalImages:2})}}function Cr(o,r,t){const a=o.slice();return a[32]=r[t],a}function Sr(o){let r,t,a,n,e,s,i,f,m,v,g;return{c(){r=F("div"),t=F("label"),a=ct("Choose Color"),n=at(),e=F("div"),s=F("input"),f=at(),m=F("input"),this.h()},l(_){r=M(_,"DIV",{class:!0});var h=G(r);t=M(h,"LABEL",{for:!0,class:!0});var b=G(t);a=dt(b,"Choose Color"),b.forEach(B),n=it(h),e=M(h,"DIV",{class:!0});var u=G(e);s=M(u,"INPUT",{id:!0,type:!0,class:!0}),f=it(u),m=M(u,"INPUT",{type:!0,placeholder:!0,class:!0,pattern:!0}),u.forEach(B),h.forEach(B),this.h()},h(){C(t,"for","textColorPicker"),C(t,"class","color-picker-label svelte-1q0s692"),C(s,"id","textColorPicker"),C(s,"type","color"),s.value=i=o[0].textColor,C(s,"class","color-picker svelte-1q0s692"),C(m,"type","text"),C(m,"placeholder","#FFFFFF"),C(m,"class","color-hex-input svelte-1q0s692"),C(m,"pattern","#[0-9A-Fa-f]6"),C(e,"class","color-picker-container svelte-1q0s692"),C(r,"class","color-picker-wrapper svelte-1q0s692")},m(_,h){It(_,r,h),w(r,t),w(t,a),w(r,n),w(r,e),w(e,s),w(e,f),w(e,m),Mt(m,o[0].textColor),v||(g=[ht(s,"change",o[8]),ht(m,"input",o[22]),ht(m,"input",o[10])],v=!0)},p(_,h){h[0]&1&&i!==(i=_[0].textColor)&&(s.value=i),h[0]&1&&m.value!==_[0].textColor&&Mt(m,_[0].textColor)},d(_){_&&B(r),v=!1,re(g)}}}function Ir(o){let r,t,a,n,e,s,i,f,m,v,g,_,h,b,u,d,p,E,A,T,O,U,D,W,z,Z,et,R,P,c,H,J,q,x,j,nt,I,L,lt,st,tt=o[3]&&Ar(o),vt=o[5],ft=[];for(let ut=0;ut<vt.length;ut+=1)ft[ut]=Rr(Cr(o,vt,ut));return L=Mr(o[16][0]),{c(){r=F("div"),t=F("div"),a=F("label"),n=ct("Border Color"),e=at(),s=F("div"),i=F("div"),f=F("label"),m=F("input"),v=at(),g=F("div"),_=at(),h=F("span"),b=ct("White"),u=at(),d=F("label"),p=F("input"),E=at(),A=F("div"),T=at(),O=F("span"),U=ct("Black"),D=at(),W=F("label"),z=F("input"),Z=at(),et=F("div"),R=at(),P=F("span"),c=ct("Custom"),H=at(),tt&&tt.c(),J=at(),q=F("div"),x=F("label"),j=ct("Border Width"),nt=at(),I=F("select");for(let ut=0;ut<ft.length;ut+=1)ft[ut].c();this.h()},l(ut){r=M(ut,"DIV",{class:!0});var mt=G(r);t=M(mt,"DIV",{class:!0});var pt=G(t);a=M(pt,"LABEL",{for:!0,class:!0});var gt=G(a);n=dt(gt,"Border Color"),gt.forEach(B),e=it(pt),s=M(pt,"DIV",{class:!0});var wt=G(s);i=M(wt,"DIV",{class:!0});var kt=G(i);f=M(kt,"LABEL",{class:!0});var l=G(f);m=M(l,"INPUT",{type:!0,class:!0}),v=it(l),g=M(l,"DIV",{class:!0}),G(g).forEach(B),_=it(l),h=M(l,"SPAN",{});var Q=G(h);b=dt(Q,"White"),Q.forEach(B),l.forEach(B),u=it(kt),d=M(kt,"LABEL",{class:!0});var X=G(d);p=M(X,"INPUT",{type:!0,class:!0}),E=it(X),A=M(X,"DIV",{class:!0}),G(A).forEach(B),T=it(X),O=M(X,"SPAN",{});var S=G(O);U=dt(S,"Black"),S.forEach(B),X.forEach(B),D=it(kt),W=M(kt,"LABEL",{class:!0});var y=G(W);z=M(y,"INPUT",{type:!0,class:!0}),Z=it(y),et=M(y,"DIV",{class:!0}),G(et).forEach(B),R=it(y),P=M(y,"SPAN",{});var k=G(P);c=dt(k,"Custom"),k.forEach(B),y.forEach(B),kt.forEach(B),H=it(wt),tt&&tt.l(wt),wt.forEach(B),pt.forEach(B),J=it(mt),q=M(mt,"DIV",{});var V=G(q);x=M(V,"LABEL",{for:!0,class:!0});var Y=G(x);j=dt(Y,"Border Width"),Y.forEach(B),nt=it(V),I=M(V,"SELECT",{id:!0,class:!0});var N=G(I);for(let $=0;$<ft.length;$+=1)ft[$].l(N);N.forEach(B),V.forEach(B),mt.forEach(B),this.h()},h(){C(a,"for","borderColor"),C(a,"class","text-sm text-neutral-500 svelte-1q0s692"),C(m,"type","radio"),m.__value="white",m.value=m.__value,C(m,"class","svelte-1q0s692"),C(g,"class","color-preview white svelte-1q0s692"),C(f,"class","color-option svelte-1q0s692"),C(p,"type","radio"),p.__value="black",p.value=p.__value,C(p,"class","svelte-1q0s692"),C(A,"class","color-preview black svelte-1q0s692"),C(d,"class","color-option svelte-1q0s692"),C(z,"type","radio"),z.__value="custom",z.value=z.__value,C(z,"class","svelte-1q0s692"),C(et,"class","color-preview custom svelte-1q0s692"),C(W,"class","color-option svelte-1q0s692"),C(i,"class","color-options svelte-1q0s692"),C(s,"class","color-selector svelte-1q0s692"),C(t,"class","mt-2"),C(x,"for","borderWidth"),C(x,"class","svelte-1q0s692"),C(I,"id","borderWidth"),C(I,"class","svelte-1q0s692"),o[0].borderWidth===void 0&&$e(()=>o[31].call(I)),C(r,"class","mt-3 space-y-3 svelte-1q0s692"),L.p(m,p,z)},m(ut,mt){It(ut,r,mt),w(r,t),w(t,a),w(a,n),w(t,e),w(t,s),w(s,i),w(i,f),w(f,m),m.checked=m.__value===o[2],w(f,v),w(f,g),w(f,_),w(f,h),w(h,b),w(i,u),w(i,d),w(d,p),p.checked=p.__value===o[2],w(d,E),w(d,A),w(d,T),w(d,O),w(O,U),w(i,D),w(i,W),w(W,z),z.checked=z.__value===o[2],w(W,Z),w(W,et),w(W,R),w(W,P),w(P,c),w(s,H),tt&&tt.m(s,null),w(r,J),w(r,q),w(q,x),w(x,j),w(q,nt),w(q,I);for(let pt=0;pt<ft.length;pt+=1)ft[pt]&&ft[pt].m(I,null);de(I,o[0].borderWidth,!0),lt||(st=[ht(m,"change",o[24]),ht(m,"change",o[25]),ht(p,"change",o[26]),ht(p,"change",o[27]),ht(z,"change",o[28]),ht(z,"change",o[29]),ht(I,"change",o[31])],lt=!0)},p(ut,mt){if(mt[0]&4&&(m.checked=m.__value===ut[2]),mt[0]&4&&(p.checked=p.__value===ut[2]),mt[0]&4&&(z.checked=z.__value===ut[2]),ut[3]?tt?tt.p(ut,mt):(tt=Ar(ut),tt.c(),tt.m(s,null)):tt&&(tt.d(1),tt=null),mt[0]&32){vt=ut[5];let pt;for(pt=0;pt<vt.length;pt+=1){const gt=Cr(ut,vt,pt);ft[pt]?ft[pt].p(gt,mt):(ft[pt]=Rr(gt),ft[pt].c(),ft[pt].m(I,null))}for(;pt<ft.length;pt+=1)ft[pt].d(1);ft.length=vt.length}mt[0]&1&&de(I,ut[0].borderWidth)},d(ut){ut&&B(r),tt&&tt.d(),Xr(ft,ut),L.r(),lt=!1,re(st)}}}function Ar(o){let r,t,a,n,e,s,i,f,m,v,g;return{c(){r=F("div"),t=F("label"),a=ct("Choose Color"),n=at(),e=F("div"),s=F("input"),f=at(),m=F("input"),this.h()},l(_){r=M(_,"DIV",{class:!0});var h=G(r);t=M(h,"LABEL",{for:!0,class:!0});var b=G(t);a=dt(b,"Choose Color"),b.forEach(B),n=it(h),e=M(h,"DIV",{class:!0});var u=G(e);s=M(u,"INPUT",{id:!0,type:!0,class:!0}),f=it(u),m=M(u,"INPUT",{type:!0,placeholder:!0,class:!0,pattern:!0}),u.forEach(B),h.forEach(B),this.h()},h(){C(t,"for","borderColorPicker"),C(t,"class","color-picker-label svelte-1q0s692"),C(s,"id","borderColorPicker"),C(s,"type","color"),s.value=i=o[0].borderColor,C(s,"class","color-picker svelte-1q0s692"),C(m,"type","text"),C(m,"placeholder","#000000"),C(m,"class","color-hex-input svelte-1q0s692"),C(m,"pattern","#[0-9A-Fa-f]6"),C(e,"class","color-picker-container svelte-1q0s692"),C(r,"class","color-picker-wrapper mt-2 svelte-1q0s692")},m(_,h){It(_,r,h),w(r,t),w(t,a),w(r,n),w(r,e),w(e,s),w(e,f),w(e,m),Mt(m,o[0].borderColor),v||(g=[ht(s,"change",o[9]),ht(m,"input",o[30]),ht(m,"input",o[11])],v=!0)},p(_,h){h[0]&1&&i!==(i=_[0].borderColor)&&(s.value=i),h[0]&1&&m.value!==_[0].borderColor&&Mt(m,_[0].borderColor)},d(_){_&&B(r),v=!1,re(g)}}}function Rr(o){let r,t=o[32].name+"",a;return{c(){r=F("option"),a=ct(t),this.h()},l(n){r=M(n,"OPTION",{});var e=G(r);a=dt(e,t),e.forEach(B),this.h()},h(){r.__value=o[32].value,r.value=r.__value},m(n,e){It(n,r,e),w(r,a)},p:oe,d(n){n&&B(r)}}}function Yn(o){let r,t,a,n,e,s,i,f,m,v,g,_,h,b,u,d,p,E,A,T,O,U,D,W,z,Z,et,R,P,c,H,J,q,x,j,nt,I,L,lt,st,tt,vt,ft,ut,mt,pt,gt,wt,kt,l,Q,X,S,y,k,V,Y,N,$,ot,K,rt,yt,_t,Ot,Tt,Ct,Et,bt,St,Nt,Pt,Xt,te,le,ue,Yt,qt,Ht,Ft=o[4]&&Sr(o),Ut=o[0].hasBorder&&Ir(o);return Yt=Mr(o[16][1]),{c(){r=F("div"),t=F("p"),a=ct("Advanced options (optional)"),n=at(),e=F("div"),s=F("div"),i=F("label"),f=ct("Position"),m=at(),v=F("select"),g=F("option"),_=ct("Top Left"),h=F("option"),b=ct("Top Right"),u=F("option"),d=ct("Bottom Left"),p=F("option"),E=ct("Bottom Right"),A=at(),T=F("div"),O=F("label"),U=ct("Text Size"),D=at(),W=F("select"),z=F("option"),Z=ct("Small"),et=F("option"),R=ct("Medium"),P=F("option"),c=ct("Large"),H=at(),J=F("div"),q=F("label"),x=F("input"),j=at(),nt=F("span"),I=ct("Bold text"),L=at(),lt=F("div"),st=F("label"),tt=ct("Text Color"),vt=at(),ft=F("div"),ut=F("div"),mt=F("label"),pt=F("input"),gt=at(),wt=F("div"),kt=at(),l=F("span"),Q=ct("White"),X=at(),S=F("label"),y=F("input"),k=at(),V=F("div"),Y=at(),N=F("span"),$=ct("Black"),ot=at(),K=F("label"),rt=F("input"),yt=at(),_t=F("div"),Ot=at(),Tt=F("span"),Ct=ct("Custom"),Et=at(),Ft&&Ft.c(),bt=at(),St=F("div"),Nt=F("label"),Pt=F("input"),Xt=at(),te=F("span"),le=ct("Add text border/outline"),ue=at(),Ut&&Ut.c(),this.h()},l(Dt){r=M(Dt,"DIV",{class:!0});var zt=G(r);t=M(zt,"P",{class:!0});var Ee=G(t);a=dt(Ee,"Advanced options (optional)"),Ee.forEach(B),n=it(zt),e=M(zt,"DIV",{class:!0});var he=G(e);s=M(he,"DIV",{class:!0});var ne=G(s);i=M(ne,"LABEL",{for:!0,class:!0});var Kt=G(i);f=dt(Kt,"Position"),Kt.forEach(B),m=it(ne),v=M(ne,"SELECT",{id:!0,class:!0});var ce=G(v);g=M(ce,"OPTION",{});var Ce=G(g);_=dt(Ce,"Top Left"),Ce.forEach(B),h=M(ce,"OPTION",{});var Se=G(h);b=dt(Se,"Top Right"),Se.forEach(B),u=M(ce,"OPTION",{});var Ie=G(u);d=dt(Ie,"Bottom Left"),Ie.forEach(B),p=M(ce,"OPTION",{});var pe=G(p);E=dt(pe,"Bottom Right"),pe.forEach(B),ce.forEach(B),ne.forEach(B),A=it(he),T=M(he,"DIV",{class:!0});var me=G(T);O=M(me,"LABEL",{for:!0,class:!0});var Ae=G(O);U=dt(Ae,"Text Size"),Ae.forEach(B),D=it(me),W=M(me,"SELECT",{id:!0,class:!0});var se=G(W);z=M(se,"OPTION",{});var Re=G(z);Z=dt(Re,"Small"),Re.forEach(B),et=M(se,"OPTION",{});var _e=G(et);R=dt(_e,"Medium"),_e.forEach(B),P=M(se,"OPTION",{});var Te=G(P);c=dt(Te,"Large"),Te.forEach(B),se.forEach(B),me.forEach(B),he.forEach(B),H=it(zt),J=M(zt,"DIV",{class:!0});var ze=G(J);q=M(ze,"LABEL",{class:!0});var Ve=G(q);x=M(Ve,"INPUT",{type:!0,class:!0}),j=it(Ve),nt=M(Ve,"SPAN",{});var or=G(nt);I=dt(or,"Bold text"),or.forEach(B),Ve.forEach(B),ze.forEach(B),L=it(zt),lt=M(zt,"DIV",{class:!0});var Ze=G(lt);st=M(Ze,"LABEL",{for:!0,class:!0});var lr=G(st);tt=dt(lr,"Text Color"),lr.forEach(B),vt=it(Ze),ft=M(Ze,"DIV",{class:!0});var qe=G(ft);ut=M(qe,"DIV",{class:!0});var ve=G(ut);mt=M(ve,"LABEL",{class:!0});var ge=G(mt);pt=M(ge,"INPUT",{type:!0,class:!0}),gt=it(ge),wt=M(ge,"DIV",{class:!0}),G(wt).forEach(B),kt=it(ge),l=M(ge,"SPAN",{});var ur=G(l);Q=dt(ur,"White"),ur.forEach(B),ge.forEach(B),X=it(ve),S=M(ve,"LABEL",{class:!0});var be=G(S);y=M(be,"INPUT",{type:!0,class:!0}),k=it(be),V=M(be,"DIV",{class:!0}),G(V).forEach(B),Y=it(be),N=M(be,"SPAN",{});var cr=G(N);$=dt(cr,"Black"),cr.forEach(B),be.forEach(B),ot=it(ve),K=M(ve,"LABEL",{class:!0});var we=G(K);rt=M(we,"INPUT",{type:!0,class:!0}),yt=it(we),_t=M(we,"DIV",{class:!0}),G(_t).forEach(B),Ot=it(we),Tt=M(we,"SPAN",{});var dr=G(Tt);Ct=dt(dr,"Custom"),dr.forEach(B),we.forEach(B),ve.forEach(B),Et=it(qe),Ft&&Ft.l(qe),qe.forEach(B),Ze.forEach(B),bt=it(zt),St=M(zt,"DIV",{class:!0});var He=G(St);Nt=M(He,"LABEL",{class:!0});var Ge=G(Nt);Pt=M(Ge,"INPUT",{type:!0,class:!0}),Xt=it(Ge),te=M(Ge,"SPAN",{});var fr=G(te);le=dt(fr,"Add text border/outline"),fr.forEach(B),Ge.forEach(B),ue=it(He),Ut&&Ut.l(He),He.forEach(B),zt.forEach(B),this.h()},h(){C(t,"class","text-sm text-neutral-500"),C(i,"for","position"),C(i,"class","svelte-1q0s692"),g.__value="top-left",g.value=g.__value,h.__value="top-right",h.value=h.__value,u.__value="bottom-left",u.value=u.__value,p.__value="bottom-right",p.value=p.__value,C(v,"id","position"),C(v,"class","svelte-1q0s692"),o[0].position===void 0&&$e(()=>o[12].call(v)),C(s,"class","form-field svelte-1q0s692"),C(O,"for","fontSize"),C(O,"class","svelte-1q0s692"),z.__value="small",z.value=z.__value,et.__value="medium",et.value=et.__value,P.__value="large",P.value=P.__value,C(W,"id","fontSize"),C(W,"class","svelte-1q0s692"),o[0].fontSize===void 0&&$e(()=>o[13].call(W)),C(T,"class","form-field svelte-1q0s692"),C(e,"class","options-grid svelte-1q0s692"),C(x,"type","checkbox"),C(x,"class","svelte-1q0s692"),C(q,"class","flex items-center space-x-2 cursor-pointer svelte-1q0s692"),C(J,"class","form-field"),C(st,"for","textColor"),C(st,"class","svelte-1q0s692"),C(pt,"type","radio"),pt.__value="white",pt.value=pt.__value,C(pt,"class","svelte-1q0s692"),C(wt,"class","color-preview white svelte-1q0s692"),C(mt,"class","color-option svelte-1q0s692"),C(y,"type","radio"),y.__value="black",y.value=y.__value,C(y,"class","svelte-1q0s692"),C(V,"class","color-preview black svelte-1q0s692"),C(S,"class","color-option svelte-1q0s692"),C(rt,"type","radio"),rt.__value="custom",rt.value=rt.__value,C(rt,"class","svelte-1q0s692"),C(_t,"class","color-preview custom svelte-1q0s692"),C(K,"class","color-option svelte-1q0s692"),C(ut,"class","color-options svelte-1q0s692"),C(ft,"class","color-selector svelte-1q0s692"),C(lt,"class","form-field svelte-1q0s692"),C(Pt,"type","checkbox"),C(Pt,"class","svelte-1q0s692"),C(Nt,"class","checkbox-label svelte-1q0s692"),C(St,"class","form-field svelte-1q0s692"),C(r,"class","space-y-4"),Yt.p(pt,y,rt)},m(Dt,zt){It(Dt,r,zt),w(r,t),w(t,a),w(r,n),w(r,e),w(e,s),w(s,i),w(i,f),w(s,m),w(s,v),w(v,g),w(g,_),w(v,h),w(h,b),w(v,u),w(u,d),w(v,p),w(p,E),de(v,o[0].position,!0),w(e,A),w(e,T),w(T,O),w(O,U),w(T,D),w(T,W),w(W,z),w(z,Z),w(W,et),w(et,R),w(W,P),w(P,c),de(W,o[0].fontSize,!0),w(r,H),w(r,J),w(J,q),w(q,x),x.checked=o[0].bold,w(q,j),w(q,nt),w(nt,I),w(r,L),w(r,lt),w(lt,st),w(st,tt),w(lt,vt),w(lt,ft),w(ft,ut),w(ut,mt),w(mt,pt),pt.checked=pt.__value===o[1],w(mt,gt),w(mt,wt),w(mt,kt),w(mt,l),w(l,Q),w(ut,X),w(ut,S),w(S,y),y.checked=y.__value===o[1],w(S,k),w(S,V),w(S,Y),w(S,N),w(N,$),w(ut,ot),w(ut,K),w(K,rt),rt.checked=rt.__value===o[1],w(K,yt),w(K,_t),w(K,Ot),w(K,Tt),w(Tt,Ct),w(ft,Et),Ft&&Ft.m(ft,null),w(r,bt),w(r,St),w(St,Nt),w(Nt,Pt),Pt.checked=o[0].hasBorder,w(Nt,Xt),w(Nt,te),w(te,le),w(St,ue),Ut&&Ut.m(St,null),qt||(Ht=[ht(v,"change",o[12]),ht(W,"change",o[13]),ht(x,"change",o[14]),ht(pt,"change",o[15]),ht(pt,"change",o[17]),ht(y,"change",o[18]),ht(y,"change",o[19]),ht(rt,"change",o[20]),ht(rt,"change",o[21]),ht(Pt,"change",o[23])],qt=!0)},p(Dt,zt){zt[0]&1&&de(v,Dt[0].position),zt[0]&1&&de(W,Dt[0].fontSize),zt[0]&1&&(x.checked=Dt[0].bold),zt[0]&2&&(pt.checked=pt.__value===Dt[1]),zt[0]&2&&(y.checked=y.__value===Dt[1]),zt[0]&2&&(rt.checked=rt.__value===Dt[1]),Dt[4]?Ft?Ft.p(Dt,zt):(Ft=Sr(Dt),Ft.c(),Ft.m(ft,null)):Ft&&(Ft.d(1),Ft=null),zt[0]&1&&(Pt.checked=Dt[0].hasBorder),Dt[0].hasBorder?Ut?Ut.p(Dt,zt):(Ut=Ir(Dt),Ut.c(),Ut.m(St,null)):Ut&&(Ut.d(1),Ut=null)},i:oe,o:oe,d(Dt){Dt&&B(r),Ft&&Ft.d(),Ut&&Ut.d(),Yt.r(),qt=!1,re(Ht)}}}function Kn(o,r,t){let a,n,{options:e}=r;const s=[{name:"Thin",value:"thin"},{name:"Medium",value:"medium"},{name:"Thick",value:"thick"}];let i=e.textColor==="white"||e.textColor==="black"?e.textColor:"custom",f=e.borderColor==="white"||e.borderColor==="black"?e.borderColor:"custom";function m(j){t(1,i=j),j==="custom"?t(0,e.textColor="#FFFFFF",e):t(0,e.textColor=j,e)}function v(j){t(2,f=j),j==="custom"?t(0,e.borderColor="#000000",e):t(0,e.borderColor=j,e)}function g(j){const nt=j.target;nt&&(t(0,e.textColor=nt.value.toUpperCase(),e),t(1,i="custom"))}function _(j){const nt=j.target;nt&&(t(0,e.borderColor=nt.value.toUpperCase(),e),t(2,f="custom"))}function h(j){const nt=j.target;if(nt){const I=nt.value.trim();I.match(/^#[0-9A-Fa-f]{6}$/)&&(t(0,e.textColor=I.toUpperCase(),e),t(1,i="custom"))}}function b(j){const nt=j.target;if(nt){const I=nt.value.trim();I.match(/^#[0-9A-Fa-f]{6}$/)&&(t(0,e.borderColor=I.toUpperCase(),e),t(2,f="custom"))}}const u=[[],[]];function d(){e.position=Ye(this),t(0,e)}function p(){e.fontSize=Ye(this),t(0,e)}function E(){e.bold=this.checked,t(0,e)}function A(){i=this.__value,t(1,i),t(0,e)}const T=()=>m("white");function O(){i=this.__value,t(1,i),t(0,e)}const U=()=>m("black");function D(){i=this.__value,t(1,i),t(0,e)}const W=()=>m("custom");function z(){e.textColor=this.value,t(0,e)}function Z(){e.hasBorder=this.checked,t(0,e)}function et(){f=this.__value,t(2,f),t(0,e)}const R=()=>v("white");function P(){f=this.__value,t(2,f),t(0,e)}const c=()=>v("black");function H(){f=this.__value,t(2,f),t(0,e)}const J=()=>v("custom");function q(){e.borderColor=this.value,t(0,e)}function x(){e.borderWidth=Ye(this),t(0,e)}return o.$$set=j=>{"options"in j&&t(0,e=j.options)},o.$$.update=()=>{o.$$.dirty[0]&1&&(e.textColor==="white"||e.textColor==="black"?t(1,i=e.textColor):typeof e.textColor=="string"&&e.textColor.startsWith("#")&&t(1,i="custom")),o.$$.dirty[0]&1&&e.hasBorder&&(e.borderColor==="white"||e.borderColor==="black"?t(2,f=e.borderColor):typeof e.borderColor=="string"&&e.borderColor.startsWith("#")&&t(2,f="custom")),o.$$.dirty[0]&2&&t(4,a=i==="custom"),o.$$.dirty[0]&5&&t(3,n=e.hasBorder&&f==="custom")},[e,i,f,n,a,s,m,v,g,_,h,b,d,p,E,A,u,T,O,U,D,W,z,Z,et,R,P,c,H,J,q,x]}class Jn extends Qt{constructor(r){super(),$t(this,r,Kn,Yn,Gt,{options:0},null,[-1,-1])}}async function Qn(){const o="Alibaba Sans Medium";if(!document.fonts||!document.fonts.check){await new Promise(r=>setTimeout(r,1e3));return}try{if(document.fonts.check(`12px "${o}"`))return;const t=5e3,a=Date.now();return new Promise((n,e)=>{const s=()=>{const i=Date.now()-a;if(document.fonts.check(`12px "${o}"`)){n();return}if(i>t){console.warn(`Font "${o}" did not load within ${t}ms, proceeding anyway`),n();return}requestAnimationFrame(s)};document.fonts.ready.then(()=>{document.fonts.check(`12px "${o}"`)?n():s()}).catch(()=>{s()}),s()})}catch(r){console.warn(`Error checking font "${o}":`,r),await new Promise(t=>setTimeout(t,1e3))}}async function $n(o,r,t,a,n=[]){await Qn();const e=[];for(let s=0;s<o.length;s++){a==null||a({current:s+1,total:o.length,currentFile:o[s].name});const i=await ts(o[s],r,t,s,n[s]);e.push(i)}return e}async function ts(o,r,t,a,n){const e=await rs(o),s=ir(e,n),i=document.createElement("canvas"),f=i.getContext("2d",{alpha:!1,desynchronized:!1});if(!f)throw new Error("Could not get canvas context");const m=3e3,v=s.width/s.height;let g,_;s.width>s.height?(g=m,_=Math.floor(g/v)):(_=m,g=Math.floor(_*v)),i.width=g,i.height=_,f.imageSmoothingEnabled=!0,f.imageSmoothingQuality="high",f.drawImage(s,0,0,g,_);const h=xr(r,a)||"12:00PM",[b,u,d]=r.date.split("-"),E=[`${`${u}/${d}/${b}`} ${h}`,r.street.toUpperCase(),`${r.city.toUpperCase()}, ${r.state.toUpperCase()} ${r.zip}`];return es(f,E,g,_,t),new Promise((A,T)=>{i.toBlob(O=>{O?A(O):T(new Error("Failed to convert canvas to blob"))},"image/jpeg",.92)})}function es(o,r,t,a,n){const i={small:Math.floor(75),medium:Math.floor(105.00000000000001),large:Math.floor(135)}[n.fontSize],f=i*1.2,m=Math.max(f-10,i*.8),v=n.bold?'"Alibaba Sans Bold", "Alibaba Sans Medium", "Alibaba Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif':'"Alibaba Sans Medium", "Alibaba Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';o.font=`${i}px ${v}`,o.textBaseline="top";const g=r.map(E=>o.measureText(E).width),_=Math.max(...g),h=m*r.length,b=i*.8;let u,d;n.position.includes("right")?u=t-_-b:u=b,n.position.includes("bottom")?d=a-h-b:d=b;const p={thin:Math.max(1,Math.floor(i*.05)),medium:Math.max(2,Math.floor(i*.08)),thick:Math.max(3,Math.floor(i*.12))};r.forEach((E,A)=>{const T=Math.round(d+A*m),O=Math.round(u);if(n.hasBorder){const U=p[n.borderWidth];o.strokeStyle=n.borderColor==="white"?"rgba(255,255,255,0.95)":n.borderColor==="black"?"rgba(0,0,0,0.9)":n.borderColor,o.lineWidth=U*2,o.lineJoin="round",o.miterLimit=2,o.strokeText(E,O,T)}o.fillStyle=n.textColor==="white"?"rgba(255,255,255,0.95)":n.textColor==="black"?"rgba(0,0,0,0.9)":n.textColor,o.fillText(E,O,T)})}function rs(o){return new Promise((r,t)=>{const a=new Image;a.onload=()=>{URL.revokeObjectURL(a.src),r(a)},a.onerror=()=>{URL.revokeObjectURL(a.src),t(new Error(`Failed to load image: ${o.name}`))},a.src=URL.createObjectURL(o)})}function Tr(o){if(o.length===0)return"Please select at least one image";if(o.length>100)return"Maximum 100 images allowed";const a=o.find(e=>e.size>20971520);if(a)return`File "${a.name}" is too large (max 20MB)`;const n=o.find(e=>!e.type.startsWith("image/"));return n?`File "${n.name}" is not an image`:null}function zr(o,r=0){if(!o.date)return"Date is required";if(!o.street.trim())return"Street address is required";if(!o.city.trim())return"City is required";if(!o.state.trim())return"State is required";if(!o.zip.trim())return"ZIP code is required";if(o.timeRanges.length===0)return"At least one time range is required";for(let t=0;t<o.timeRanges.length;t++){const a=o.timeRanges[t];if(!a.startTime)return`Range ${t+1}: Start time is required`;if(!a.incrementPattern||!Array.isArray(a.incrementPattern))return`Range ${t+1}: Increment pattern is required`;if(a.photoCount<0)return`Range ${t+1}: Photo count cannot be negative`;if(a.photoCount>0&&a.incrementPattern.length!==a.photoCount-1)return`Range ${t+1}: Pattern length (${a.incrementPattern.length}) must be ${a.photoCount-1} for ${a.photoCount} photos`;for(let n=0;n<a.incrementPattern.length;n++){const e=a.incrementPattern[n];if(typeof e=="number"){if(e<0)return`Range ${t+1}: Pattern entry ${n+1} cannot be negative`}else if(typeof e=="object"&&e!==null){if(typeof e.relativeTo!="number"||typeof e.add!="number")return`Range ${t+1}: Pattern entry ${n+1} has invalid relative reference format`;if(e.relativeTo<0||e.relativeTo>n)return`Range ${t+1}: Pattern entry ${n+1} references invalid index (must reference an already-computed entry)`;if(e.add<0)return`Range ${t+1}: Pattern entry ${n+1} has negative add value`}else return`Range ${t+1}: Pattern entry ${n+1} has invalid format`}}if(r>0){const t=o.timeRanges.reduce((a,n)=>a+n.photoCount,0);if(t!==r)return`Total photos in ranges (${t}) must equal uploaded images (${r})`}return null}function Xe(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Vr={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(o,r){(function(t){o.exports=t()})(function(){return function t(a,n,e){function s(m,v){if(!n[m]){if(!a[m]){var g=typeof Xe=="function"&&Xe;if(!v&&g)return g(m,!0);if(i)return i(m,!0);var _=new Error("Cannot find module '"+m+"'");throw _.code="MODULE_NOT_FOUND",_}var h=n[m]={exports:{}};a[m][0].call(h.exports,function(b){var u=a[m][1][b];return s(u||b)},h,h.exports,t,a,n,e)}return n[m].exports}for(var i=typeof Xe=="function"&&Xe,f=0;f<e.length;f++)s(e[f]);return s}({1:[function(t,a,n){var e=t("./utils"),s=t("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(f){for(var m,v,g,_,h,b,u,d=[],p=0,E=f.length,A=E,T=e.getTypeOf(f)!=="string";p<f.length;)A=E-p,g=T?(m=f[p++],v=p<E?f[p++]:0,p<E?f[p++]:0):(m=f.charCodeAt(p++),v=p<E?f.charCodeAt(p++):0,p<E?f.charCodeAt(p++):0),_=m>>2,h=(3&m)<<4|v>>4,b=1<A?(15&v)<<2|g>>6:64,u=2<A?63&g:64,d.push(i.charAt(_)+i.charAt(h)+i.charAt(b)+i.charAt(u));return d.join("")},n.decode=function(f){var m,v,g,_,h,b,u=0,d=0,p="data:";if(f.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var E,A=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===i.charAt(64)&&A--,f.charAt(f.length-2)===i.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=s.uint8array?new Uint8Array(0|A):new Array(0|A);u<f.length;)m=i.indexOf(f.charAt(u++))<<2|(_=i.indexOf(f.charAt(u++)))>>4,v=(15&_)<<4|(h=i.indexOf(f.charAt(u++)))>>2,g=(3&h)<<6|(b=i.indexOf(f.charAt(u++))),E[d++]=m,h!==64&&(E[d++]=v),b!==64&&(E[d++]=g);return E}},{"./support":30,"./utils":32}],2:[function(t,a,n){var e=t("./external"),s=t("./stream/DataWorker"),i=t("./stream/Crc32Probe"),f=t("./stream/DataLengthProbe");function m(v,g,_,h,b){this.compressedSize=v,this.uncompressedSize=g,this.crc32=_,this.compression=h,this.compressedContent=b}m.prototype={getContentWorker:function(){var v=new s(e.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),g=this;return v.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new s(e.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(v,g,_){return v.pipe(new i).pipe(new f("uncompressedSize")).pipe(g.compressWorker(_)).pipe(new f("compressedSize")).withStreamInfo("compression",g)},a.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,a,n){var e=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new e("STORE compression")},uncompressWorker:function(){return new e("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,a,n){var e=t("./utils"),s=function(){for(var i,f=[],m=0;m<256;m++){i=m;for(var v=0;v<8;v++)i=1&i?3988292384^i>>>1:i>>>1;f[m]=i}return f}();a.exports=function(i,f){return i!==void 0&&i.length?e.getTypeOf(i)!=="string"?function(m,v,g,_){var h=s,b=_+g;m^=-1;for(var u=_;u<b;u++)m=m>>>8^h[255&(m^v[u])];return-1^m}(0|f,i,i.length,0):function(m,v,g,_){var h=s,b=_+g;m^=-1;for(var u=_;u<b;u++)m=m>>>8^h[255&(m^v.charCodeAt(u))];return-1^m}(0|f,i,i.length,0):0}},{"./utils":32}],5:[function(t,a,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,a,n){var e=null;e=typeof Promise<"u"?Promise:t("lie"),a.exports={Promise:e}},{lie:37}],7:[function(t,a,n){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),i=t("./utils"),f=t("./stream/GenericWorker"),m=e?"uint8array":"array";function v(g,_){f.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=_,this.meta={}}n.magic="\b\0",i.inherits(v,f),v.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(m,g.data),!1)},v.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(_){g.push({data:_,meta:g.meta})}},n.compressWorker=function(g){return new v("Deflate",g)},n.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,a,n){function e(h,b){var u,d="";for(u=0;u<b;u++)d+=String.fromCharCode(255&h),h>>>=8;return d}function s(h,b,u,d,p,E){var A,T,O=h.file,U=h.compression,D=E!==m.utf8encode,W=i.transformTo("string",E(O.name)),z=i.transformTo("string",m.utf8encode(O.name)),Z=O.comment,et=i.transformTo("string",E(Z)),R=i.transformTo("string",m.utf8encode(Z)),P=z.length!==O.name.length,c=R.length!==Z.length,H="",J="",q="",x=O.dir,j=O.date,nt={crc32:0,compressedSize:0,uncompressedSize:0};b&&!u||(nt.crc32=h.crc32,nt.compressedSize=h.compressedSize,nt.uncompressedSize=h.uncompressedSize);var I=0;b&&(I|=8),D||!P&&!c||(I|=2048);var L=0,lt=0;x&&(L|=16),p==="UNIX"?(lt=798,L|=function(tt,vt){var ft=tt;return tt||(ft=vt?16893:33204),(65535&ft)<<16}(O.unixPermissions,x)):(lt=20,L|=function(tt){return 63&(tt||0)}(O.dosPermissions)),A=j.getUTCHours(),A<<=6,A|=j.getUTCMinutes(),A<<=5,A|=j.getUTCSeconds()/2,T=j.getUTCFullYear()-1980,T<<=4,T|=j.getUTCMonth()+1,T<<=5,T|=j.getUTCDate(),P&&(J=e(1,1)+e(v(W),4)+z,H+="up"+e(J.length,2)+J),c&&(q=e(1,1)+e(v(et),4)+R,H+="uc"+e(q.length,2)+q);var st="";return st+=`
\0`,st+=e(I,2),st+=U.magic,st+=e(A,2),st+=e(T,2),st+=e(nt.crc32,4),st+=e(nt.compressedSize,4),st+=e(nt.uncompressedSize,4),st+=e(W.length,2),st+=e(H.length,2),{fileRecord:g.LOCAL_FILE_HEADER+st+W+H,dirRecord:g.CENTRAL_FILE_HEADER+e(lt,2)+st+e(et.length,2)+"\0\0\0\0"+e(L,4)+e(d,4)+W+H+et}}var i=t("../utils"),f=t("../stream/GenericWorker"),m=t("../utf8"),v=t("../crc32"),g=t("../signature");function _(h,b,u,d){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=u,this.encodeFileName=d,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(_,f),_.prototype.push=function(h){var b=h.meta.percent||0,u=this.entriesCount,d=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,f.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:u?(b+100*(u-d-1))/u:100}}))},_.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var b=this.streamFiles&&!h.file.dir;if(b){var u=s(h,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:u.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(h){this.accumulate=!1;var b=this.streamFiles&&!h.file.dir,u=s(h,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(u.dirRecord),b)this.push({data:function(d){return g.DATA_DESCRIPTOR+e(d.crc32,4)+e(d.compressedSize,4)+e(d.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:u.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var h=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var u=this.bytesWritten-h,d=function(p,E,A,T,O){var U=i.transformTo("string",O(T));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+e(p,2)+e(p,2)+e(E,4)+e(A,4)+e(U.length,2)+U}(this.dirRecords.length,u,h,this.zipComment,this.encodeFileName);this.push({data:d,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(h){this._sources.push(h);var b=this;return h.on("data",function(u){b.processChunk(u)}),h.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),h.on("error",function(u){b.error(u)}),this},_.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(h){var b=this._sources;if(!f.prototype.error.call(this,h))return!1;for(var u=0;u<b.length;u++)try{b[u].error(h)}catch{}return!0},_.prototype.lock=function(){f.prototype.lock.call(this);for(var h=this._sources,b=0;b<h.length;b++)h[b].lock()},a.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,a,n){var e=t("../compressions"),s=t("./ZipFileWorker");n.generateWorker=function(i,f,m){var v=new s(f.streamFiles,m,f.platform,f.encodeFileName),g=0;try{i.forEach(function(_,h){g++;var b=function(E,A){var T=E||A,O=e[T];if(!O)throw new Error(T+" is not a valid compression method !");return O}(h.options.compression,f.compression),u=h.options.compressionOptions||f.compressionOptions||{},d=h.dir,p=h.date;h._compressWorker(b,u).withStreamInfo("file",{name:_,dir:d,date:p,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(v)}),v.entriesCount=g}catch(_){v.error(_)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,a,n){function e(){if(!(this instanceof e))return new e;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new e;for(var i in this)typeof this[i]!="function"&&(s[i]=this[i]);return s}}(e.prototype=t("./object")).loadAsync=t("./load"),e.support=t("./support"),e.defaults=t("./defaults"),e.version="3.10.1",e.loadAsync=function(s,i){return new e().loadAsync(s,i)},e.external=t("./external"),a.exports=e},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,a,n){var e=t("./utils"),s=t("./external"),i=t("./utf8"),f=t("./zipEntries"),m=t("./stream/Crc32Probe"),v=t("./nodejsUtils");function g(_){return new s.Promise(function(h,b){var u=_.decompressed.getContentWorker().pipe(new m);u.on("error",function(d){b(d)}).on("end",function(){u.streamInfo.crc32!==_.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}a.exports=function(_,h){var b=this;return h=e.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),v.isNode&&v.isStream(_)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):e.prepareContent("the loaded zip file",_,!0,h.optimizedBinaryString,h.base64).then(function(u){var d=new f(h);return d.load(u),d}).then(function(u){var d=[s.Promise.resolve(u)],p=u.files;if(h.checkCRC32)for(var E=0;E<p.length;E++)d.push(g(p[E]));return s.Promise.all(d)}).then(function(u){for(var d=u.shift(),p=d.files,E=0;E<p.length;E++){var A=p[E],T=A.fileNameStr,O=e.resolve(A.fileNameStr);b.file(O,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:h.createFolders}),A.dir||(b.file(O).unsafeOriginalName=T)}return d.zipComment.length&&(b.comment=d.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,a,n){var e=t("../utils"),s=t("../stream/GenericWorker");function i(f,m){s.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(m)}e.inherits(i,s),i.prototype._bindStream=function(f){var m=this;(this._stream=f).pause(),f.on("data",function(v){m.push({data:v,meta:{percent:0}})}).on("error",function(v){m.isPaused?this.generatedError=v:m.error(v)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},i.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,a,n){var e=t("readable-stream").Readable;function s(i,f,m){e.call(this,f),this._helper=i;var v=this;i.on("data",function(g,_){v.push(g)||v._helper.pause(),m&&m(_)}).on("error",function(g){v.emit("error",g)}).on("end",function(){v.push(null)})}t("../utils").inherits(s,e),s.prototype._read=function(){this._helper.resume()},a.exports=s},{"../utils":32,"readable-stream":16}],14:[function(t,a,n){a.exports={isNode:typeof Buffer<"u",newBufferFrom:function(e,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,s);if(typeof e=="number")throw new Error('The "data" argument must not be a number');return new Buffer(e,s)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var s=new Buffer(e);return s.fill(0),s},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&typeof e.on=="function"&&typeof e.pause=="function"&&typeof e.resume=="function"}}},{}],15:[function(t,a,n){function e(O,U,D){var W,z=i.getTypeOf(U),Z=i.extend(D||{},v);Z.date=Z.date||new Date,Z.compression!==null&&(Z.compression=Z.compression.toUpperCase()),typeof Z.unixPermissions=="string"&&(Z.unixPermissions=parseInt(Z.unixPermissions,8)),Z.unixPermissions&&16384&Z.unixPermissions&&(Z.dir=!0),Z.dosPermissions&&16&Z.dosPermissions&&(Z.dir=!0),Z.dir&&(O=p(O)),Z.createFolders&&(W=d(O))&&E.call(this,W,!0);var et=z==="string"&&Z.binary===!1&&Z.base64===!1;D&&D.binary!==void 0||(Z.binary=!et),(U instanceof g&&U.uncompressedSize===0||Z.dir||!U||U.length===0)&&(Z.base64=!1,Z.binary=!0,U="",Z.compression="STORE",z="string");var R=null;R=U instanceof g||U instanceof f?U:b.isNode&&b.isStream(U)?new u(O,U):i.prepareContent(O,U,Z.binary,Z.optimizedBinaryString,Z.base64);var P=new _(O,R,Z);this.files[O]=P}var s=t("./utf8"),i=t("./utils"),f=t("./stream/GenericWorker"),m=t("./stream/StreamHelper"),v=t("./defaults"),g=t("./compressedObject"),_=t("./zipObject"),h=t("./generate"),b=t("./nodejsUtils"),u=t("./nodejs/NodejsStreamInputAdapter"),d=function(O){O.slice(-1)==="/"&&(O=O.substring(0,O.length-1));var U=O.lastIndexOf("/");return 0<U?O.substring(0,U):""},p=function(O){return O.slice(-1)!=="/"&&(O+="/"),O},E=function(O,U){return U=U!==void 0?U:v.createFolders,O=p(O),this.files[O]||e.call(this,O,null,{dir:!0,createFolders:U}),this.files[O]};function A(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var U,D,W;for(U in this.files)W=this.files[U],(D=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&O(D,W)},filter:function(O){var U=[];return this.forEach(function(D,W){O(D,W)&&U.push(W)}),U},file:function(O,U,D){if(arguments.length!==1)return O=this.root+O,e.call(this,O,U,D),this;if(A(O)){var W=O;return this.filter(function(Z,et){return!et.dir&&W.test(Z)})}var z=this.files[this.root+O];return z&&!z.dir?z:null},folder:function(O){if(!O)return this;if(A(O))return this.filter(function(z,Z){return Z.dir&&O.test(z)});var U=this.root+O,D=E.call(this,U),W=this.clone();return W.root=D.name,W},remove:function(O){O=this.root+O;var U=this.files[O];if(U||(O.slice(-1)!=="/"&&(O+="/"),U=this.files[O]),U&&!U.dir)delete this.files[O];else for(var D=this.filter(function(z,Z){return Z.name.slice(0,O.length)===O}),W=0;W<D.length;W++)delete this.files[D[W].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var U,D={};try{if((D=i.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");i.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var W=D.comment||this.comment||"";U=h.generateWorker(this,D,W)}catch(z){(U=new f("error")).error(z)}return new m(U,D.type||"string",D.mimeType)},generateAsync:function(O,U){return this.generateInternalStream(O).accumulate(U)},generateNodeStream:function(O,U){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(U)}};a.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,a,n){a.exports=t("stream")},{stream:void 0}],17:[function(t,a,n){var e=t("./DataReader");function s(i){e.call(this,i);for(var f=0;f<this.data.length;f++)i[f]=255&i[f]}t("../utils").inherits(s,e),s.prototype.byteAt=function(i){return this.data[this.zero+i]},s.prototype.lastIndexOfSignature=function(i){for(var f=i.charCodeAt(0),m=i.charCodeAt(1),v=i.charCodeAt(2),g=i.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===f&&this.data[_+1]===m&&this.data[_+2]===v&&this.data[_+3]===g)return _-this.zero;return-1},s.prototype.readAndCheckSignature=function(i){var f=i.charCodeAt(0),m=i.charCodeAt(1),v=i.charCodeAt(2),g=i.charCodeAt(3),_=this.readData(4);return f===_[0]&&m===_[1]&&v===_[2]&&g===_[3]},s.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,f},a.exports=s},{"../utils":32,"./DataReader":18}],18:[function(t,a,n){var e=t("../utils");function s(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var f,m=0;for(this.checkOffset(i),f=this.index+i-1;f>=this.index;f--)m=(m<<8)+this.byteAt(f);return this.index+=i,m},readString:function(i){return e.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},a.exports=s},{"../utils":32}],19:[function(t,a,n){var e=t("./Uint8ArrayReader");function s(i){e.call(this,i)}t("../utils").inherits(s,e),s.prototype.readData=function(i){this.checkOffset(i);var f=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,f},a.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,a,n){var e=t("./DataReader");function s(i){e.call(this,i)}t("../utils").inherits(s,e),s.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},s.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},s.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},s.prototype.readData=function(i){this.checkOffset(i);var f=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,f},a.exports=s},{"../utils":32,"./DataReader":18}],21:[function(t,a,n){var e=t("./ArrayReader");function s(i){e.call(this,i)}t("../utils").inherits(s,e),s.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,f},a.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(t,a,n){var e=t("../utils"),s=t("../support"),i=t("./ArrayReader"),f=t("./StringReader"),m=t("./NodeBufferReader"),v=t("./Uint8ArrayReader");a.exports=function(g){var _=e.getTypeOf(g);return e.checkSupport(_),_!=="string"||s.uint8array?_==="nodebuffer"?new m(g):s.uint8array?new v(e.transformTo("uint8array",g)):new i(e.transformTo("array",g)):new f(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,a,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,a,n){var e=t("./GenericWorker"),s=t("../utils");function i(f){e.call(this,"ConvertWorker to "+f),this.destType=f}s.inherits(i,e),i.prototype.processChunk=function(f){this.push({data:s.transformTo(this.destType,f.data),meta:f.meta})},a.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(t,a,n){var e=t("./GenericWorker"),s=t("../crc32");function i(){e.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(i,e),i.prototype.processChunk=function(f){this.streamInfo.crc32=s(f.data,this.streamInfo.crc32||0),this.push(f)},a.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,a,n){var e=t("../utils"),s=t("./GenericWorker");function i(f){s.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}e.inherits(i,s),i.prototype.processChunk=function(f){if(f){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+f.data.length}s.prototype.processChunk.call(this,f)},a.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(t,a,n){var e=t("../utils"),s=t("./GenericWorker");function i(f){s.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(v){m.dataIsReady=!0,m.data=v,m.max=v&&v.length||0,m.type=e.getTypeOf(v),m.isPaused||m._tickAndRepeat()},function(v){m.error(v)})}e.inherits(i,s),i.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,e.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(e.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,m);break;case"uint8array":f=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":f=this.data.slice(this.index,m)}return this.index=m,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(t,a,n){function e(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}e.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,i){return this._listeners[s].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,i){if(this._listeners[s])for(var f=0;f<this._listeners[s].length;f++)this._listeners[s][f].call(this,i)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var i=this;return s.on("data",function(f){i.processChunk(f)}),s.on("end",function(){i.end()}),s.on("error",function(f){i.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,i){return this.extraStreamInfo[s]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},a.exports=e},{}],29:[function(t,a,n){var e=t("../utils"),s=t("./ConvertWorker"),i=t("./GenericWorker"),f=t("../base64"),m=t("../support"),v=t("../external"),g=null;if(m.nodestream)try{g=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(b,u){return new v.Promise(function(d,p){var E=[],A=b._internalType,T=b._outputType,O=b._mimeType;b.on("data",function(U,D){E.push(U),u&&u(D)}).on("error",function(U){E=[],p(U)}).on("end",function(){try{var U=function(D,W,z){switch(D){case"blob":return e.newBlob(e.transformTo("arraybuffer",W),z);case"base64":return f.encode(W);default:return e.transformTo(D,W)}}(T,function(D,W){var z,Z=0,et=null,R=0;for(z=0;z<W.length;z++)R+=W[z].length;switch(D){case"string":return W.join("");case"array":return Array.prototype.concat.apply([],W);case"uint8array":for(et=new Uint8Array(R),z=0;z<W.length;z++)et.set(W[z],Z),Z+=W[z].length;return et;case"nodebuffer":return Buffer.concat(W);default:throw new Error("concat : unsupported type '"+D+"'")}}(A,E),O);d(U)}catch(D){p(D)}E=[]}).resume()})}function h(b,u,d){var p=u;switch(u){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=u,this._mimeType=d,e.checkSupport(p),this._worker=b.pipe(new s(p)),b.lock()}catch(E){this._worker=new i("error"),this._worker.error(E)}}h.prototype={accumulate:function(b){return _(this,b)},on:function(b,u){var d=this;return b==="data"?this._worker.on(b,function(p){u.call(d,p.data,p.meta)}):this._worker.on(b,function(){e.delay(u,arguments,d)}),this},resume:function(){return e.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(e.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},b)}},a.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,a,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var e=new ArrayBuffer(0);try{n.blob=new Blob([e],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(e),n.blob=s.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(t,a,n){for(var e=t("./utils"),s=t("./support"),i=t("./nodejsUtils"),f=t("./stream/GenericWorker"),m=new Array(256),v=0;v<256;v++)m[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;m[254]=m[254]=1;function g(){f.call(this,"utf-8 decode"),this.leftOver=null}function _(){f.call(this,"utf-8 encode")}n.utf8encode=function(h){return s.nodebuffer?i.newBufferFrom(h,"utf-8"):function(b){var u,d,p,E,A,T=b.length,O=0;for(E=0;E<T;E++)(64512&(d=b.charCodeAt(E)))==55296&&E+1<T&&(64512&(p=b.charCodeAt(E+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),E++),O+=d<128?1:d<2048?2:d<65536?3:4;for(u=s.uint8array?new Uint8Array(O):new Array(O),E=A=0;A<O;E++)(64512&(d=b.charCodeAt(E)))==55296&&E+1<T&&(64512&(p=b.charCodeAt(E+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),E++),d<128?u[A++]=d:(d<2048?u[A++]=192|d>>>6:(d<65536?u[A++]=224|d>>>12:(u[A++]=240|d>>>18,u[A++]=128|d>>>12&63),u[A++]=128|d>>>6&63),u[A++]=128|63&d);return u}(h)},n.utf8decode=function(h){return s.nodebuffer?e.transformTo("nodebuffer",h).toString("utf-8"):function(b){var u,d,p,E,A=b.length,T=new Array(2*A);for(u=d=0;u<A;)if((p=b[u++])<128)T[d++]=p;else if(4<(E=m[p]))T[d++]=65533,u+=E-1;else{for(p&=E===2?31:E===3?15:7;1<E&&u<A;)p=p<<6|63&b[u++],E--;1<E?T[d++]=65533:p<65536?T[d++]=p:(p-=65536,T[d++]=55296|p>>10&1023,T[d++]=56320|1023&p)}return T.length!==d&&(T.subarray?T=T.subarray(0,d):T.length=d),e.applyFromCharCode(T)}(h=e.transformTo(s.uint8array?"uint8array":"array",h))},e.inherits(g,f),g.prototype.processChunk=function(h){var b=e.transformTo(s.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var u=b;(b=new Uint8Array(u.length+this.leftOver.length)).set(this.leftOver,0),b.set(u,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var d=function(E,A){var T;for((A=A||E.length)>E.length&&(A=E.length),T=A-1;0<=T&&(192&E[T])==128;)T--;return T<0||T===0?A:T+m[E[T]]>A?T:A}(b),p=b;d!==b.length&&(s.uint8array?(p=b.subarray(0,d),this.leftOver=b.subarray(d,b.length)):(p=b.slice(0,d),this.leftOver=b.slice(d,b.length))),this.push({data:n.utf8decode(p),meta:h.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=g,e.inherits(_,f),_.prototype.processChunk=function(h){this.push({data:n.utf8encode(h.data),meta:h.meta})},n.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,a,n){var e=t("./support"),s=t("./base64"),i=t("./nodejsUtils"),f=t("./external");function m(u){return u}function v(u,d){for(var p=0;p<u.length;++p)d[p]=255&u.charCodeAt(p);return d}t("setimmediate"),n.newBlob=function(u,d){n.checkSupport("blob");try{return new Blob([u],{type:d})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(u),p.getBlob(d)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(u,d,p){var E=[],A=0,T=u.length;if(T<=p)return String.fromCharCode.apply(null,u);for(;A<T;)d==="array"||d==="nodebuffer"?E.push(String.fromCharCode.apply(null,u.slice(A,Math.min(A+p,T)))):E.push(String.fromCharCode.apply(null,u.subarray(A,Math.min(A+p,T)))),A+=p;return E.join("")},stringifyByChar:function(u){for(var d="",p=0;p<u.length;p++)d+=String.fromCharCode(u[p]);return d},applyCanBeUsed:{uint8array:function(){try{return e.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return e.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}}()}};function _(u){var d=65536,p=n.getTypeOf(u),E=!0;if(p==="uint8array"?E=g.applyCanBeUsed.uint8array:p==="nodebuffer"&&(E=g.applyCanBeUsed.nodebuffer),E)for(;1<d;)try{return g.stringifyByChunk(u,p,d)}catch{d=Math.floor(d/2)}return g.stringifyByChar(u)}function h(u,d){for(var p=0;p<u.length;p++)d[p]=u[p];return d}n.applyFromCharCode=_;var b={};b.string={string:m,array:function(u){return v(u,new Array(u.length))},arraybuffer:function(u){return b.string.uint8array(u).buffer},uint8array:function(u){return v(u,new Uint8Array(u.length))},nodebuffer:function(u){return v(u,i.allocBuffer(u.length))}},b.array={string:_,array:m,arraybuffer:function(u){return new Uint8Array(u).buffer},uint8array:function(u){return new Uint8Array(u)},nodebuffer:function(u){return i.newBufferFrom(u)}},b.arraybuffer={string:function(u){return _(new Uint8Array(u))},array:function(u){return h(new Uint8Array(u),new Array(u.byteLength))},arraybuffer:m,uint8array:function(u){return new Uint8Array(u)},nodebuffer:function(u){return i.newBufferFrom(new Uint8Array(u))}},b.uint8array={string:_,array:function(u){return h(u,new Array(u.length))},arraybuffer:function(u){return u.buffer},uint8array:m,nodebuffer:function(u){return i.newBufferFrom(u)}},b.nodebuffer={string:_,array:function(u){return h(u,new Array(u.length))},arraybuffer:function(u){return b.nodebuffer.uint8array(u).buffer},uint8array:function(u){return h(u,new Uint8Array(u.length))},nodebuffer:m},n.transformTo=function(u,d){if(d=d||"",!u)return d;n.checkSupport(u);var p=n.getTypeOf(d);return b[p][u](d)},n.resolve=function(u){for(var d=u.split("/"),p=[],E=0;E<d.length;E++){var A=d[E];A==="."||A===""&&E!==0&&E!==d.length-1||(A===".."?p.pop():p.push(A))}return p.join("/")},n.getTypeOf=function(u){return typeof u=="string"?"string":Object.prototype.toString.call(u)==="[object Array]"?"array":e.nodebuffer&&i.isBuffer(u)?"nodebuffer":e.uint8array&&u instanceof Uint8Array?"uint8array":e.arraybuffer&&u instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(u){if(!e[u.toLowerCase()])throw new Error(u+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(u){var d,p,E="";for(p=0;p<(u||"").length;p++)E+="\\x"+((d=u.charCodeAt(p))<16?"0":"")+d.toString(16).toUpperCase();return E},n.delay=function(u,d,p){setImmediate(function(){u.apply(p||null,d||[])})},n.inherits=function(u,d){function p(){}p.prototype=d.prototype,u.prototype=new p},n.extend=function(){var u,d,p={};for(u=0;u<arguments.length;u++)for(d in arguments[u])Object.prototype.hasOwnProperty.call(arguments[u],d)&&p[d]===void 0&&(p[d]=arguments[u][d]);return p},n.prepareContent=function(u,d,p,E,A){return f.Promise.resolve(d).then(function(T){return e.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new f.Promise(function(O,U){var D=new FileReader;D.onload=function(W){O(W.target.result)},D.onerror=function(W){U(W.target.error)},D.readAsArrayBuffer(T)}):T}).then(function(T){var O=n.getTypeOf(T);return O?(O==="arraybuffer"?T=n.transformTo("uint8array",T):O==="string"&&(A?T=s.decode(T):p&&E!==!0&&(T=function(U){return v(U,e.uint8array?new Uint8Array(U.length):new Array(U.length))}(T))),T):f.Promise.reject(new Error("Can't read the data of '"+u+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,a,n){var e=t("./reader/readerFor"),s=t("./utils"),i=t("./signature"),f=t("./zipEntry"),m=t("./support");function v(g){this.files=[],this.loadOptions=g}v.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(_)+", expected "+s.pretty(g)+")")}},isSignature:function(g,_){var h=this.reader.index;this.reader.setIndex(g);var b=this.reader.readString(4)===_;return this.reader.setIndex(h),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),_=m.uint8array?"uint8array":"array",h=s.transformTo(_,g);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,_,h,b=this.zip64EndOfCentralSize-44;0<b;)g=this.reader.readInt(2),_=this.reader.readInt(4),h=this.reader.readData(_),this.zip64ExtensibleData[g]={id:g,length:_,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,_;for(g=0;g<this.files.length;g++)_=this.files[g],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(g=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var _=g;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var b=_-h;if(0<b)this.isSignature(_,i.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(g){this.reader=e(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,a,n){var e=t("./reader/readerFor"),s=t("./utils"),i=t("./compressedObject"),f=t("./crc32"),m=t("./utf8"),v=t("./compressions"),g=t("./support");function _(h,b){this.options=h,this.loadOptions=b}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var b,u;if(h.skip(22),this.fileNameLength=h.readInt(2),u=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(u),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(d){for(var p in v)if(Object.prototype.hasOwnProperty.call(v,p)&&v[p].magic===d)return v[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,b,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var b=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(b),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=e(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var b,u,d,p=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<p;)b=h.readInt(2),u=h.readInt(2),d=h.readData(u),this.extraFields[b]={id:b,length:u,value:d};h.setIndex(p)},handleUTF8:function(){var h=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var u=s.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(u)}var d=this.findExtraFieldUnicodeComment();if(d!==null)this.fileCommentStr=d;else{var p=s.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var b=e(h.value);return b.readInt(1)!==1||f(this.fileName)!==b.readInt(4)?null:m.utf8decode(b.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var b=e(h.value);return b.readInt(1)!==1||f(this.fileComment)!==b.readInt(4)?null:m.utf8decode(b.readData(h.length-5))}return null}},a.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,a,n){function e(b,u,d){this.name=b,this.dir=d.dir,this.date=d.date,this.comment=d.comment,this.unixPermissions=d.unixPermissions,this.dosPermissions=d.dosPermissions,this._data=u,this._dataBinary=d.binary,this.options={compression:d.compression,compressionOptions:d.compressionOptions}}var s=t("./stream/StreamHelper"),i=t("./stream/DataWorker"),f=t("./utf8"),m=t("./compressedObject"),v=t("./stream/GenericWorker");e.prototype={internalStream:function(b){var u=null,d="string";try{if(!b)throw new Error("No output type specified.");var p=(d=b.toLowerCase())==="string"||d==="text";d!=="binarystring"&&d!=="text"||(d="string"),u=this._decompressWorker();var E=!this._dataBinary;E&&!p&&(u=u.pipe(new f.Utf8EncodeWorker)),!E&&p&&(u=u.pipe(new f.Utf8DecodeWorker))}catch(A){(u=new v("error")).error(A)}return new s(u,d,"")},async:function(b,u){return this.internalStream(b).accumulate(u)},nodeStream:function(b,u){return this.internalStream(b||"nodebuffer").toNodejsStream(u)},_compressWorker:function(b,u){if(this._data instanceof m&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var d=this._decompressWorker();return this._dataBinary||(d=d.pipe(new f.Utf8EncodeWorker)),m.createWorkerFrom(d,b,u)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof v?this._data:new i(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<g.length;h++)e.prototype[g[h]]=_;a.exports=e},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,a,n){(function(e){var s,i,f=e.MutationObserver||e.WebKitMutationObserver;if(f){var m=0,v=new f(b),g=e.document.createTextNode("");v.observe(g,{characterData:!0}),s=function(){g.data=m=++m%2}}else if(e.setImmediate||e.MessageChannel===void 0)s="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var u=e.document.createElement("script");u.onreadystatechange=function(){b(),u.onreadystatechange=null,u.parentNode.removeChild(u),u=null},e.document.documentElement.appendChild(u)}:function(){setTimeout(b,0)};else{var _=new e.MessageChannel;_.port1.onmessage=b,s=function(){_.port2.postMessage(0)}}var h=[];function b(){var u,d;i=!0;for(var p=h.length;p;){for(d=h,h=[],u=-1;++u<p;)d[u]();p=h.length}i=!1}a.exports=function(u){h.push(u)!==1||i||s()}}).call(this,typeof ie<"u"?ie:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,a,n){var e=t("immediate");function s(){}var i={},f=["REJECTED"],m=["FULFILLED"],v=["PENDING"];function g(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,p!==s&&u(this,p)}function _(p,E,A){this.promise=p,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function h(p,E,A){e(function(){var T;try{T=E(A)}catch(O){return i.reject(p,O)}T===p?i.reject(p,new TypeError("Cannot resolve promise with itself")):i.resolve(p,T)})}function b(p){var E=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof E=="function")return function(){E.apply(p,arguments)}}function u(p,E){var A=!1;function T(D){A||(A=!0,i.reject(p,D))}function O(D){A||(A=!0,i.resolve(p,D))}var U=d(function(){E(O,T)});U.status==="error"&&T(U.value)}function d(p,E){var A={};try{A.value=p(E),A.status="success"}catch(T){A.status="error",A.value=T}return A}(a.exports=g).prototype.finally=function(p){if(typeof p!="function")return this;var E=this.constructor;return this.then(function(A){return E.resolve(p()).then(function(){return A})},function(A){return E.resolve(p()).then(function(){throw A})})},g.prototype.catch=function(p){return this.then(null,p)},g.prototype.then=function(p,E){if(typeof p!="function"&&this.state===m||typeof E!="function"&&this.state===f)return this;var A=new this.constructor(s);return this.state!==v?h(A,this.state===m?p:E,this.outcome):this.queue.push(new _(A,p,E)),A},_.prototype.callFulfilled=function(p){i.resolve(this.promise,p)},_.prototype.otherCallFulfilled=function(p){h(this.promise,this.onFulfilled,p)},_.prototype.callRejected=function(p){i.reject(this.promise,p)},_.prototype.otherCallRejected=function(p){h(this.promise,this.onRejected,p)},i.resolve=function(p,E){var A=d(b,E);if(A.status==="error")return i.reject(p,A.value);var T=A.value;if(T)u(p,T);else{p.state=m,p.outcome=E;for(var O=-1,U=p.queue.length;++O<U;)p.queue[O].callFulfilled(E)}return p},i.reject=function(p,E){p.state=f,p.outcome=E;for(var A=-1,T=p.queue.length;++A<T;)p.queue[A].callRejected(E);return p},g.resolve=function(p){return p instanceof this?p:i.resolve(new this(s),p)},g.reject=function(p){var E=new this(s);return i.reject(E,p)},g.all=function(p){var E=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=p.length,T=!1;if(!A)return this.resolve([]);for(var O=new Array(A),U=0,D=-1,W=new this(s);++D<A;)z(p[D],D);return W;function z(Z,et){E.resolve(Z).then(function(R){O[et]=R,++U!==A||T||(T=!0,i.resolve(W,O))},function(R){T||(T=!0,i.reject(W,R))})}},g.race=function(p){var E=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=p.length,T=!1;if(!A)return this.resolve([]);for(var O=-1,U=new this(s);++O<A;)D=p[O],E.resolve(D).then(function(W){T||(T=!0,i.resolve(U,W))},function(W){T||(T=!0,i.reject(U,W))});var D;return U}},{immediate:36}],38:[function(t,a,n){var e={};(0,t("./lib/utils/common").assign)(e,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),a.exports=e},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,a,n){var e=t("./zlib/deflate"),s=t("./utils/common"),i=t("./utils/strings"),f=t("./zlib/messages"),m=t("./zlib/zstream"),v=Object.prototype.toString,g=0,_=-1,h=0,b=8;function u(p){if(!(this instanceof u))return new u(p);this.options=s.assign({level:_,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},p||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var A=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(A!==g)throw new Error(f[A]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var T;if(T=typeof E.dictionary=="string"?i.string2buf(E.dictionary):v.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(A=e.deflateSetDictionary(this.strm,T))!==g)throw new Error(f[A]);this._dict_set=!0}}function d(p,E){var A=new u(E);if(A.push(p,!0),A.err)throw A.msg||f[A.err];return A.result}u.prototype.push=function(p,E){var A,T,O=this.strm,U=this.options.chunkSize;if(this.ended)return!1;T=E===~~E?E:E===!0?4:0,typeof p=="string"?O.input=i.string2buf(p):v.call(p)==="[object ArrayBuffer]"?O.input=new Uint8Array(p):O.input=p,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new s.Buf8(U),O.next_out=0,O.avail_out=U),(A=e.deflate(O,T))!==1&&A!==g)return this.onEnd(A),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(s.shrinkBuf(O.output,O.next_out))):this.onData(s.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&A!==1);return T===4?(A=e.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===g):T!==2||(this.onEnd(g),!(O.avail_out=0))},u.prototype.onData=function(p){this.chunks.push(p)},u.prototype.onEnd=function(p){p===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},n.Deflate=u,n.deflate=d,n.deflateRaw=function(p,E){return(E=E||{}).raw=!0,d(p,E)},n.gzip=function(p,E){return(E=E||{}).gzip=!0,d(p,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,a,n){var e=t("./zlib/inflate"),s=t("./utils/common"),i=t("./utils/strings"),f=t("./zlib/constants"),m=t("./zlib/messages"),v=t("./zlib/zstream"),g=t("./zlib/gzheader"),_=Object.prototype.toString;function h(u){if(!(this instanceof h))return new h(u);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},u||{});var d=this.options;d.raw&&0<=d.windowBits&&d.windowBits<16&&(d.windowBits=-d.windowBits,d.windowBits===0&&(d.windowBits=-15)),!(0<=d.windowBits&&d.windowBits<16)||u&&u.windowBits||(d.windowBits+=32),15<d.windowBits&&d.windowBits<48&&!(15&d.windowBits)&&(d.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var p=e.inflateInit2(this.strm,d.windowBits);if(p!==f.Z_OK)throw new Error(m[p]);this.header=new g,e.inflateGetHeader(this.strm,this.header)}function b(u,d){var p=new h(d);if(p.push(u,!0),p.err)throw p.msg||m[p.err];return p.result}h.prototype.push=function(u,d){var p,E,A,T,O,U,D=this.strm,W=this.options.chunkSize,z=this.options.dictionary,Z=!1;if(this.ended)return!1;E=d===~~d?d:d===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof u=="string"?D.input=i.binstring2buf(u):_.call(u)==="[object ArrayBuffer]"?D.input=new Uint8Array(u):D.input=u,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new s.Buf8(W),D.next_out=0,D.avail_out=W),(p=e.inflate(D,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&z&&(U=typeof z=="string"?i.string2buf(z):_.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,p=e.inflateSetDictionary(this.strm,U)),p===f.Z_BUF_ERROR&&Z===!0&&(p=f.Z_OK,Z=!1),p!==f.Z_STREAM_END&&p!==f.Z_OK)return this.onEnd(p),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&p!==f.Z_STREAM_END&&(D.avail_in!==0||E!==f.Z_FINISH&&E!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=i.utf8border(D.output,D.next_out),T=D.next_out-A,O=i.buf2string(D.output,A),D.next_out=T,D.avail_out=W-T,T&&s.arraySet(D.output,D.output,A,T,0),this.onData(O)):this.onData(s.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(Z=!0)}while((0<D.avail_in||D.avail_out===0)&&p!==f.Z_STREAM_END);return p===f.Z_STREAM_END&&(E=f.Z_FINISH),E===f.Z_FINISH?(p=e.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===f.Z_OK):E!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(D.avail_out=0))},h.prototype.onData=function(u){this.chunks.push(u)},h.prototype.onEnd=function(u){u===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},n.Inflate=h,n.inflate=b,n.inflateRaw=function(u,d){return(d=d||{}).raw=!0,b(u,d)},n.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,a,n){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(f){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var v=m.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var g in v)v.hasOwnProperty(g)&&(f[g]=v[g])}}return f},n.shrinkBuf=function(f,m){return f.length===m?f:f.subarray?f.subarray(0,m):(f.length=m,f)};var s={arraySet:function(f,m,v,g,_){if(m.subarray&&f.subarray)f.set(m.subarray(v,v+g),_);else for(var h=0;h<g;h++)f[_+h]=m[v+h]},flattenChunks:function(f){var m,v,g,_,h,b;for(m=g=0,v=f.length;m<v;m++)g+=f[m].length;for(b=new Uint8Array(g),m=_=0,v=f.length;m<v;m++)h=f[m],b.set(h,_),_+=h.length;return b}},i={arraySet:function(f,m,v,g,_){for(var h=0;h<g;h++)f[_+h]=m[v+h]},flattenChunks:function(f){return[].concat.apply([],f)}};n.setTyped=function(f){f?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,s)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,i))},n.setTyped(e)},{}],42:[function(t,a,n){var e=t("./common"),s=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var f=new e.Buf8(256),m=0;m<256;m++)f[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function v(g,_){if(_<65537&&(g.subarray&&i||!g.subarray&&s))return String.fromCharCode.apply(null,e.shrinkBuf(g,_));for(var h="",b=0;b<_;b++)h+=String.fromCharCode(g[b]);return h}f[254]=f[254]=1,n.string2buf=function(g){var _,h,b,u,d,p=g.length,E=0;for(u=0;u<p;u++)(64512&(h=g.charCodeAt(u)))==55296&&u+1<p&&(64512&(b=g.charCodeAt(u+1)))==56320&&(h=65536+(h-55296<<10)+(b-56320),u++),E+=h<128?1:h<2048?2:h<65536?3:4;for(_=new e.Buf8(E),u=d=0;d<E;u++)(64512&(h=g.charCodeAt(u)))==55296&&u+1<p&&(64512&(b=g.charCodeAt(u+1)))==56320&&(h=65536+(h-55296<<10)+(b-56320),u++),h<128?_[d++]=h:(h<2048?_[d++]=192|h>>>6:(h<65536?_[d++]=224|h>>>12:(_[d++]=240|h>>>18,_[d++]=128|h>>>12&63),_[d++]=128|h>>>6&63),_[d++]=128|63&h);return _},n.buf2binstring=function(g){return v(g,g.length)},n.binstring2buf=function(g){for(var _=new e.Buf8(g.length),h=0,b=_.length;h<b;h++)_[h]=g.charCodeAt(h);return _},n.buf2string=function(g,_){var h,b,u,d,p=_||g.length,E=new Array(2*p);for(h=b=0;h<p;)if((u=g[h++])<128)E[b++]=u;else if(4<(d=f[u]))E[b++]=65533,h+=d-1;else{for(u&=d===2?31:d===3?15:7;1<d&&h<p;)u=u<<6|63&g[h++],d--;1<d?E[b++]=65533:u<65536?E[b++]=u:(u-=65536,E[b++]=55296|u>>10&1023,E[b++]=56320|1023&u)}return v(E,b)},n.utf8border=function(g,_){var h;for((_=_||g.length)>g.length&&(_=g.length),h=_-1;0<=h&&(192&g[h])==128;)h--;return h<0||h===0?_:h+f[g[h]]>_?h:_}},{"./common":41}],43:[function(t,a,n){a.exports=function(e,s,i,f){for(var m=65535&e|0,v=e>>>16&65535|0,g=0;i!==0;){for(i-=g=2e3<i?2e3:i;v=v+(m=m+s[f++]|0)|0,--g;);m%=65521,v%=65521}return m|v<<16|0}},{}],44:[function(t,a,n){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,a,n){var e=function(){for(var s,i=[],f=0;f<256;f++){s=f;for(var m=0;m<8;m++)s=1&s?3988292384^s>>>1:s>>>1;i[f]=s}return i}();a.exports=function(s,i,f,m){var v=e,g=m+f;s^=-1;for(var _=m;_<g;_++)s=s>>>8^v[255&(s^i[_])];return-1^s}},{}],46:[function(t,a,n){var e,s=t("../utils/common"),i=t("./trees"),f=t("./adler32"),m=t("./crc32"),v=t("./messages"),g=0,_=4,h=0,b=-2,u=-1,d=4,p=2,E=8,A=9,T=286,O=30,U=19,D=2*T+1,W=15,z=3,Z=258,et=Z+z+1,R=42,P=113,c=1,H=2,J=3,q=4;function x(l,Q){return l.msg=v[Q],Q}function j(l){return(l<<1)-(4<l?9:0)}function nt(l){for(var Q=l.length;0<=--Q;)l[Q]=0}function I(l){var Q=l.state,X=Q.pending;X>l.avail_out&&(X=l.avail_out),X!==0&&(s.arraySet(l.output,Q.pending_buf,Q.pending_out,X,l.next_out),l.next_out+=X,Q.pending_out+=X,l.total_out+=X,l.avail_out-=X,Q.pending-=X,Q.pending===0&&(Q.pending_out=0))}function L(l,Q){i._tr_flush_block(l,0<=l.block_start?l.block_start:-1,l.strstart-l.block_start,Q),l.block_start=l.strstart,I(l.strm)}function lt(l,Q){l.pending_buf[l.pending++]=Q}function st(l,Q){l.pending_buf[l.pending++]=Q>>>8&255,l.pending_buf[l.pending++]=255&Q}function tt(l,Q){var X,S,y=l.max_chain_length,k=l.strstart,V=l.prev_length,Y=l.nice_match,N=l.strstart>l.w_size-et?l.strstart-(l.w_size-et):0,$=l.window,ot=l.w_mask,K=l.prev,rt=l.strstart+Z,yt=$[k+V-1],_t=$[k+V];l.prev_length>=l.good_match&&(y>>=2),Y>l.lookahead&&(Y=l.lookahead);do if($[(X=Q)+V]===_t&&$[X+V-1]===yt&&$[X]===$[k]&&$[++X]===$[k+1]){k+=2,X++;do;while($[++k]===$[++X]&&$[++k]===$[++X]&&$[++k]===$[++X]&&$[++k]===$[++X]&&$[++k]===$[++X]&&$[++k]===$[++X]&&$[++k]===$[++X]&&$[++k]===$[++X]&&k<rt);if(S=Z-(rt-k),k=rt-Z,V<S){if(l.match_start=Q,Y<=(V=S))break;yt=$[k+V-1],_t=$[k+V]}}while((Q=K[Q&ot])>N&&--y!=0);return V<=l.lookahead?V:l.lookahead}function vt(l){var Q,X,S,y,k,V,Y,N,$,ot,K=l.w_size;do{if(y=l.window_size-l.lookahead-l.strstart,l.strstart>=K+(K-et)){for(s.arraySet(l.window,l.window,K,K,0),l.match_start-=K,l.strstart-=K,l.block_start-=K,Q=X=l.hash_size;S=l.head[--Q],l.head[Q]=K<=S?S-K:0,--X;);for(Q=X=K;S=l.prev[--Q],l.prev[Q]=K<=S?S-K:0,--X;);y+=K}if(l.strm.avail_in===0)break;if(V=l.strm,Y=l.window,N=l.strstart+l.lookahead,$=y,ot=void 0,ot=V.avail_in,$<ot&&(ot=$),X=ot===0?0:(V.avail_in-=ot,s.arraySet(Y,V.input,V.next_in,ot,N),V.state.wrap===1?V.adler=f(V.adler,Y,ot,N):V.state.wrap===2&&(V.adler=m(V.adler,Y,ot,N)),V.next_in+=ot,V.total_in+=ot,ot),l.lookahead+=X,l.lookahead+l.insert>=z)for(k=l.strstart-l.insert,l.ins_h=l.window[k],l.ins_h=(l.ins_h<<l.hash_shift^l.window[k+1])&l.hash_mask;l.insert&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[k+z-1])&l.hash_mask,l.prev[k&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=k,k++,l.insert--,!(l.lookahead+l.insert<z)););}while(l.lookahead<et&&l.strm.avail_in!==0)}function ft(l,Q){for(var X,S;;){if(l.lookahead<et){if(vt(l),l.lookahead<et&&Q===g)return c;if(l.lookahead===0)break}if(X=0,l.lookahead>=z&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+z-1])&l.hash_mask,X=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),X!==0&&l.strstart-X<=l.w_size-et&&(l.match_length=tt(l,X)),l.match_length>=z)if(S=i._tr_tally(l,l.strstart-l.match_start,l.match_length-z),l.lookahead-=l.match_length,l.match_length<=l.max_lazy_match&&l.lookahead>=z){for(l.match_length--;l.strstart++,l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+z-1])&l.hash_mask,X=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart,--l.match_length!=0;);l.strstart++}else l.strstart+=l.match_length,l.match_length=0,l.ins_h=l.window[l.strstart],l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+1])&l.hash_mask;else S=i._tr_tally(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++;if(S&&(L(l,!1),l.strm.avail_out===0))return c}return l.insert=l.strstart<z-1?l.strstart:z-1,Q===_?(L(l,!0),l.strm.avail_out===0?J:q):l.last_lit&&(L(l,!1),l.strm.avail_out===0)?c:H}function ut(l,Q){for(var X,S,y;;){if(l.lookahead<et){if(vt(l),l.lookahead<et&&Q===g)return c;if(l.lookahead===0)break}if(X=0,l.lookahead>=z&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+z-1])&l.hash_mask,X=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),l.prev_length=l.match_length,l.prev_match=l.match_start,l.match_length=z-1,X!==0&&l.prev_length<l.max_lazy_match&&l.strstart-X<=l.w_size-et&&(l.match_length=tt(l,X),l.match_length<=5&&(l.strategy===1||l.match_length===z&&4096<l.strstart-l.match_start)&&(l.match_length=z-1)),l.prev_length>=z&&l.match_length<=l.prev_length){for(y=l.strstart+l.lookahead-z,S=i._tr_tally(l,l.strstart-1-l.prev_match,l.prev_length-z),l.lookahead-=l.prev_length-1,l.prev_length-=2;++l.strstart<=y&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+z-1])&l.hash_mask,X=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),--l.prev_length!=0;);if(l.match_available=0,l.match_length=z-1,l.strstart++,S&&(L(l,!1),l.strm.avail_out===0))return c}else if(l.match_available){if((S=i._tr_tally(l,0,l.window[l.strstart-1]))&&L(l,!1),l.strstart++,l.lookahead--,l.strm.avail_out===0)return c}else l.match_available=1,l.strstart++,l.lookahead--}return l.match_available&&(S=i._tr_tally(l,0,l.window[l.strstart-1]),l.match_available=0),l.insert=l.strstart<z-1?l.strstart:z-1,Q===_?(L(l,!0),l.strm.avail_out===0?J:q):l.last_lit&&(L(l,!1),l.strm.avail_out===0)?c:H}function mt(l,Q,X,S,y){this.good_length=l,this.max_lazy=Q,this.nice_length=X,this.max_chain=S,this.func=y}function pt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*D),this.dyn_dtree=new s.Buf16(2*(2*O+1)),this.bl_tree=new s.Buf16(2*(2*U+1)),nt(this.dyn_ltree),nt(this.dyn_dtree),nt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(W+1),this.heap=new s.Buf16(2*T+1),nt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*T+1),nt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function gt(l){var Q;return l&&l.state?(l.total_in=l.total_out=0,l.data_type=p,(Q=l.state).pending=0,Q.pending_out=0,Q.wrap<0&&(Q.wrap=-Q.wrap),Q.status=Q.wrap?R:P,l.adler=Q.wrap===2?0:1,Q.last_flush=g,i._tr_init(Q),h):x(l,b)}function wt(l){var Q=gt(l);return Q===h&&function(X){X.window_size=2*X.w_size,nt(X.head),X.max_lazy_match=e[X.level].max_lazy,X.good_match=e[X.level].good_length,X.nice_match=e[X.level].nice_length,X.max_chain_length=e[X.level].max_chain,X.strstart=0,X.block_start=0,X.lookahead=0,X.insert=0,X.match_length=X.prev_length=z-1,X.match_available=0,X.ins_h=0}(l.state),Q}function kt(l,Q,X,S,y,k){if(!l)return b;var V=1;if(Q===u&&(Q=6),S<0?(V=0,S=-S):15<S&&(V=2,S-=16),y<1||A<y||X!==E||S<8||15<S||Q<0||9<Q||k<0||d<k)return x(l,b);S===8&&(S=9);var Y=new pt;return(l.state=Y).strm=l,Y.wrap=V,Y.gzhead=null,Y.w_bits=S,Y.w_size=1<<Y.w_bits,Y.w_mask=Y.w_size-1,Y.hash_bits=y+7,Y.hash_size=1<<Y.hash_bits,Y.hash_mask=Y.hash_size-1,Y.hash_shift=~~((Y.hash_bits+z-1)/z),Y.window=new s.Buf8(2*Y.w_size),Y.head=new s.Buf16(Y.hash_size),Y.prev=new s.Buf16(Y.w_size),Y.lit_bufsize=1<<y+6,Y.pending_buf_size=4*Y.lit_bufsize,Y.pending_buf=new s.Buf8(Y.pending_buf_size),Y.d_buf=1*Y.lit_bufsize,Y.l_buf=3*Y.lit_bufsize,Y.level=Q,Y.strategy=k,Y.method=X,wt(l)}e=[new mt(0,0,0,0,function(l,Q){var X=65535;for(X>l.pending_buf_size-5&&(X=l.pending_buf_size-5);;){if(l.lookahead<=1){if(vt(l),l.lookahead===0&&Q===g)return c;if(l.lookahead===0)break}l.strstart+=l.lookahead,l.lookahead=0;var S=l.block_start+X;if((l.strstart===0||l.strstart>=S)&&(l.lookahead=l.strstart-S,l.strstart=S,L(l,!1),l.strm.avail_out===0)||l.strstart-l.block_start>=l.w_size-et&&(L(l,!1),l.strm.avail_out===0))return c}return l.insert=0,Q===_?(L(l,!0),l.strm.avail_out===0?J:q):(l.strstart>l.block_start&&(L(l,!1),l.strm.avail_out),c)}),new mt(4,4,8,4,ft),new mt(4,5,16,8,ft),new mt(4,6,32,32,ft),new mt(4,4,16,16,ut),new mt(8,16,32,32,ut),new mt(8,16,128,128,ut),new mt(8,32,128,256,ut),new mt(32,128,258,1024,ut),new mt(32,258,258,4096,ut)],n.deflateInit=function(l,Q){return kt(l,Q,E,15,8,0)},n.deflateInit2=kt,n.deflateReset=wt,n.deflateResetKeep=gt,n.deflateSetHeader=function(l,Q){return l&&l.state?l.state.wrap!==2?b:(l.state.gzhead=Q,h):b},n.deflate=function(l,Q){var X,S,y,k;if(!l||!l.state||5<Q||Q<0)return l?x(l,b):b;if(S=l.state,!l.output||!l.input&&l.avail_in!==0||S.status===666&&Q!==_)return x(l,l.avail_out===0?-5:b);if(S.strm=l,X=S.last_flush,S.last_flush=Q,S.status===R)if(S.wrap===2)l.adler=0,lt(S,31),lt(S,139),lt(S,8),S.gzhead?(lt(S,(S.gzhead.text?1:0)+(S.gzhead.hcrc?2:0)+(S.gzhead.extra?4:0)+(S.gzhead.name?8:0)+(S.gzhead.comment?16:0)),lt(S,255&S.gzhead.time),lt(S,S.gzhead.time>>8&255),lt(S,S.gzhead.time>>16&255),lt(S,S.gzhead.time>>24&255),lt(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),lt(S,255&S.gzhead.os),S.gzhead.extra&&S.gzhead.extra.length&&(lt(S,255&S.gzhead.extra.length),lt(S,S.gzhead.extra.length>>8&255)),S.gzhead.hcrc&&(l.adler=m(l.adler,S.pending_buf,S.pending,0)),S.gzindex=0,S.status=69):(lt(S,0),lt(S,0),lt(S,0),lt(S,0),lt(S,0),lt(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),lt(S,3),S.status=P);else{var V=E+(S.w_bits-8<<4)<<8;V|=(2<=S.strategy||S.level<2?0:S.level<6?1:S.level===6?2:3)<<6,S.strstart!==0&&(V|=32),V+=31-V%31,S.status=P,st(S,V),S.strstart!==0&&(st(S,l.adler>>>16),st(S,65535&l.adler)),l.adler=1}if(S.status===69)if(S.gzhead.extra){for(y=S.pending;S.gzindex<(65535&S.gzhead.extra.length)&&(S.pending!==S.pending_buf_size||(S.gzhead.hcrc&&S.pending>y&&(l.adler=m(l.adler,S.pending_buf,S.pending-y,y)),I(l),y=S.pending,S.pending!==S.pending_buf_size));)lt(S,255&S.gzhead.extra[S.gzindex]),S.gzindex++;S.gzhead.hcrc&&S.pending>y&&(l.adler=m(l.adler,S.pending_buf,S.pending-y,y)),S.gzindex===S.gzhead.extra.length&&(S.gzindex=0,S.status=73)}else S.status=73;if(S.status===73)if(S.gzhead.name){y=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>y&&(l.adler=m(l.adler,S.pending_buf,S.pending-y,y)),I(l),y=S.pending,S.pending===S.pending_buf_size)){k=1;break}k=S.gzindex<S.gzhead.name.length?255&S.gzhead.name.charCodeAt(S.gzindex++):0,lt(S,k)}while(k!==0);S.gzhead.hcrc&&S.pending>y&&(l.adler=m(l.adler,S.pending_buf,S.pending-y,y)),k===0&&(S.gzindex=0,S.status=91)}else S.status=91;if(S.status===91)if(S.gzhead.comment){y=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>y&&(l.adler=m(l.adler,S.pending_buf,S.pending-y,y)),I(l),y=S.pending,S.pending===S.pending_buf_size)){k=1;break}k=S.gzindex<S.gzhead.comment.length?255&S.gzhead.comment.charCodeAt(S.gzindex++):0,lt(S,k)}while(k!==0);S.gzhead.hcrc&&S.pending>y&&(l.adler=m(l.adler,S.pending_buf,S.pending-y,y)),k===0&&(S.status=103)}else S.status=103;if(S.status===103&&(S.gzhead.hcrc?(S.pending+2>S.pending_buf_size&&I(l),S.pending+2<=S.pending_buf_size&&(lt(S,255&l.adler),lt(S,l.adler>>8&255),l.adler=0,S.status=P)):S.status=P),S.pending!==0){if(I(l),l.avail_out===0)return S.last_flush=-1,h}else if(l.avail_in===0&&j(Q)<=j(X)&&Q!==_)return x(l,-5);if(S.status===666&&l.avail_in!==0)return x(l,-5);if(l.avail_in!==0||S.lookahead!==0||Q!==g&&S.status!==666){var Y=S.strategy===2?function(N,$){for(var ot;;){if(N.lookahead===0&&(vt(N),N.lookahead===0)){if($===g)return c;break}if(N.match_length=0,ot=i._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++,ot&&(L(N,!1),N.strm.avail_out===0))return c}return N.insert=0,$===_?(L(N,!0),N.strm.avail_out===0?J:q):N.last_lit&&(L(N,!1),N.strm.avail_out===0)?c:H}(S,Q):S.strategy===3?function(N,$){for(var ot,K,rt,yt,_t=N.window;;){if(N.lookahead<=Z){if(vt(N),N.lookahead<=Z&&$===g)return c;if(N.lookahead===0)break}if(N.match_length=0,N.lookahead>=z&&0<N.strstart&&(K=_t[rt=N.strstart-1])===_t[++rt]&&K===_t[++rt]&&K===_t[++rt]){yt=N.strstart+Z;do;while(K===_t[++rt]&&K===_t[++rt]&&K===_t[++rt]&&K===_t[++rt]&&K===_t[++rt]&&K===_t[++rt]&&K===_t[++rt]&&K===_t[++rt]&&rt<yt);N.match_length=Z-(yt-rt),N.match_length>N.lookahead&&(N.match_length=N.lookahead)}if(N.match_length>=z?(ot=i._tr_tally(N,1,N.match_length-z),N.lookahead-=N.match_length,N.strstart+=N.match_length,N.match_length=0):(ot=i._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++),ot&&(L(N,!1),N.strm.avail_out===0))return c}return N.insert=0,$===_?(L(N,!0),N.strm.avail_out===0?J:q):N.last_lit&&(L(N,!1),N.strm.avail_out===0)?c:H}(S,Q):e[S.level].func(S,Q);if(Y!==J&&Y!==q||(S.status=666),Y===c||Y===J)return l.avail_out===0&&(S.last_flush=-1),h;if(Y===H&&(Q===1?i._tr_align(S):Q!==5&&(i._tr_stored_block(S,0,0,!1),Q===3&&(nt(S.head),S.lookahead===0&&(S.strstart=0,S.block_start=0,S.insert=0))),I(l),l.avail_out===0))return S.last_flush=-1,h}return Q!==_?h:S.wrap<=0?1:(S.wrap===2?(lt(S,255&l.adler),lt(S,l.adler>>8&255),lt(S,l.adler>>16&255),lt(S,l.adler>>24&255),lt(S,255&l.total_in),lt(S,l.total_in>>8&255),lt(S,l.total_in>>16&255),lt(S,l.total_in>>24&255)):(st(S,l.adler>>>16),st(S,65535&l.adler)),I(l),0<S.wrap&&(S.wrap=-S.wrap),S.pending!==0?h:1)},n.deflateEnd=function(l){var Q;return l&&l.state?(Q=l.state.status)!==R&&Q!==69&&Q!==73&&Q!==91&&Q!==103&&Q!==P&&Q!==666?x(l,b):(l.state=null,Q===P?x(l,-3):h):b},n.deflateSetDictionary=function(l,Q){var X,S,y,k,V,Y,N,$,ot=Q.length;if(!l||!l.state||(k=(X=l.state).wrap)===2||k===1&&X.status!==R||X.lookahead)return b;for(k===1&&(l.adler=f(l.adler,Q,ot,0)),X.wrap=0,ot>=X.w_size&&(k===0&&(nt(X.head),X.strstart=0,X.block_start=0,X.insert=0),$=new s.Buf8(X.w_size),s.arraySet($,Q,ot-X.w_size,X.w_size,0),Q=$,ot=X.w_size),V=l.avail_in,Y=l.next_in,N=l.input,l.avail_in=ot,l.next_in=0,l.input=Q,vt(X);X.lookahead>=z;){for(S=X.strstart,y=X.lookahead-(z-1);X.ins_h=(X.ins_h<<X.hash_shift^X.window[S+z-1])&X.hash_mask,X.prev[S&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=S,S++,--y;);X.strstart=S,X.lookahead=z-1,vt(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=z-1,X.match_available=0,l.next_in=Y,l.input=N,l.avail_in=V,X.wrap=k,h},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,a,n){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,a,n){a.exports=function(e,s){var i,f,m,v,g,_,h,b,u,d,p,E,A,T,O,U,D,W,z,Z,et,R,P,c,H;i=e.state,f=e.next_in,c=e.input,m=f+(e.avail_in-5),v=e.next_out,H=e.output,g=v-(s-e.avail_out),_=v+(e.avail_out-257),h=i.dmax,b=i.wsize,u=i.whave,d=i.wnext,p=i.window,E=i.hold,A=i.bits,T=i.lencode,O=i.distcode,U=(1<<i.lenbits)-1,D=(1<<i.distbits)-1;t:do{A<15&&(E+=c[f++]<<A,A+=8,E+=c[f++]<<A,A+=8),W=T[E&U];e:for(;;){if(E>>>=z=W>>>24,A-=z,(z=W>>>16&255)===0)H[v++]=65535&W;else{if(!(16&z)){if(!(64&z)){W=T[(65535&W)+(E&(1<<z)-1)];continue e}if(32&z){i.mode=12;break t}e.msg="invalid literal/length code",i.mode=30;break t}Z=65535&W,(z&=15)&&(A<z&&(E+=c[f++]<<A,A+=8),Z+=E&(1<<z)-1,E>>>=z,A-=z),A<15&&(E+=c[f++]<<A,A+=8,E+=c[f++]<<A,A+=8),W=O[E&D];r:for(;;){if(E>>>=z=W>>>24,A-=z,!(16&(z=W>>>16&255))){if(!(64&z)){W=O[(65535&W)+(E&(1<<z)-1)];continue r}e.msg="invalid distance code",i.mode=30;break t}if(et=65535&W,A<(z&=15)&&(E+=c[f++]<<A,(A+=8)<z&&(E+=c[f++]<<A,A+=8)),h<(et+=E&(1<<z)-1)){e.msg="invalid distance too far back",i.mode=30;break t}if(E>>>=z,A-=z,(z=v-g)<et){if(u<(z=et-z)&&i.sane){e.msg="invalid distance too far back",i.mode=30;break t}if(P=p,(R=0)===d){if(R+=b-z,z<Z){for(Z-=z;H[v++]=p[R++],--z;);R=v-et,P=H}}else if(d<z){if(R+=b+d-z,(z-=d)<Z){for(Z-=z;H[v++]=p[R++],--z;);if(R=0,d<Z){for(Z-=z=d;H[v++]=p[R++],--z;);R=v-et,P=H}}}else if(R+=d-z,z<Z){for(Z-=z;H[v++]=p[R++],--z;);R=v-et,P=H}for(;2<Z;)H[v++]=P[R++],H[v++]=P[R++],H[v++]=P[R++],Z-=3;Z&&(H[v++]=P[R++],1<Z&&(H[v++]=P[R++]))}else{for(R=v-et;H[v++]=H[R++],H[v++]=H[R++],H[v++]=H[R++],2<(Z-=3););Z&&(H[v++]=H[R++],1<Z&&(H[v++]=H[R++]))}break}}break}}while(f<m&&v<_);f-=Z=A>>3,E&=(1<<(A-=Z<<3))-1,e.next_in=f,e.next_out=v,e.avail_in=f<m?m-f+5:5-(f-m),e.avail_out=v<_?_-v+257:257-(v-_),i.hold=E,i.bits=A}},{}],49:[function(t,a,n){var e=t("../utils/common"),s=t("./adler32"),i=t("./crc32"),f=t("./inffast"),m=t("./inftrees"),v=1,g=2,_=0,h=-2,b=1,u=852,d=592;function p(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(R){var P;return R&&R.state?(P=R.state,R.total_in=R.total_out=P.total=0,R.msg="",P.wrap&&(R.adler=1&P.wrap),P.mode=b,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new e.Buf32(u),P.distcode=P.distdyn=new e.Buf32(d),P.sane=1,P.back=-1,_):h}function T(R){var P;return R&&R.state?((P=R.state).wsize=0,P.whave=0,P.wnext=0,A(R)):h}function O(R,P){var c,H;return R&&R.state?(H=R.state,P<0?(c=0,P=-P):(c=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?h:(H.window!==null&&H.wbits!==P&&(H.window=null),H.wrap=c,H.wbits=P,T(R))):h}function U(R,P){var c,H;return R?(H=new E,(R.state=H).window=null,(c=O(R,P))!==_&&(R.state=null),c):h}var D,W,z=!0;function Z(R){if(z){var P;for(D=new e.Buf32(512),W=new e.Buf32(32),P=0;P<144;)R.lens[P++]=8;for(;P<256;)R.lens[P++]=9;for(;P<280;)R.lens[P++]=7;for(;P<288;)R.lens[P++]=8;for(m(v,R.lens,0,288,D,0,R.work,{bits:9}),P=0;P<32;)R.lens[P++]=5;m(g,R.lens,0,32,W,0,R.work,{bits:5}),z=!1}R.lencode=D,R.lenbits=9,R.distcode=W,R.distbits=5}function et(R,P,c,H){var J,q=R.state;return q.window===null&&(q.wsize=1<<q.wbits,q.wnext=0,q.whave=0,q.window=new e.Buf8(q.wsize)),H>=q.wsize?(e.arraySet(q.window,P,c-q.wsize,q.wsize,0),q.wnext=0,q.whave=q.wsize):(H<(J=q.wsize-q.wnext)&&(J=H),e.arraySet(q.window,P,c-H,J,q.wnext),(H-=J)?(e.arraySet(q.window,P,c-H,H,0),q.wnext=H,q.whave=q.wsize):(q.wnext+=J,q.wnext===q.wsize&&(q.wnext=0),q.whave<q.wsize&&(q.whave+=J))),0}n.inflateReset=T,n.inflateReset2=O,n.inflateResetKeep=A,n.inflateInit=function(R){return U(R,15)},n.inflateInit2=U,n.inflate=function(R,P){var c,H,J,q,x,j,nt,I,L,lt,st,tt,vt,ft,ut,mt,pt,gt,wt,kt,l,Q,X,S,y=0,k=new e.Buf8(4),V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return h;(c=R.state).mode===12&&(c.mode=13),x=R.next_out,J=R.output,nt=R.avail_out,q=R.next_in,H=R.input,j=R.avail_in,I=c.hold,L=c.bits,lt=j,st=nt,Q=_;t:for(;;)switch(c.mode){case b:if(c.wrap===0){c.mode=13;break}for(;L<16;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}if(2&c.wrap&&I===35615){k[c.check=0]=255&I,k[1]=I>>>8&255,c.check=i(c.check,k,2,0),L=I=0,c.mode=2;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&I)<<8)+(I>>8))%31){R.msg="incorrect header check",c.mode=30;break}if((15&I)!=8){R.msg="unknown compression method",c.mode=30;break}if(L-=4,l=8+(15&(I>>>=4)),c.wbits===0)c.wbits=l;else if(l>c.wbits){R.msg="invalid window size",c.mode=30;break}c.dmax=1<<l,R.adler=c.check=1,c.mode=512&I?10:12,L=I=0;break;case 2:for(;L<16;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}if(c.flags=I,(255&c.flags)!=8){R.msg="unknown compression method",c.mode=30;break}if(57344&c.flags){R.msg="unknown header flags set",c.mode=30;break}c.head&&(c.head.text=I>>8&1),512&c.flags&&(k[0]=255&I,k[1]=I>>>8&255,c.check=i(c.check,k,2,0)),L=I=0,c.mode=3;case 3:for(;L<32;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}c.head&&(c.head.time=I),512&c.flags&&(k[0]=255&I,k[1]=I>>>8&255,k[2]=I>>>16&255,k[3]=I>>>24&255,c.check=i(c.check,k,4,0)),L=I=0,c.mode=4;case 4:for(;L<16;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}c.head&&(c.head.xflags=255&I,c.head.os=I>>8),512&c.flags&&(k[0]=255&I,k[1]=I>>>8&255,c.check=i(c.check,k,2,0)),L=I=0,c.mode=5;case 5:if(1024&c.flags){for(;L<16;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}c.length=I,c.head&&(c.head.extra_len=I),512&c.flags&&(k[0]=255&I,k[1]=I>>>8&255,c.check=i(c.check,k,2,0)),L=I=0}else c.head&&(c.head.extra=null);c.mode=6;case 6:if(1024&c.flags&&(j<(tt=c.length)&&(tt=j),tt&&(c.head&&(l=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),e.arraySet(c.head.extra,H,q,tt,l)),512&c.flags&&(c.check=i(c.check,H,tt,q)),j-=tt,q+=tt,c.length-=tt),c.length))break t;c.length=0,c.mode=7;case 7:if(2048&c.flags){if(j===0)break t;for(tt=0;l=H[q+tt++],c.head&&l&&c.length<65536&&(c.head.name+=String.fromCharCode(l)),l&&tt<j;);if(512&c.flags&&(c.check=i(c.check,H,tt,q)),j-=tt,q+=tt,l)break t}else c.head&&(c.head.name=null);c.length=0,c.mode=8;case 8:if(4096&c.flags){if(j===0)break t;for(tt=0;l=H[q+tt++],c.head&&l&&c.length<65536&&(c.head.comment+=String.fromCharCode(l)),l&&tt<j;);if(512&c.flags&&(c.check=i(c.check,H,tt,q)),j-=tt,q+=tt,l)break t}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(512&c.flags){for(;L<16;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}if(I!==(65535&c.check)){R.msg="header crc mismatch",c.mode=30;break}L=I=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),R.adler=c.check=0,c.mode=12;break;case 10:for(;L<32;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}R.adler=c.check=p(I),L=I=0,c.mode=11;case 11:if(c.havedict===0)return R.next_out=x,R.avail_out=nt,R.next_in=q,R.avail_in=j,c.hold=I,c.bits=L,2;R.adler=c.check=1,c.mode=12;case 12:if(P===5||P===6)break t;case 13:if(c.last){I>>>=7&L,L-=7&L,c.mode=27;break}for(;L<3;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}switch(c.last=1&I,L-=1,3&(I>>>=1)){case 0:c.mode=14;break;case 1:if(Z(c),c.mode=20,P!==6)break;I>>>=2,L-=2;break t;case 2:c.mode=17;break;case 3:R.msg="invalid block type",c.mode=30}I>>>=2,L-=2;break;case 14:for(I>>>=7&L,L-=7&L;L<32;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}if((65535&I)!=(I>>>16^65535)){R.msg="invalid stored block lengths",c.mode=30;break}if(c.length=65535&I,L=I=0,c.mode=15,P===6)break t;case 15:c.mode=16;case 16:if(tt=c.length){if(j<tt&&(tt=j),nt<tt&&(tt=nt),tt===0)break t;e.arraySet(J,H,q,tt,x),j-=tt,q+=tt,nt-=tt,x+=tt,c.length-=tt;break}c.mode=12;break;case 17:for(;L<14;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}if(c.nlen=257+(31&I),I>>>=5,L-=5,c.ndist=1+(31&I),I>>>=5,L-=5,c.ncode=4+(15&I),I>>>=4,L-=4,286<c.nlen||30<c.ndist){R.msg="too many length or distance symbols",c.mode=30;break}c.have=0,c.mode=18;case 18:for(;c.have<c.ncode;){for(;L<3;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}c.lens[V[c.have++]]=7&I,I>>>=3,L-=3}for(;c.have<19;)c.lens[V[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,X={bits:c.lenbits},Q=m(0,c.lens,0,19,c.lencode,0,c.work,X),c.lenbits=X.bits,Q){R.msg="invalid code lengths set",c.mode=30;break}c.have=0,c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;mt=(y=c.lencode[I&(1<<c.lenbits)-1])>>>16&255,pt=65535&y,!((ut=y>>>24)<=L);){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}if(pt<16)I>>>=ut,L-=ut,c.lens[c.have++]=pt;else{if(pt===16){for(S=ut+2;L<S;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}if(I>>>=ut,L-=ut,c.have===0){R.msg="invalid bit length repeat",c.mode=30;break}l=c.lens[c.have-1],tt=3+(3&I),I>>>=2,L-=2}else if(pt===17){for(S=ut+3;L<S;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}L-=ut,l=0,tt=3+(7&(I>>>=ut)),I>>>=3,L-=3}else{for(S=ut+7;L<S;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}L-=ut,l=0,tt=11+(127&(I>>>=ut)),I>>>=7,L-=7}if(c.have+tt>c.nlen+c.ndist){R.msg="invalid bit length repeat",c.mode=30;break}for(;tt--;)c.lens[c.have++]=l}}if(c.mode===30)break;if(c.lens[256]===0){R.msg="invalid code -- missing end-of-block",c.mode=30;break}if(c.lenbits=9,X={bits:c.lenbits},Q=m(v,c.lens,0,c.nlen,c.lencode,0,c.work,X),c.lenbits=X.bits,Q){R.msg="invalid literal/lengths set",c.mode=30;break}if(c.distbits=6,c.distcode=c.distdyn,X={bits:c.distbits},Q=m(g,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,X),c.distbits=X.bits,Q){R.msg="invalid distances set",c.mode=30;break}if(c.mode=20,P===6)break t;case 20:c.mode=21;case 21:if(6<=j&&258<=nt){R.next_out=x,R.avail_out=nt,R.next_in=q,R.avail_in=j,c.hold=I,c.bits=L,f(R,st),x=R.next_out,J=R.output,nt=R.avail_out,q=R.next_in,H=R.input,j=R.avail_in,I=c.hold,L=c.bits,c.mode===12&&(c.back=-1);break}for(c.back=0;mt=(y=c.lencode[I&(1<<c.lenbits)-1])>>>16&255,pt=65535&y,!((ut=y>>>24)<=L);){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}if(mt&&!(240&mt)){for(gt=ut,wt=mt,kt=pt;mt=(y=c.lencode[kt+((I&(1<<gt+wt)-1)>>gt)])>>>16&255,pt=65535&y,!(gt+(ut=y>>>24)<=L);){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}I>>>=gt,L-=gt,c.back+=gt}if(I>>>=ut,L-=ut,c.back+=ut,c.length=pt,mt===0){c.mode=26;break}if(32&mt){c.back=-1,c.mode=12;break}if(64&mt){R.msg="invalid literal/length code",c.mode=30;break}c.extra=15&mt,c.mode=22;case 22:if(c.extra){for(S=c.extra;L<S;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}c.length+=I&(1<<c.extra)-1,I>>>=c.extra,L-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=23;case 23:for(;mt=(y=c.distcode[I&(1<<c.distbits)-1])>>>16&255,pt=65535&y,!((ut=y>>>24)<=L);){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}if(!(240&mt)){for(gt=ut,wt=mt,kt=pt;mt=(y=c.distcode[kt+((I&(1<<gt+wt)-1)>>gt)])>>>16&255,pt=65535&y,!(gt+(ut=y>>>24)<=L);){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}I>>>=gt,L-=gt,c.back+=gt}if(I>>>=ut,L-=ut,c.back+=ut,64&mt){R.msg="invalid distance code",c.mode=30;break}c.offset=pt,c.extra=15&mt,c.mode=24;case 24:if(c.extra){for(S=c.extra;L<S;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}c.offset+=I&(1<<c.extra)-1,I>>>=c.extra,L-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){R.msg="invalid distance too far back",c.mode=30;break}c.mode=25;case 25:if(nt===0)break t;if(tt=st-nt,c.offset>tt){if((tt=c.offset-tt)>c.whave&&c.sane){R.msg="invalid distance too far back",c.mode=30;break}vt=tt>c.wnext?(tt-=c.wnext,c.wsize-tt):c.wnext-tt,tt>c.length&&(tt=c.length),ft=c.window}else ft=J,vt=x-c.offset,tt=c.length;for(nt<tt&&(tt=nt),nt-=tt,c.length-=tt;J[x++]=ft[vt++],--tt;);c.length===0&&(c.mode=21);break;case 26:if(nt===0)break t;J[x++]=c.length,nt--,c.mode=21;break;case 27:if(c.wrap){for(;L<32;){if(j===0)break t;j--,I|=H[q++]<<L,L+=8}if(st-=nt,R.total_out+=st,c.total+=st,st&&(R.adler=c.check=c.flags?i(c.check,J,st,x-st):s(c.check,J,st,x-st)),st=nt,(c.flags?I:p(I))!==c.check){R.msg="incorrect data check",c.mode=30;break}L=I=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;L<32;){if(j===0)break t;j--,I+=H[q++]<<L,L+=8}if(I!==(4294967295&c.total)){R.msg="incorrect length check",c.mode=30;break}L=I=0}c.mode=29;case 29:Q=1;break t;case 30:Q=-3;break t;case 31:return-4;case 32:default:return h}return R.next_out=x,R.avail_out=nt,R.next_in=q,R.avail_in=j,c.hold=I,c.bits=L,(c.wsize||st!==R.avail_out&&c.mode<30&&(c.mode<27||P!==4))&&et(R,R.output,R.next_out,st-R.avail_out)?(c.mode=31,-4):(lt-=R.avail_in,st-=R.avail_out,R.total_in+=lt,R.total_out+=st,c.total+=st,c.wrap&&st&&(R.adler=c.check=c.flags?i(c.check,J,st,R.next_out-st):s(c.check,J,st,R.next_out-st)),R.data_type=c.bits+(c.last?64:0)+(c.mode===12?128:0)+(c.mode===20||c.mode===15?256:0),(lt==0&&st===0||P===4)&&Q===_&&(Q=-5),Q)},n.inflateEnd=function(R){if(!R||!R.state)return h;var P=R.state;return P.window&&(P.window=null),R.state=null,_},n.inflateGetHeader=function(R,P){var c;return R&&R.state&&2&(c=R.state).wrap?((c.head=P).done=!1,_):h},n.inflateSetDictionary=function(R,P){var c,H=P.length;return R&&R.state?(c=R.state).wrap!==0&&c.mode!==11?h:c.mode===11&&s(1,P,H,0)!==c.check?-3:et(R,P,H,H)?(c.mode=31,-4):(c.havedict=1,_):h},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,a,n){var e=t("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(v,g,_,h,b,u,d,p){var E,A,T,O,U,D,W,z,Z,et=p.bits,R=0,P=0,c=0,H=0,J=0,q=0,x=0,j=0,nt=0,I=0,L=null,lt=0,st=new e.Buf16(16),tt=new e.Buf16(16),vt=null,ft=0;for(R=0;R<=15;R++)st[R]=0;for(P=0;P<h;P++)st[g[_+P]]++;for(J=et,H=15;1<=H&&st[H]===0;H--);if(H<J&&(J=H),H===0)return b[u++]=20971520,b[u++]=20971520,p.bits=1,0;for(c=1;c<H&&st[c]===0;c++);for(J<c&&(J=c),R=j=1;R<=15;R++)if(j<<=1,(j-=st[R])<0)return-1;if(0<j&&(v===0||H!==1))return-1;for(tt[1]=0,R=1;R<15;R++)tt[R+1]=tt[R]+st[R];for(P=0;P<h;P++)g[_+P]!==0&&(d[tt[g[_+P]]++]=P);if(D=v===0?(L=vt=d,19):v===1?(L=s,lt-=257,vt=i,ft-=257,256):(L=f,vt=m,-1),R=c,U=u,x=P=I=0,T=-1,O=(nt=1<<(q=J))-1,v===1&&852<nt||v===2&&592<nt)return 1;for(;;){for(W=R-x,Z=d[P]<D?(z=0,d[P]):d[P]>D?(z=vt[ft+d[P]],L[lt+d[P]]):(z=96,0),E=1<<R-x,c=A=1<<q;b[U+(I>>x)+(A-=E)]=W<<24|z<<16|Z|0,A!==0;);for(E=1<<R-1;I&E;)E>>=1;if(E!==0?(I&=E-1,I+=E):I=0,P++,--st[R]==0){if(R===H)break;R=g[_+d[P]]}if(J<R&&(I&O)!==T){for(x===0&&(x=J),U+=c,j=1<<(q=R-x);q+x<H&&!((j-=st[q+x])<=0);)q++,j<<=1;if(nt+=1<<q,v===1&&852<nt||v===2&&592<nt)return 1;b[T=I&O]=J<<24|q<<16|U-u|0}}return I!==0&&(b[U+I]=R-x<<24|64<<16|0),p.bits=J,0}},{"../utils/common":41}],51:[function(t,a,n){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,a,n){var e=t("../utils/common"),s=0,i=1;function f(y){for(var k=y.length;0<=--k;)y[k]=0}var m=0,v=29,g=256,_=g+1+v,h=30,b=19,u=2*_+1,d=15,p=16,E=7,A=256,T=16,O=17,U=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],W=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],et=new Array(2*(_+2));f(et);var R=new Array(2*h);f(R);var P=new Array(512);f(P);var c=new Array(256);f(c);var H=new Array(v);f(H);var J,q,x,j=new Array(h);function nt(y,k,V,Y,N){this.static_tree=y,this.extra_bits=k,this.extra_base=V,this.elems=Y,this.max_length=N,this.has_stree=y&&y.length}function I(y,k){this.dyn_tree=y,this.max_code=0,this.stat_desc=k}function L(y){return y<256?P[y]:P[256+(y>>>7)]}function lt(y,k){y.pending_buf[y.pending++]=255&k,y.pending_buf[y.pending++]=k>>>8&255}function st(y,k,V){y.bi_valid>p-V?(y.bi_buf|=k<<y.bi_valid&65535,lt(y,y.bi_buf),y.bi_buf=k>>p-y.bi_valid,y.bi_valid+=V-p):(y.bi_buf|=k<<y.bi_valid&65535,y.bi_valid+=V)}function tt(y,k,V){st(y,V[2*k],V[2*k+1])}function vt(y,k){for(var V=0;V|=1&y,y>>>=1,V<<=1,0<--k;);return V>>>1}function ft(y,k,V){var Y,N,$=new Array(d+1),ot=0;for(Y=1;Y<=d;Y++)$[Y]=ot=ot+V[Y-1]<<1;for(N=0;N<=k;N++){var K=y[2*N+1];K!==0&&(y[2*N]=vt($[K]++,K))}}function ut(y){var k;for(k=0;k<_;k++)y.dyn_ltree[2*k]=0;for(k=0;k<h;k++)y.dyn_dtree[2*k]=0;for(k=0;k<b;k++)y.bl_tree[2*k]=0;y.dyn_ltree[2*A]=1,y.opt_len=y.static_len=0,y.last_lit=y.matches=0}function mt(y){8<y.bi_valid?lt(y,y.bi_buf):0<y.bi_valid&&(y.pending_buf[y.pending++]=y.bi_buf),y.bi_buf=0,y.bi_valid=0}function pt(y,k,V,Y){var N=2*k,$=2*V;return y[N]<y[$]||y[N]===y[$]&&Y[k]<=Y[V]}function gt(y,k,V){for(var Y=y.heap[V],N=V<<1;N<=y.heap_len&&(N<y.heap_len&&pt(k,y.heap[N+1],y.heap[N],y.depth)&&N++,!pt(k,Y,y.heap[N],y.depth));)y.heap[V]=y.heap[N],V=N,N<<=1;y.heap[V]=Y}function wt(y,k,V){var Y,N,$,ot,K=0;if(y.last_lit!==0)for(;Y=y.pending_buf[y.d_buf+2*K]<<8|y.pending_buf[y.d_buf+2*K+1],N=y.pending_buf[y.l_buf+K],K++,Y===0?tt(y,N,k):(tt(y,($=c[N])+g+1,k),(ot=D[$])!==0&&st(y,N-=H[$],ot),tt(y,$=L(--Y),V),(ot=W[$])!==0&&st(y,Y-=j[$],ot)),K<y.last_lit;);tt(y,A,k)}function kt(y,k){var V,Y,N,$=k.dyn_tree,ot=k.stat_desc.static_tree,K=k.stat_desc.has_stree,rt=k.stat_desc.elems,yt=-1;for(y.heap_len=0,y.heap_max=u,V=0;V<rt;V++)$[2*V]!==0?(y.heap[++y.heap_len]=yt=V,y.depth[V]=0):$[2*V+1]=0;for(;y.heap_len<2;)$[2*(N=y.heap[++y.heap_len]=yt<2?++yt:0)]=1,y.depth[N]=0,y.opt_len--,K&&(y.static_len-=ot[2*N+1]);for(k.max_code=yt,V=y.heap_len>>1;1<=V;V--)gt(y,$,V);for(N=rt;V=y.heap[1],y.heap[1]=y.heap[y.heap_len--],gt(y,$,1),Y=y.heap[1],y.heap[--y.heap_max]=V,y.heap[--y.heap_max]=Y,$[2*N]=$[2*V]+$[2*Y],y.depth[N]=(y.depth[V]>=y.depth[Y]?y.depth[V]:y.depth[Y])+1,$[2*V+1]=$[2*Y+1]=N,y.heap[1]=N++,gt(y,$,1),2<=y.heap_len;);y.heap[--y.heap_max]=y.heap[1],function(_t,Ot){var Tt,Ct,Et,bt,St,Nt,Pt=Ot.dyn_tree,Xt=Ot.max_code,te=Ot.stat_desc.static_tree,le=Ot.stat_desc.has_stree,ue=Ot.stat_desc.extra_bits,Yt=Ot.stat_desc.extra_base,qt=Ot.stat_desc.max_length,Ht=0;for(bt=0;bt<=d;bt++)_t.bl_count[bt]=0;for(Pt[2*_t.heap[_t.heap_max]+1]=0,Tt=_t.heap_max+1;Tt<u;Tt++)qt<(bt=Pt[2*Pt[2*(Ct=_t.heap[Tt])+1]+1]+1)&&(bt=qt,Ht++),Pt[2*Ct+1]=bt,Xt<Ct||(_t.bl_count[bt]++,St=0,Yt<=Ct&&(St=ue[Ct-Yt]),Nt=Pt[2*Ct],_t.opt_len+=Nt*(bt+St),le&&(_t.static_len+=Nt*(te[2*Ct+1]+St)));if(Ht!==0){do{for(bt=qt-1;_t.bl_count[bt]===0;)bt--;_t.bl_count[bt]--,_t.bl_count[bt+1]+=2,_t.bl_count[qt]--,Ht-=2}while(0<Ht);for(bt=qt;bt!==0;bt--)for(Ct=_t.bl_count[bt];Ct!==0;)Xt<(Et=_t.heap[--Tt])||(Pt[2*Et+1]!==bt&&(_t.opt_len+=(bt-Pt[2*Et+1])*Pt[2*Et],Pt[2*Et+1]=bt),Ct--)}}(y,k),ft($,yt,y.bl_count)}function l(y,k,V){var Y,N,$=-1,ot=k[1],K=0,rt=7,yt=4;for(ot===0&&(rt=138,yt=3),k[2*(V+1)+1]=65535,Y=0;Y<=V;Y++)N=ot,ot=k[2*(Y+1)+1],++K<rt&&N===ot||(K<yt?y.bl_tree[2*N]+=K:N!==0?(N!==$&&y.bl_tree[2*N]++,y.bl_tree[2*T]++):K<=10?y.bl_tree[2*O]++:y.bl_tree[2*U]++,$=N,yt=(K=0)===ot?(rt=138,3):N===ot?(rt=6,3):(rt=7,4))}function Q(y,k,V){var Y,N,$=-1,ot=k[1],K=0,rt=7,yt=4;for(ot===0&&(rt=138,yt=3),Y=0;Y<=V;Y++)if(N=ot,ot=k[2*(Y+1)+1],!(++K<rt&&N===ot)){if(K<yt)for(;tt(y,N,y.bl_tree),--K!=0;);else N!==0?(N!==$&&(tt(y,N,y.bl_tree),K--),tt(y,T,y.bl_tree),st(y,K-3,2)):K<=10?(tt(y,O,y.bl_tree),st(y,K-3,3)):(tt(y,U,y.bl_tree),st(y,K-11,7));$=N,yt=(K=0)===ot?(rt=138,3):N===ot?(rt=6,3):(rt=7,4)}}f(j);var X=!1;function S(y,k,V,Y){st(y,(m<<1)+(Y?1:0),3),function(N,$,ot,K){mt(N),K&&(lt(N,ot),lt(N,~ot)),e.arraySet(N.pending_buf,N.window,$,ot,N.pending),N.pending+=ot}(y,k,V,!0)}n._tr_init=function(y){X||(function(){var k,V,Y,N,$,ot=new Array(d+1);for(N=Y=0;N<v-1;N++)for(H[N]=Y,k=0;k<1<<D[N];k++)c[Y++]=N;for(c[Y-1]=N,N=$=0;N<16;N++)for(j[N]=$,k=0;k<1<<W[N];k++)P[$++]=N;for($>>=7;N<h;N++)for(j[N]=$<<7,k=0;k<1<<W[N]-7;k++)P[256+$++]=N;for(V=0;V<=d;V++)ot[V]=0;for(k=0;k<=143;)et[2*k+1]=8,k++,ot[8]++;for(;k<=255;)et[2*k+1]=9,k++,ot[9]++;for(;k<=279;)et[2*k+1]=7,k++,ot[7]++;for(;k<=287;)et[2*k+1]=8,k++,ot[8]++;for(ft(et,_+1,ot),k=0;k<h;k++)R[2*k+1]=5,R[2*k]=vt(k,5);J=new nt(et,D,g+1,_,d),q=new nt(R,W,0,h,d),x=new nt(new Array(0),z,0,b,E)}(),X=!0),y.l_desc=new I(y.dyn_ltree,J),y.d_desc=new I(y.dyn_dtree,q),y.bl_desc=new I(y.bl_tree,x),y.bi_buf=0,y.bi_valid=0,ut(y)},n._tr_stored_block=S,n._tr_flush_block=function(y,k,V,Y){var N,$,ot=0;0<y.level?(y.strm.data_type===2&&(y.strm.data_type=function(K){var rt,yt=4093624447;for(rt=0;rt<=31;rt++,yt>>>=1)if(1&yt&&K.dyn_ltree[2*rt]!==0)return s;if(K.dyn_ltree[18]!==0||K.dyn_ltree[20]!==0||K.dyn_ltree[26]!==0)return i;for(rt=32;rt<g;rt++)if(K.dyn_ltree[2*rt]!==0)return i;return s}(y)),kt(y,y.l_desc),kt(y,y.d_desc),ot=function(K){var rt;for(l(K,K.dyn_ltree,K.l_desc.max_code),l(K,K.dyn_dtree,K.d_desc.max_code),kt(K,K.bl_desc),rt=b-1;3<=rt&&K.bl_tree[2*Z[rt]+1]===0;rt--);return K.opt_len+=3*(rt+1)+5+5+4,rt}(y),N=y.opt_len+3+7>>>3,($=y.static_len+3+7>>>3)<=N&&(N=$)):N=$=V+5,V+4<=N&&k!==-1?S(y,k,V,Y):y.strategy===4||$===N?(st(y,2+(Y?1:0),3),wt(y,et,R)):(st(y,4+(Y?1:0),3),function(K,rt,yt,_t){var Ot;for(st(K,rt-257,5),st(K,yt-1,5),st(K,_t-4,4),Ot=0;Ot<_t;Ot++)st(K,K.bl_tree[2*Z[Ot]+1],3);Q(K,K.dyn_ltree,rt-1),Q(K,K.dyn_dtree,yt-1)}(y,y.l_desc.max_code+1,y.d_desc.max_code+1,ot+1),wt(y,y.dyn_ltree,y.dyn_dtree)),ut(y),Y&&mt(y)},n._tr_tally=function(y,k,V){return y.pending_buf[y.d_buf+2*y.last_lit]=k>>>8&255,y.pending_buf[y.d_buf+2*y.last_lit+1]=255&k,y.pending_buf[y.l_buf+y.last_lit]=255&V,y.last_lit++,k===0?y.dyn_ltree[2*V]++:(y.matches++,k--,y.dyn_ltree[2*(c[V]+g+1)]++,y.dyn_dtree[2*L(k)]++),y.last_lit===y.lit_bufsize-1},n._tr_align=function(y){st(y,2,3),tt(y,A,et),function(k){k.bi_valid===16?(lt(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):8<=k.bi_valid&&(k.pending_buf[k.pending++]=255&k.bi_buf,k.bi_buf>>=8,k.bi_valid-=8)}(y)}},{"../utils/common":41}],53:[function(t,a,n){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,a,n){(function(e){(function(s,i){if(!s.setImmediate){var f,m,v,g,_=1,h={},b=!1,u=s.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(s);d=d&&d.setTimeout?d:s,f={}.toString.call(s.process)==="[object process]"?function(T){process.nextTick(function(){E(T)})}:function(){if(s.postMessage&&!s.importScripts){var T=!0,O=s.onmessage;return s.onmessage=function(){T=!1},s.postMessage("","*"),s.onmessage=O,T}}()?(g="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",A,!1):s.attachEvent("onmessage",A),function(T){s.postMessage(g+T,"*")}):s.MessageChannel?((v=new MessageChannel).port1.onmessage=function(T){E(T.data)},function(T){v.port2.postMessage(T)}):u&&"onreadystatechange"in u.createElement("script")?(m=u.documentElement,function(T){var O=u.createElement("script");O.onreadystatechange=function(){E(T),O.onreadystatechange=null,m.removeChild(O),O=null},m.appendChild(O)}):function(T){setTimeout(E,0,T)},d.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var O=new Array(arguments.length-1),U=0;U<O.length;U++)O[U]=arguments[U+1];var D={callback:T,args:O};return h[_]=D,f(_),_++},d.clearImmediate=p}function p(T){delete h[T]}function E(T){if(b)setTimeout(E,0,T);else{var O=h[T];if(O){b=!0;try{(function(U){var D=U.callback,W=U.args;switch(W.length){case 0:D();break;case 1:D(W[0]);break;case 2:D(W[0],W[1]);break;case 3:D(W[0],W[1],W[2]);break;default:D.apply(i,W)}})(O)}finally{p(T),b=!1}}}}function A(T){T.source===s&&typeof T.data=="string"&&T.data.indexOf(g)===0&&E(+T.data.slice(g.length))}})(typeof self>"u"?e===void 0?this:e:self)}).call(this,typeof ie<"u"?ie:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Vr);var ns=Vr.exports;const ss=Qr(ns);var Zr={exports:{}};(function(o,r){(function(t,a){a()})(ie,function(){function t(m,v){return typeof v>"u"?v={autoBom:!1}:typeof v!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),v={autoBom:!v}),v.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function a(m,v,g){var _=new XMLHttpRequest;_.open("GET",m),_.responseType="blob",_.onload=function(){f(_.response,v,g)},_.onerror=function(){console.error("could not download file")},_.send()}function n(m){var v=new XMLHttpRequest;v.open("HEAD",m,!1);try{v.send()}catch{}return 200<=v.status&&299>=v.status}function e(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var v=document.createEvent("MouseEvents");v.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(v)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ie=="object"&&ie.global===ie?ie:void 0,i=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(m,v,g){var _=s.URL||s.webkitURL,h=document.createElement("a");v=v||m.name||"download",h.download=v,h.rel="noopener",typeof m=="string"?(h.href=m,h.origin===location.origin?e(h):n(h.href)?a(m,v,g):e(h,h.target="_blank")):(h.href=_.createObjectURL(m),setTimeout(function(){_.revokeObjectURL(h.href)},4e4),setTimeout(function(){e(h)},0))}:"msSaveOrOpenBlob"in navigator?function(m,v,g){if(v=v||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(t(m,g),v);else if(n(m))a(m,v,g);else{var _=document.createElement("a");_.href=m,_.target="_blank",setTimeout(function(){e(_)})}}:function(m,v,g,_){if(_=_||open("","_blank"),_&&(_.document.title=_.document.body.innerText="downloading..."),typeof m=="string")return a(m,v,g);var h=m.type==="application/octet-stream",b=/constructor/i.test(s.HTMLElement)||s.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||h&&b||i)&&typeof FileReader<"u"){var d=new FileReader;d.onloadend=function(){var A=d.result;A=u?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),_?_.location.href=A:location=A,_=null},d.readAsDataURL(m)}else{var p=s.URL||s.webkitURL,E=p.createObjectURL(m);_?_.location=E:location.href=E,_=null,setTimeout(function(){p.revokeObjectURL(E)},4e4)}});s.saveAs=f.saveAs=f,o.exports=f})})(Zr);var as=Zr.exports;async function is(o,r,t="watermarked_images.zip"){const a=new ss;o.forEach((e,s)=>{const i=`${s+1}.jpg`;a.file(i,e)});const n=await a.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}});as.saveAs(n,t)}const{window:os}=Yr;function Or(o){let r,t;return{c(){r=F("img"),this.h()},l(a){r=M(a,"IMG",{src:!0,alt:!0,draggable:!0,class:!0}),this.h()},h(){Qe(r.src,t=o[2]||o[1])||C(r,"src",t),C(r,"alt","Preview"),C(r,"draggable","false"),C(r,"class","svelte-1aw8ds9")},m(a,n){It(a,r,n)},p(a,n){n[0]&6&&!Qe(r.src,t=a[2]||a[1])&&C(r,"src",t)},d(a){a&&B(r)}}}function Dr(o){let r,t,a,n,e,s,i,f,m,v,g,_,h,b,u,d,p,E,A,T,O;return{c(){r=F("div"),t=F("div"),a=at(),n=F("button"),e=at(),s=F("button"),i=at(),f=F("button"),m=at(),v=F("button"),g=at(),_=F("button"),h=at(),b=F("button"),u=at(),d=F("button"),p=at(),E=F("button"),this.h()},l(U){r=M(U,"DIV",{class:!0,style:!0});var D=G(r);t=M(D,"DIV",{class:!0,"aria-hidden":!0}),G(t).forEach(B),a=it(D),n=M(D,"BUTTON",{type:!0,class:!0,"aria-label":!0}),G(n).forEach(B),e=it(D),s=M(D,"BUTTON",{type:!0,class:!0,"aria-label":!0}),G(s).forEach(B),i=it(D),f=M(D,"BUTTON",{type:!0,class:!0,"aria-label":!0}),G(f).forEach(B),m=it(D),v=M(D,"BUTTON",{type:!0,class:!0,"aria-label":!0}),G(v).forEach(B),g=it(D),_=M(D,"BUTTON",{type:!0,class:!0,"aria-label":!0}),G(_).forEach(B),h=it(D),b=M(D,"BUTTON",{type:!0,class:!0,"aria-label":!0}),G(b).forEach(B),u=it(D),d=M(D,"BUTTON",{type:!0,class:!0,"aria-label":!0}),G(d).forEach(B),p=it(D),E=M(D,"BUTTON",{type:!0,class:!0,"aria-label":!0}),G(E).forEach(B),D.forEach(B),this.h()},h(){C(t,"class","crop-grid svelte-1aw8ds9"),C(t,"aria-hidden","true"),C(n,"type","button"),C(n,"class","crop-handle nw svelte-1aw8ds9"),C(n,"aria-label","Resize from top left"),C(s,"type","button"),C(s,"class","crop-handle ne svelte-1aw8ds9"),C(s,"aria-label","Resize from top right"),C(f,"type","button"),C(f,"class","crop-handle sw svelte-1aw8ds9"),C(f,"aria-label","Resize from bottom left"),C(v,"type","button"),C(v,"class","crop-handle se svelte-1aw8ds9"),C(v,"aria-label","Resize from bottom right"),C(_,"type","button"),C(_,"class","crop-handle edge n svelte-1aw8ds9"),C(_,"aria-label","Resize from top edge"),C(b,"type","button"),C(b,"class","crop-handle edge s svelte-1aw8ds9"),C(b,"aria-label","Resize from bottom edge"),C(d,"type","button"),C(d,"class","crop-handle edge e svelte-1aw8ds9"),C(d,"aria-label","Resize from right edge"),C(E,"type","button"),C(E,"class","crop-handle edge w svelte-1aw8ds9"),C(E,"aria-label","Resize from left edge"),C(r,"class","crop-overlay svelte-1aw8ds9"),C(r,"style",A=`left: ${o[0].crop.x*100}%;
                top: ${o[0].crop.y*100}%;
                width: ${o[0].crop.width*100}%;
                height: ${o[0].crop.height*100}%;`)},m(U,D){It(U,r,D),w(r,t),w(r,a),w(r,n),w(r,e),w(r,s),w(r,i),w(r,f),w(r,m),w(r,v),w(r,g),w(r,_),w(r,h),w(r,b),w(r,u),w(r,d),w(r,p),w(r,E),T||(O=[ht(n,"pointerdown",ae(o[20])),ht(s,"pointerdown",ae(o[21])),ht(f,"pointerdown",ae(o[22])),ht(v,"pointerdown",ae(o[23])),ht(_,"pointerdown",ae(o[24])),ht(b,"pointerdown",ae(o[25])),ht(d,"pointerdown",ae(o[26])),ht(E,"pointerdown",ae(o[27])),ht(r,"pointerdown",ae(o[11]))],T=!0)},p(U,D){D[0]&1&&A!==(A=`left: ${U[0].crop.x*100}%;
                top: ${U[0].crop.y*100}%;
                width: ${U[0].crop.width*100}%;
                height: ${U[0].crop.height*100}%;`)&&C(r,"style",A)},d(U){U&&B(r),T=!1,re(O)}}}function ls(o){let r,t,a,n,e,s,i,f,m,v,g,_,h,b,u,d,p,E,A,T,O,U,D,W,z,Z,et,R,P,c,H,J,q,x,j,nt,I,L,lt,st,tt,vt,ft,ut,mt,pt,gt,wt,kt,l,Q,X,S,y,k,V,Y,N,$,ot,K,rt=o[5]?"Saving...":"Save Changes",yt,_t,Ot,Tt,Ct=(o[2]||o[1])&&Or(o),Et=o[0].crop&&Dr(o);return wt=new un({props:{size:18}}),Q=new pn({props:{size:18}}),{c(){r=F("div"),t=F("div"),a=F("div"),n=F("div"),e=F("h2"),s=ct("Adjust image"),i=at(),f=F("p"),m=ct("Drag to crop, rotate, or switch aspect ratios."),v=at(),g=F("button"),_=ct(""),h=at(),b=F("div"),u=F("div"),d=F("div"),Ct&&Ct.c(),p=at(),Et&&Et.c(),A=at(),T=F("p"),O=ct("Drag inside the frame to move, or drag corners/edges to resize."),U=at(),D=F("div"),W=F("div"),z=F("div"),Z=F("p"),et=ct("Aspect ratio"),R=at(),P=F("p"),c=ct("Rotate"),H=at(),J=F("div"),q=F("div"),x=F("button"),j=ct("Original"),nt=at(),I=F("button"),L=ct("4 : 3"),lt=at(),st=F("button"),tt=ct("3 : 4"),vt=at(),ft=F("button"),ut=ct("1 : 1"),mt=at(),pt=F("div"),gt=F("button"),jt(wt.$$.fragment),kt=at(),l=F("button"),jt(Q.$$.fragment),X=at(),S=F("div"),y=F("button"),k=ct("Reset"),V=at(),Y=F("div"),N=F("button"),$=ct("Cancel"),ot=at(),K=F("button"),yt=ct(rt),this.h()},l(bt){r=M(bt,"DIV",{class:!0,tabindex:!0});var St=G(r);t=M(St,"DIV",{class:!0,role:!0,"aria-modal":!0});var Nt=G(t);a=M(Nt,"DIV",{class:!0});var Pt=G(a);n=M(Pt,"DIV",{});var Xt=G(n);e=M(Xt,"H2",{class:!0});var te=G(e);s=dt(te,"Adjust image"),te.forEach(B),i=it(Xt),f=M(Xt,"P",{class:!0});var le=G(f);m=dt(le,"Drag to crop, rotate, or switch aspect ratios."),le.forEach(B),Xt.forEach(B),v=it(Pt),g=M(Pt,"BUTTON",{class:!0,type:!0,"aria-label":!0});var ue=G(g);_=dt(ue,""),ue.forEach(B),Pt.forEach(B),h=it(Nt),b=M(Nt,"DIV",{class:!0});var Yt=G(b);u=M(Yt,"DIV",{class:!0});var qt=G(u);d=M(qt,"DIV",{class:!0,style:!0});var Ht=G(d);Ct&&Ct.l(Ht),p=it(Ht),Et&&Et.l(Ht),Ht.forEach(B),A=it(qt),T=M(qt,"P",{class:!0});var Ft=G(T);O=dt(Ft,"Drag inside the frame to move, or drag corners/edges to resize."),Ft.forEach(B),qt.forEach(B),U=it(Yt),D=M(Yt,"DIV",{class:!0});var Ut=G(D);W=M(Ut,"DIV",{class:!0});var Dt=G(W);z=M(Dt,"DIV",{class:!0});var zt=G(z);Z=M(zt,"P",{class:!0});var Ee=G(Z);et=dt(Ee,"Aspect ratio"),Ee.forEach(B),R=it(zt),P=M(zt,"P",{class:!0});var he=G(P);c=dt(he,"Rotate"),he.forEach(B),zt.forEach(B),H=it(Dt),J=M(Dt,"DIV",{class:!0});var ne=G(J);q=M(ne,"DIV",{class:!0});var Kt=G(q);x=M(Kt,"BUTTON",{type:!0,class:!0});var ce=G(x);j=dt(ce,"Original"),ce.forEach(B),nt=it(Kt),I=M(Kt,"BUTTON",{type:!0,class:!0});var Ce=G(I);L=dt(Ce,"4 : 3"),Ce.forEach(B),lt=it(Kt),st=M(Kt,"BUTTON",{type:!0,class:!0});var Se=G(st);tt=dt(Se,"3 : 4"),Se.forEach(B),vt=it(Kt),ft=M(Kt,"BUTTON",{type:!0,class:!0});var Ie=G(ft);ut=dt(Ie,"1 : 1"),Ie.forEach(B),Kt.forEach(B),mt=it(ne),pt=M(ne,"DIV",{class:!0});var pe=G(pt);gt=M(pe,"BUTTON",{type:!0,class:!0,"aria-label":!0});var me=G(gt);xt(wt.$$.fragment,me),me.forEach(B),kt=it(pe),l=M(pe,"BUTTON",{type:!0,class:!0,"aria-label":!0});var Ae=G(l);xt(Q.$$.fragment,Ae),Ae.forEach(B),pe.forEach(B),ne.forEach(B),Dt.forEach(B),X=it(Ut),S=M(Ut,"DIV",{class:!0});var se=G(S);y=M(se,"BUTTON",{type:!0,class:!0});var Re=G(y);k=dt(Re,"Reset"),Re.forEach(B),V=it(se),Y=M(se,"DIV",{class:!0});var _e=G(Y);N=M(_e,"BUTTON",{type:!0,class:!0});var Te=G(N);$=dt(Te,"Cancel"),Te.forEach(B),ot=it(_e),K=M(_e,"BUTTON",{type:!0,class:!0});var ze=G(K);yt=dt(ze,rt),ze.forEach(B),_e.forEach(B),se.forEach(B),Ut.forEach(B),Yt.forEach(B),Nt.forEach(B),St.forEach(B),this.h()},h(){C(e,"class","svelte-1aw8ds9"),C(f,"class","svelte-1aw8ds9"),C(g,"class","close-button svelte-1aw8ds9"),C(g,"type","button"),C(g,"aria-label","Close editor"),C(a,"class","editor-header svelte-1aw8ds9"),C(d,"class","crop-stage svelte-1aw8ds9"),C(d,"style",E=`aspect-ratio: ${o[4].width} / ${o[4].height};`),C(T,"class","helper-text svelte-1aw8ds9"),C(u,"class","preview-column svelte-1aw8ds9"),C(Z,"class","control-label svelte-1aw8ds9"),C(P,"class","control-label svelte-1aw8ds9"),C(z,"class","labels-row svelte-1aw8ds9"),C(x,"type","button"),C(x,"class","svelte-1aw8ds9"),Bt(x,"selected",o[0].aspectRatio==="none"),C(I,"type","button"),C(I,"class","svelte-1aw8ds9"),Bt(I,"selected",o[0].aspectRatio==="4:3"),C(st,"type","button"),C(st,"class","svelte-1aw8ds9"),Bt(st,"selected",o[0].aspectRatio==="3:4"),C(ft,"type","button"),C(ft,"class","svelte-1aw8ds9"),Bt(ft,"selected",o[0].aspectRatio==="1:1"),C(q,"class","segment svelte-1aw8ds9"),C(gt,"type","button"),C(gt,"class","rotate-btn svelte-1aw8ds9"),C(gt,"aria-label","Rotate -90 degrees"),C(l,"type","button"),C(l,"class","rotate-btn svelte-1aw8ds9"),C(l,"aria-label","Rotate +90 degrees"),C(pt,"class","rotate-buttons svelte-1aw8ds9"),C(J,"class","segment-with-rotate svelte-1aw8ds9"),C(W,"class","control-group svelte-1aw8ds9"),C(y,"type","button"),C(y,"class","ghost svelte-1aw8ds9"),C(N,"type","button"),C(N,"class","ghost svelte-1aw8ds9"),C(K,"type","button"),C(K,"class","primary svelte-1aw8ds9"),K.disabled=o[5],C(Y,"class","actions svelte-1aw8ds9"),C(S,"class","control-row svelte-1aw8ds9"),C(D,"class","controls-column svelte-1aw8ds9"),C(b,"class","editor-body svelte-1aw8ds9"),C(t,"class","editor-card svelte-1aw8ds9"),C(t,"role","dialog"),C(t,"aria-modal","true"),C(r,"class","editor-overlay svelte-1aw8ds9"),C(r,"tabindex","-1")},m(bt,St){It(bt,r,St),w(r,t),w(t,a),w(a,n),w(n,e),w(e,s),w(n,i),w(n,f),w(f,m),w(a,v),w(a,g),w(g,_),w(t,h),w(t,b),w(b,u),w(u,d),Ct&&Ct.m(d,null),w(d,p),Et&&Et.m(d,null),o[28](d),w(u,A),w(u,T),w(T,O),w(b,U),w(b,D),w(D,W),w(W,z),w(z,Z),w(Z,et),w(z,R),w(z,P),w(P,c),w(W,H),w(W,J),w(J,q),w(q,x),w(x,j),w(q,nt),w(q,I),w(I,L),w(q,lt),w(q,st),w(st,tt),w(q,vt),w(q,ft),w(ft,ut),w(J,mt),w(J,pt),w(pt,gt),Wt(wt,gt,null),w(pt,kt),w(pt,l),Wt(Q,l,null),w(D,X),w(D,S),w(S,y),w(y,k),w(S,V),w(S,Y),w(Y,N),w(N,$),w(Y,ot),w(Y,K),w(K,yt),_t=!0,Ot||(Tt=[ht(os,"keydown",o[19]),ht(g,"click",o[10]),ht(x,"click",o[29]),ht(I,"click",o[30]),ht(st,"click",o[31]),ht(ft,"click",o[32]),ht(gt,"click",o[33]),ht(l,"click",o[34]),ht(y,"click",o[8]),ht(N,"click",o[10]),ht(K,"click",o[9]),ht(t,"click",Je(o[17])),ht(t,"keydown",Je(o[18])),ht(r,"click",o[10]),ht(r,"keydown",o[35])],Ot=!0)},p(bt,St){bt[2]||bt[1]?Ct?Ct.p(bt,St):(Ct=Or(bt),Ct.c(),Ct.m(d,p)):Ct&&(Ct.d(1),Ct=null),bt[0].crop?Et?Et.p(bt,St):(Et=Dr(bt),Et.c(),Et.m(d,null)):Et&&(Et.d(1),Et=null),(!_t||St[0]&16&&E!==(E=`aspect-ratio: ${bt[4].width} / ${bt[4].height};`))&&C(d,"style",E),(!_t||St[0]&1)&&Bt(x,"selected",bt[0].aspectRatio==="none"),(!_t||St[0]&1)&&Bt(I,"selected",bt[0].aspectRatio==="4:3"),(!_t||St[0]&1)&&Bt(st,"selected",bt[0].aspectRatio==="3:4"),(!_t||St[0]&1)&&Bt(ft,"selected",bt[0].aspectRatio==="1:1"),(!_t||St[0]&32)&&rt!==(rt=bt[5]?"Saving...":"Save Changes")&&Jt(yt,rt),(!_t||St[0]&32)&&(K.disabled=bt[5])},i(bt){_t||(At(wt.$$.fragment,bt),At(Q.$$.fragment,bt),_t=!0)},o(bt){Rt(wt.$$.fragment,bt),Rt(Q.$$.fragment,bt),_t=!1},d(bt){bt&&B(r),Ct&&Ct.d(),Et&&Et.d(),o[28](null),Vt(wt),Vt(Q),Ot=!1,re(Tt)}}}function us(o){return new Promise((r,t)=>{const a=new Image;a.onload=()=>{URL.revokeObjectURL(a.src),r(a)},a.onerror=()=>{URL.revokeObjectURL(a.src),t(new Error(`Failed to load image: ${o.name}`))},a.src=URL.createObjectURL(o)})}function Pr(o){return new Promise((r,t)=>{o.toBlob(a=>{a?r(URL.createObjectURL(a)):t(new Error("Failed to create preview"))},"image/jpeg",.9)})}function cs(o,r,t){const a=(t-r+360)%360;if(a===0)return o;let{x:n,y:e,width:s,height:i}=o;switch(a){case 90:return{x:1-e-i,y:n,width:i,height:s};case 180:return{x:1-n-s,y:1-e-i,width:s,height:i};case 270:return{x:e,y:1-n-s,width:i,height:s};default:return o}}function ye(o,r,t){return Math.min(Math.max(o,r),t)}function ds(o,r,t){let{file:a}=r,{adjustment:n=Be}=r;const e=sr();let s=nr(n),i=null,f="",m="",v=null,g=null,_=null,h={width:4,height:3},b=0,u=0,d=null,p=!1;function E(){return h.width===0?1:h.height/h.width}function A(){if(d||!s.crop)return;const k=E();let V;s.aspectRatio!=="none"?V=Ke(s.crop,s.aspectRatio,k)||s.crop:V=j(s.crop);const Y=1e-4;(Math.abs(V.x-s.crop.x)>Y||Math.abs(V.y-s.crop.y)>Y||Math.abs(V.width-s.crop.width)>Y||Math.abs(V.height-s.crop.height)>Y)&&t(0,s={...s,crop:V})}async function T(k){const V=++b,Y=await us(k);V===b&&(t(16,v=Y),await O(s.rotation),A())}async function O(k){if(!v)return;const V=++u,Y=Pn(v,k);if(V!==u)return;t(4,h={width:Y.width,height:Y.height});const N=await Pr(Y);if(V!==u){URL.revokeObjectURL(N);return}m&&URL.revokeObjectURL(m),t(2,m=N),A()}Fr(()=>{f&&URL.revokeObjectURL(f),m&&URL.revokeObjectURL(m)});function U(k){t(0,s={...s,...k,crop:k.crop!==void 0?k.crop?{...k.crop}:void 0:s.crop})}function D(k){const V=k==="left"?-90:90,Y=((s.rotation+V)%360+360)%360,$=Y===0||Y===90||Y===180||Y===270?Y:0;let ot=s.crop;s.crop&&(ot=cs(s.crop,s.rotation,$),ot=j(ot)),U({rotation:$,crop:ot})}function W(k){if(k!==s.aspectRatio)if(k==="none")U({aspectRatio:k,crop:ke(k,E())});else{const V=Ke(s.crop,k,E());U({aspectRatio:k,crop:V})}}function z(){U({rotation:0,aspectRatio:"none",crop:ke("none",E())})}async function Z(){if(p)return;const k=s.crop?j(s.crop):void 0,V={...s,crop:k};let Y=null;try{if(t(5,p=!0),v){const N=ir(v,V);Y=await Pr(N)}e("save",{adjustment:V,previewUrl:Y})}catch(N){console.error("Failed to generate preview:",N),Y&&URL.revokeObjectURL(Y),e("save",{adjustment:V})}finally{t(5,p=!1)}}function et(){e("close")}function R(k){k.button!==0||!s.crop||!g||(k.preventDefault(),k.stopPropagation(),_=g.getBoundingClientRect(),d={type:"move",startX:k.clientX,startY:k.clientY,startCrop:{...s.crop}},window.addEventListener("pointermove",c),window.addEventListener("pointerup",H))}function P(k,V){k.button!==0||!s.crop||!g||(k.preventDefault(),k.stopPropagation(),_=g.getBoundingClientRect(),d={type:"resize",handle:V,startCrop:{...s.crop}},window.addEventListener("pointermove",c),window.addEventListener("pointerup",H))}function c(k){if(!d||!_||!s.crop)return;if(k.preventDefault(),d.type==="move"){const N=(k.clientX-d.startX)/_.width,$=(k.clientY-d.startY)/_.height,ot=Ke({...d.startCrop,x:d.startCrop.x+N,y:d.startCrop.y+$},s.aspectRatio,E());U({crop:ot});return}const V=J(k);if(!V)return;const Y=q(d.startCrop,V,d.handle,s.aspectRatio);U({crop:j(Y)})}function H(){d=null,window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",H)}function J(k){if(!_)return null;const V=ye((k.clientX-_.left)/_.width,0,1),Y=ye((k.clientY-_.top)/_.height,0,1);return{x:V,y:Y}}function q(k,V,Y,N){let $,ot,K,rt,yt,_t;const Tt=N!=="none"&&(Y==="nw"||Y==="ne"||Y==="sw"||Y==="se"),Ct=ar(N),Et=Ct!==null?Ct*E():1;switch(Y){case"se":$=k.x,ot=k.y,K=Math.max(V.x-$,Lt),rt=Math.max(V.y-ot,Lt),Tt&&({width:K,height:rt}=x(K,rt,Et)),K=Math.min(K,1-$),rt=Math.min(rt,1-ot),Tt&&({width:K,height:rt}=x(K,rt,Et)),yt=$,_t=ot;break;case"sw":$=k.x+k.width,ot=k.y,K=Math.max($-V.x,Lt),rt=Math.max(V.y-ot,Lt),Tt&&({width:K,height:rt}=x(K,rt,Et)),K=Math.min(K,$),rt=Math.min(rt,1-ot),Tt&&({width:K,height:rt}=x(K,rt,Et)),yt=$-K,_t=ot;break;case"ne":$=k.x,ot=k.y+k.height,K=Math.max(V.x-$,Lt),rt=Math.max(ot-V.y,Lt),Tt&&({width:K,height:rt}=x(K,rt,Et)),K=Math.min(K,1-$),rt=Math.min(rt,ot),Tt&&({width:K,height:rt}=x(K,rt,Et)),yt=$,_t=ot-rt;break;case"nw":$=k.x+k.width,ot=k.y+k.height,K=Math.max($-V.x,Lt),rt=Math.max(ot-V.y,Lt),Tt&&({width:K,height:rt}=x(K,rt,Et)),K=Math.min(K,$),rt=Math.min(rt,ot),Tt&&({width:K,height:rt}=x(K,rt,Et)),yt=$-K,_t=ot-rt;break;case"n":yt=k.x,K=k.width,rt=Math.max(k.y+k.height-V.y,Lt),rt=Math.min(rt,k.y+k.height),_t=k.y+k.height-rt;break;case"s":yt=k.x,_t=k.y,K=k.width,rt=Math.max(V.y-k.y,Lt),rt=Math.min(rt,1-k.y);break;case"e":yt=k.x,_t=k.y,K=Math.max(V.x-k.x,Lt),K=Math.min(K,1-k.x),rt=k.height;break;case"w":_t=k.y,rt=k.height,K=Math.max(k.x+k.width-V.x,Lt),K=Math.min(K,k.x+k.width),yt=k.x+k.width-K;break}return{x:yt,y:_t,width:K,height:rt}}function x(k,V,Y){const N=V*Y,$=k/Y;return N<=1&&N>=Lt?k=N:(V=$,k=V*Y),k=Math.max(k,Lt),V=Math.max(V,Lt),{width:k,height:V}}function j(k){const V=ye(k.width,Lt,1),Y=ye(k.height,Lt,1),N=ye(k.x,0,1-V),$=ye(k.y,0,1-Y);return{x:N,y:$,width:V,height:Y}}function nt(k){hr.call(this,o,k)}function I(k){hr.call(this,o,k)}const L=k=>{k.key==="Escape"&&et()},lt=k=>P(k,"nw"),st=k=>P(k,"ne"),tt=k=>P(k,"sw"),vt=k=>P(k,"se"),ft=k=>P(k,"n"),ut=k=>P(k,"s"),mt=k=>P(k,"e"),pt=k=>P(k,"w");function gt(k){Oe[k?"unshift":"push"](()=>{g=k,t(3,g)})}const wt=()=>W("none"),kt=()=>W("4:3"),l=()=>W("3:4"),Q=()=>W("1:1"),X=()=>D("left"),S=()=>D("right"),y=k=>k.key==="Enter"&&et();return o.$$set=k=>{"file"in k&&t(13,a=k.file),"adjustment"in k&&t(14,n=k.adjustment)},o.$$.update=()=>{o.$$.dirty[0]&65537&&!s.crop&&v&&t(0,s={...s,crop:ke(s.aspectRatio,E())}),o.$$.dirty[0]&114689&&n&&n!==i&&(t(0,s=nr(n)),!s.crop&&v&&t(0,s.crop=ke(s.aspectRatio,E()),s),t(15,i=n)),o.$$.dirty[0]&8194&&a&&(f&&URL.revokeObjectURL(f),t(1,f=URL.createObjectURL(a)),T(a)),o.$$.dirty[0]&65537&&v&&O(s.rotation)},A(),[s,f,m,g,h,p,D,W,z,Z,et,R,P,a,n,i,v,nt,I,L,lt,st,tt,vt,ft,ut,mt,pt,gt,wt,kt,l,Q,X,S,y]}class fs extends Qt{constructor(r){super(),$t(this,r,ds,ls,Gt,{file:13,adjustment:14},null,[-1,-1])}}function Br(o){let r,t=(o[12]||o[5]||o[4])+"",a;return{c(){r=F("p"),a=ct(t),this.h()},l(n){r=M(n,"P",{class:!0});var e=G(r);a=dt(e,t),e.forEach(B),this.h()},h(){C(r,"class","text-sm text-neutral-600")},m(n,e){It(n,r,e),w(r,a)},p(n,e){e&4144&&t!==(t=(n[12]||n[5]||n[4])+"")&&Jt(a,t)},d(n){n&&B(r)}}}function Ur(o){let r,t,a,n,e,s,i,f,m=o[11].current+"",v,g,_=o[11].total+"",h,b,u,d=o[11].currentFile+"",p,E,A,T,O,U;return a=new nn({props:{size:32,class:"animate-spin text-neutral-600 mb-3 mx-auto"}}),{c(){r=F("div"),t=F("div"),jt(a.$$.fragment),n=at(),e=F("p"),s=ct("Processing Images"),i=at(),f=F("p"),v=ct(m),g=ct(" of "),h=ct(_),b=at(),u=F("p"),p=ct(d),A=at(),T=F("div"),O=F("div"),this.h()},l(D){r=M(D,"DIV",{class:!0});var W=G(r);t=M(W,"DIV",{class:!0});var z=G(t);xt(a.$$.fragment,z),n=it(z),e=M(z,"P",{class:!0});var Z=G(e);s=dt(Z,"Processing Images"),Z.forEach(B),i=it(z),f=M(z,"P",{class:!0});var et=G(f);v=dt(et,m),g=dt(et," of "),h=dt(et,_),et.forEach(B),b=it(z),u=M(z,"P",{class:!0,title:!0});var R=G(u);p=dt(R,d),R.forEach(B),A=it(z),T=M(z,"DIV",{class:!0});var P=G(T);O=M(P,"DIV",{class:!0,style:!0}),G(O).forEach(B),P.forEach(B),z.forEach(B),W.forEach(B),this.h()},h(){C(e,"class","text-lg font-medium text-black svelte-1eldi8g"),C(f,"class","text-sm text-neutral-600 svelte-1eldi8g"),C(u,"class","text-xs text-neutral-500 mt-1 truncate max-w-xs mx-auto svelte-1eldi8g"),C(u,"title",E=o[11].currentFile),C(O,"class","progress-bar-fill svelte-1eldi8g"),pr(O,"width",(o[11].total>0?o[11].current/o[11].total*100:0)+"%"),C(T,"class","progress-bar-bg svelte-1eldi8g"),C(t,"class","progress-card svelte-1eldi8g"),C(r,"class","progress-overlay svelte-1eldi8g")},m(D,W){It(D,r,W),w(r,t),Wt(a,t,null),w(t,n),w(t,e),w(e,s),w(t,i),w(t,f),w(f,v),w(f,g),w(f,h),w(t,b),w(t,u),w(u,p),w(t,A),w(t,T),w(T,O),U=!0},p(D,W){(!U||W&2048)&&m!==(m=D[11].current+"")&&Jt(v,m),(!U||W&2048)&&_!==(_=D[11].total+"")&&Jt(h,_),(!U||W&2048)&&d!==(d=D[11].currentFile+"")&&Jt(p,d),(!U||W&2048&&E!==(E=D[11].currentFile))&&C(u,"title",E),(!U||W&2048)&&pr(O,"width",(D[11].total>0?D[11].current/D[11].total*100:0)+"%")},i(D){U||(At(a.$$.fragment,D),U=!0)},o(D){Rt(a.$$.fragment,D),U=!1},d(D){D&&B(r),Vt(a)}}}function Lr(o){var e,s,i,f,m,v,g,_,h,b,u;let r=`${o[9]}-${o[0][o[9]].name}-${((e=o[7][o[9]])==null?void 0:e.rotation)??0}-${((s=o[7][o[9]])==null?void 0:s.aspectRatio)??"4:3"}-${(i=o[7][o[9]])!=null&&i.crop?`${((m=(f=o[7][o[9]])==null?void 0:f.crop)==null?void 0:m.x)??0}-${((g=(v=o[7][o[9]])==null?void 0:v.crop)==null?void 0:g.y)??0}-${((h=(_=o[7][o[9]])==null?void 0:_.crop)==null?void 0:h.width)??1}-${((u=(b=o[7][o[9]])==null?void 0:b.crop)==null?void 0:u.height)??1}`:"nocrop"}`,t,a,n=Nr(o);return{c(){n.c(),t=fe()},l(d){n.l(d),t=fe()},m(d,p){n.m(d,p),It(d,t,p),a=!0},p(d,p){var E,A,T,O,U,D,W,z,Z,et,R;p&641&&Gt(r,r=`${d[9]}-${d[0][d[9]].name}-${((E=d[7][d[9]])==null?void 0:E.rotation)??0}-${((A=d[7][d[9]])==null?void 0:A.aspectRatio)??"4:3"}-${(T=d[7][d[9]])!=null&&T.crop?`${((U=(O=d[7][d[9]])==null?void 0:O.crop)==null?void 0:U.x)??0}-${((W=(D=d[7][d[9]])==null?void 0:D.crop)==null?void 0:W.y)??0}-${((Z=(z=d[7][d[9]])==null?void 0:z.crop)==null?void 0:Z.width)??1}-${((R=(et=d[7][d[9]])==null?void 0:et.crop)==null?void 0:R.height)??1}`:"nocrop"}`)?(De(),Rt(n,1,1,oe),Pe(),n=Nr(d),n.c(),At(n,1),n.m(t.parentNode,t)):n.p(d,p)},i(d){a||(At(n),a=!0)},o(d){Rt(n),a=!1},d(d){d&&B(t),n.d(d)}}}function Nr(o){let r,t;return r=new fs({props:{file:o[0][o[9]],adjustment:o[7][o[9]]??Be}}),r.$on("close",o[20]),r.$on("save",o[19]),{c(){jt(r.$$.fragment)},l(a){xt(r.$$.fragment,a)},m(a,n){Wt(r,a,n),t=!0},p(a,n){const e={};n&513&&(e.file=a[0][a[9]]),n&640&&(e.adjustment=a[7][a[9]]??Be),r.$set(e)},i(a){t||(At(r.$$.fragment,a),t=!0)},o(a){Rt(r.$$.fragment,a),t=!1},d(a){Vt(r,a)}}}function hs(o){let r,t,a,n,e,s,i,f,m,v,g,_,h,b,u,d,p,E,A,T,O,U,D,W,z,Z,et,R;a=new Jr({props:{title:"Austin Li  Watermark Tool",description:"Batch watermark images with timestamps. All processing happens in your browser."}});function P(I){o[22](I)}function c(I){o[23](I)}let H={totalImages:o[0].length};o[2]!==void 0&&(H.config=o[2]),o[1]!==void 0&&(H.selectedPhotoCount=o[1]),g=new Xn({props:H}),Oe.push(()=>er(g,"config",P)),Oe.push(()=>er(g,"selectedPhotoCount",c));function J(I){o[24](I)}let q={};o[10]!==void 0&&(q.options=o[10]),d=new Jn({props:q}),Oe.push(()=>er(d,"options",J)),T=new Rn({props:{disabled:o[3]}}),T.$on("filesSelected",o[14]);let x=(o[12]||o[13])&&o[0].length>0&&Br(o);W=new Mn({props:{files:o[0],imageAdjustments:o[7],previewOverrides:o[8],onProcess:o[21],canProcess:o[6]&&!o[13],config:o[2]}}),W.$on("remove",o[15]),W.$on("reorder",o[16]),W.$on("clearAll",o[17]),W.$on("edit",o[18]);let j=o[3]&&Ur(o),nt=o[9]!==null&&o[0][o[9]]&&Lr(o);return{c(){r=F("link"),t=at(),jt(a.$$.fragment),n=at(),e=F("div"),s=F("div"),i=F("p"),f=ct(`Upload images and add timestamped watermarks. All processing happens in
      your browser  nothing is uploaded.`),m=at(),v=F("div"),jt(g.$$.fragment),b=at(),u=F("div"),jt(d.$$.fragment),E=at(),A=F("div"),jt(T.$$.fragment),O=at(),x&&x.c(),U=at(),D=F("div"),jt(W.$$.fragment),z=at(),j&&j.c(),Z=at(),nt&&nt.c(),et=fe(),this.h()},l(I){const L=Kr("svelte-19ru3f7",document.head);r=M(L,"LINK",{rel:!0,href:!0}),L.forEach(B),t=it(I),xt(a.$$.fragment,I),n=it(I),e=M(I,"DIV",{class:!0});var lt=G(e);s=M(lt,"DIV",{class:!0});var st=G(s);i=M(st,"P",{class:!0});var tt=G(i);f=dt(tt,`Upload images and add timestamped watermarks. All processing happens in
      your browser  nothing is uploaded.`),tt.forEach(B),st.forEach(B),m=it(lt),v=M(lt,"DIV",{class:!0});var vt=G(v);xt(g.$$.fragment,vt),vt.forEach(B),b=it(lt),u=M(lt,"DIV",{class:!0});var ft=G(u);xt(d.$$.fragment,ft),ft.forEach(B),E=it(lt),A=M(lt,"DIV",{class:!0});var ut=G(A);xt(T.$$.fragment,ut),O=it(ut),x&&x.l(ut),ut.forEach(B),lt.forEach(B),U=it(I),D=M(I,"DIV",{class:!0});var mt=G(D);xt(W.$$.fragment,mt),mt.forEach(B),z=it(I),j&&j.l(I),Z=it(I),nt&&nt.l(I),et=fe(),this.h()},h(){C(r,"rel","stylesheet"),C(r,"href","https://use.typekit.net/evw2arl.css"),C(i,"class","text-sm sm:text-base"),C(s,"class","space-y-3 sm:space-y-5"),C(v,"class","space-y-4 sm:space-y-5"),C(u,"class","space-y-4 sm:space-y-5"),C(A,"class","space-y-4 sm:space-y-5"),C(e,"class","layout-md text-base sm:text-lg space-y-8 sm:space-y-14"),C(D,"class","image-grid-container svelte-1eldi8g")},m(I,L){w(document.head,r),It(I,t,L),Wt(a,I,L),It(I,n,L),It(I,e,L),w(e,s),w(s,i),w(i,f),w(e,m),w(e,v),Wt(g,v,null),w(e,b),w(e,u),Wt(d,u,null),w(e,E),w(e,A),Wt(T,A,null),w(A,O),x&&x.m(A,null),It(I,U,L),It(I,D,L),Wt(W,D,null),It(I,z,L),j&&j.m(I,L),It(I,Z,L),nt&&nt.m(I,L),It(I,et,L),R=!0},p(I,[L]){const lt={};L&1&&(lt.totalImages=I[0].length),!_&&L&4&&(_=!0,lt.config=I[2],rr(()=>_=!1)),!h&&L&2&&(h=!0,lt.selectedPhotoCount=I[1],rr(()=>h=!1)),g.$set(lt);const st={};!p&&L&1024&&(p=!0,st.options=I[10],rr(()=>p=!1)),d.$set(st);const tt={};L&8&&(tt.disabled=I[3]),T.$set(tt),(I[12]||I[13])&&I[0].length>0?x?x.p(I,L):(x=Br(I),x.c(),x.m(A,null)):x&&(x.d(1),x=null);const vt={};L&1&&(vt.files=I[0]),L&128&&(vt.imageAdjustments=I[7]),L&256&&(vt.previewOverrides=I[8]),L&8256&&(vt.canProcess=I[6]&&!I[13]),L&4&&(vt.config=I[2]),W.$set(vt),I[3]?j?(j.p(I,L),L&8&&At(j,1)):(j=Ur(I),j.c(),At(j,1),j.m(Z.parentNode,Z)):j&&(De(),Rt(j,1,1,()=>{j=null}),Pe()),I[9]!==null&&I[0][I[9]]?nt?(nt.p(I,L),L&513&&At(nt,1)):(nt=Lr(I),nt.c(),At(nt,1),nt.m(et.parentNode,et)):nt&&(De(),Rt(nt,1,1,()=>{nt=null}),Pe())},i(I){R||(At(a.$$.fragment,I),At(g.$$.fragment,I),At(d.$$.fragment,I),At(T.$$.fragment,I),At(W.$$.fragment,I),At(j),At(nt),R=!0)},o(I){Rt(a.$$.fragment,I),Rt(g.$$.fragment,I),Rt(d.$$.fragment,I),Rt(T.$$.fragment,I),Rt(W.$$.fragment,I),Rt(j),Rt(nt),R=!1},d(I){B(r),I&&B(t),Vt(a,I),I&&B(n),I&&B(e),Vt(g),Vt(d),Vt(T),x&&x.d(),I&&B(U),I&&B(D),Vt(W),I&&B(z),j&&j.d(I),I&&B(Z),nt&&nt.d(I),I&&B(et)}}}function ps(o){o&&URL.revokeObjectURL(o)}function ms(o,r,t){let a,n,e,s,i=[],f=18,m=[],v=[],g=null,_={date:new Date().toISOString().split("T")[0],street:"",city:"",state:"",zip:"",timeRanges:[{id:crypto.randomUUID(),startTime:"10:00",incrementPattern:jr[0],photoCount:18}]},h={position:"top-left",fontSize:"large",textColor:"white",hasBorder:!1,borderColor:"black",borderWidth:"medium",bold:!0},b=!1,u={current:0,total:0,currentFile:""},d="";function p(P){const c=P.detail;t(0,i=[...i,...c]);const H=c.map(()=>nr());t(7,m=[...m,...H]),t(8,v=[...v,...new Array(c.length).fill(null)]),t(12,d="")}function E(P){const c=P.detail;ps(v[c]),t(0,i=i.filter((H,J)=>J!==c)),t(7,m=m.filter((H,J)=>J!==c)),t(8,v=v.filter((H,J)=>J!==c))}function A(P){const{from:c,to:H}=P.detail;if(c===H||c<0||c>=i.length||H<0||H>=i.length)return;const J=[...i],q=[...m],x=[...v];[J[c],J[H]]=[J[H],J[c]],[q[c],q[H]]=[q[H],q[c]],[x[c],x[H]]=[x[H],x[c]],t(0,i=J),t(7,m=q),t(8,v=x),t(12,d="")}function T(){t(0,i=[]),W(),t(7,m=[]),t(8,v=[]),t(12,d="")}function O(P){t(9,g=P.detail)}function U(P){if(g===null)return;const c=g,H=P.detail.adjustment;t(7,m=m.map((J,q)=>q===c?H:J)),P.detail.previewUrl&&t(8,v=v.map((J,q)=>q!==c?J:(J&&URL.revokeObjectURL(J),P.detail.previewUrl??null))),t(9,g=null)}function D(){t(9,g=null)}function W(){v.forEach(P=>{P&&URL.revokeObjectURL(P)}),t(8,v=[])}async function z(){const P=Tr(i);if(P){t(12,d=P);return}const c=zr(_,i.length);if(c){t(12,d=c);return}t(12,d=""),t(3,b=!0);try{const H=await $n(i,_,h,J=>{t(11,u=J)},m);await is(H,i)}catch(H){console.error("Processing failed:",H),t(12,d=H instanceof Error?H.message:"Failed to process images. Please try again.")}finally{t(3,b=!1),t(11,u={current:0,total:0,currentFile:""})}}function Z(P){_=P,t(2,_)}function et(P){f=P,t(1,f)}function R(P){h=P,t(10,h)}return o.$$.update=()=>{if(o.$$.dirty&6&&f!==null&&_.timeRanges.length>0){const P=_.timeRanges[0];P.photoCount!==f&&(P.incrementPattern=Tn(f),P.photoCount=f,t(0,i=[]),W(),t(7,m=[]),t(12,d=""))}o.$$.dirty&9&&t(6,a=i.length>0&&!b),o.$$.dirty&1&&t(5,n=i.length>0?Tr(i):null),o.$$.dirty&69&&t(4,e=a?zr(_,i.length):null),o.$$.dirty&48&&t(13,s=n!==null||e!==null)},[i,f,_,b,e,n,a,m,v,g,h,u,d,s,p,E,A,T,O,U,D,z,Z,et,R]}class ws extends Qt{constructor(r){super(),$t(this,r,ms,hs,Gt,{})}}export{ws as component};
